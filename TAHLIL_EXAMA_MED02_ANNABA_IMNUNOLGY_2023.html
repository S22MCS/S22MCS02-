<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تحليل أسئلة علم المناعة</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    
    <style>
        :root {
            --primary-color: #2c7be5;
            --secondary-color: #6c757d;
            --bg-color: #f8f9fa;
            --card-bg-color: #ffffff;
            --font-color: #12263f;
            --border-color: #e3ebf6;
            --highlight-color: #ff6b6b;
        }
        
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-color);
            color: var(--font-color);
            margin: 0;
            padding: 10px;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .container { max-width: 100%; margin: auto; padding: 0 5px; }
        
        h1 { color: var(--primary-color); text-align: center; font-size: 1.6rem; margin: 15px 0; font-weight: 700; }
        
        h2 { color: var(--font-color); border-bottom: 2px solid var(--primary-color); padding-bottom: 8px; margin-top: 25px; font-size: 1.3rem; font-weight: 600; }
        
        h3 { text-align: center; color: var(--secondary-color); font-size: 1.1rem; margin: 15px 0; font-weight: 500; }

        .card {
            background-color: var(--card-bg-color);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        
        .intro-card { background-color: #f0f7ff; border-left: 4px solid var(--primary-color); }
        .intro-card p { font-size: 0.95rem; line-height: 1.7; margin: 0; color: #3a4e6b; }
        .intro-card strong { color: var(--primary-color); font-weight: 700; }
        
        .table-wrapper { 
            overflow-x: auto; 
            -webkit-overflow-scrolling: touch; 
            margin: 0 -5px; 
            padding: 0 5px; 
            max-width: 100%;
        }
        
        table { 
            width: 100%; 
            border-collapse: collapse; 
            font-size: 13px; 
            min-width: 600px; 
        }
        
        th, td { 
            border: 1px solid var(--border-color); 
            padding: 8px 10px; 
            text-align: center; 
            white-space: nowrap;
        }
        
        thead th {
            background-color: var(--primary-color);
            color: white;
            font-size: 13px;
            position: sticky;
            top: 0;
            font-weight: 500;
        }
        
        tbody tr:nth-of-type(odd) { background-color: #f9fbfe; }
        tbody tr:hover { background-color: #f0f5ff; }
        
        tfoot td { font-weight: bold; font-size: 14px; background-color: #e9f2ff; }
        
        td:first-child, th:first-child {
            text-align: right;
            font-weight: 600;
            background-color: #f5f9ff;
            position: sticky;
            right: 0;
            left: auto;
            border-left: 2px solid var(--primary-color);
            white-space: normal;
            min-width: 140px;
        }
        
        thead th:first-child { z-index: 3; background-color: var(--primary-color); }

        .charts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .chart-container { 
            position: relative; 
            height: 280px; 
            width: 100%; 
            margin: 0 auto;
        }
        
        .highlight { color: var(--highlight-color); font-weight: 700; }
        
        .summary-card { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 10px; 
            justify-content: center; 
            margin: 15px 0; 
        }
        
        .summary-item {
            background: #f0f5ff;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 13px;
            font-weight: 500;
            color: var(--primary-color);
            flex: 1 1 120px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            min-width: 120px;
        }
        
        .summary-item span { display: block; font-weight: 700; font-size: 16px; color: var(--font-color); }

        /* Heatmap Styles */
        .heatmap-table td { font-weight: bold; color: var(--font-color); }
        .heat-0 { background-color: #f8f9fa; color: #adb5bd !important; }
        .heat-1 { background-color: #cfe2ff; }
        .heat-2 { background-color: #9ec5fe; }
        .heat-3 { background-color: #6ea8fe; }
        .heat-4 { background-color: #3d8bfd; color: white; }
        .heat-5 { background-color: #0d6efd; color: white; }
        
        /* Language Toggle */
        .language-toggle {
            display: flex;
            justify-content: center;
            margin: 15px 0;
            gap: 10px;
        }
        
        .language-btn {
            padding: 8px 15px;
            border-radius: 20px;
            background: #e9f2ff;
            color: var(--primary-color);
            border: none;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .language-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .language-content {
            display: none;
        }
        
        .language-content.active {
            display: block;
        }
        
        /* Responsive Styles */
        @media (max-width: 600px) {
            .summary-item {
                flex: 1 1 100px;
                min-width: 100px;
                padding: 6px 8px;
                font-size: 12px;
            }
            
            .summary-item span {
                font-size: 14px;
            }
            
            h1 {
                font-size: 1.4rem;
            }
            
            h2 {
                font-size: 1.2rem;
            }
            
            .chart-container {
                height: 250px;
            }
            
            td:first-child, th:first-child {
                min-width: 120px;
            }
        }
        
        @media (min-width: 768px) {
            body { font-size: 16px; padding: 15px; }
            .container { max-width: 750px; }
            h1 { font-size: 1.8rem; margin: 20px 0; }
            h2 { font-size: 1.5rem; margin-top: 35px; }
            .card { padding: 20px; border-radius: 14px; }
            .intro-card p { font-size: 1.05rem; }
            .chart-container { height: 320px; }
            table { font-size: 14px; }
            th, td { padding: 10px 12px; }
            .charts-grid { grid-template-columns: 1fr 1fr; }
        }
        
        @media (min-width: 992px) {
            .container { max-width: 970px; }
        }
        
        @media (min-width: 1200px) {
            .container { max-width: 1140px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>تحليل أسئلة علم المناعة (Immunologie) للسنة الثانية طب</h1>

        <div class="language-toggle">
            <button class="language-btn active" data-lang="ar">العربية</button>
            <button class="language-btn" data-lang="en">English</button>
            <button class="language-btn" data-lang="fr">Français</button>
        </div>

        <div class="language-content active" id="ar-content">
            <div class="card intro-card">
                <p>
                    هذا التحليل الإحصائي يستند على مجموعة من أسئلة الامتحانات (QCM) السابقة الموجهة لطلبة <strong>السنة الثانية بكلية الطب - عنابة</strong>.
                    البيانات المجمعة تغطي عدة سنوات وصولًا إلى <strong>امتحانات سنة 2023</strong>، وتهدف إلى توضيح أهم الدروس والمحاور التي يتم التركيز عليها بشكل متكرر في مقياس <strong>علم المناعة (Immunologie)</strong>.
                </p>
            </div>

            <div class="summary-card">
                <div class="summary-item">إجمالي الأسئلة<br><span>326</span></div>
                <div class="summary-item">عدد السنوات<br><span>12</span></div>
                <div class="summary-item">أكثر درس تكرراً<br><span>Immunoglobulines</span></div>
                <div class="summary-item">سنة الأكثر أسئلة<br><span>2020 (49)</span></div>
            </div>

            <div class="card">
                <h2>الجدول الإحصائي التفصيلي</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>الدرس</th>
                                <th>2023</th><th>2022</th><th>2021</th><th>2020</th><th>2019</th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th><th>2011</th><th>الإجمالي</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Immunoglobulines</td><td>6</td><td>6</td><td>5</td><td>16</td><td>11</td><td>7</td><td>5</td><td>8</td><td>6</td><td>17</td><td>1</td><td>0</td><td>3</td><td><b>91</b></td></tr>
                            <tr><td>Cytokines et Récepteurs</td><td>12</td><td>5</td><td>9</td><td>5</td><td>0</td><td>6</td><td>1</td><td>6</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>48</b></td></tr>
                            <tr><td>Lymphocytes T et TCR</td><td>3</td><td>6</td><td>0</td><td>6</td><td>2</td><td>2</td><td>8</td><td>3</td><td>3</td><td>3</td><td>4</td><td>0</td><td>0</td><td><b>40</b></td></tr>
                            <tr><td>Immunité innée</td><td>2</td><td>6</td><td>6</td><td>1</td><td>3</td><td>3</td><td>3</td><td>2</td><td>4</td><td>3</td><td>0</td><td>0</td><td>0</td><td><b>33</b></td></tr>
                            <tr><td>Organes Lymphoïdes</td><td>2</td><td>3</td><td>0</td><td>7</td><td>2</td><td>2</td><td>5</td><td>1</td><td>4</td><td>4</td><td>0</td><td>0</td><td>0</td><td><b>30</b></td></tr>
                            <tr><td>Lymphocytes B</td><td>4</td><td>5</td><td>5</td><td>4</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>2</td><td>1</td><td>0</td><td>0</td><td><b>26</b></td></tr>
                            <tr><td>Système du Complément</td><td>2</td><td>5</td><td>4</td><td>2</td><td>2</td><td>3</td><td>0</td><td>1</td><td>3</td><td>3</td><td>0</td><td>0</td><td>0</td><td><b>25</b></td></tr>
                            <tr><td>Réponse Immunitaire</td><td>3</td><td>1</td><td>3</td><td>4</td><td>3</td><td>2</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>21</b></td></tr>
                            <tr><td>Réaction Inflammatoire</td><td>3</td><td>0</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>8</b></td></tr>
                            <tr><td>Molécules d'Adhésion</td><td>2</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>3</b></td></tr>
                            <tr><td>Antigènes</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>1</b></td></tr>
                        </tbody>
                        <tfoot>
                            <tr><td>الإجمالي السنوي</td><td>39</td><td>39</td><td>33</td><td>49</td><td>24</td><td>25</td><td>24</td><td>25</td><td>27</td><td>32</td><td>6</td><td>0</td><td>3</td><td><b>326</b></td></tr>
                        </tfoot>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2>الخريطة الحرارية لتوزيع الأسئلة</h2>
                <p style="text-align: center; color: var(--secondary-color); margin-bottom: 15px; font-size: 14px;">
                    نظرة سريعة على تركيز الأسئلة. كلما كان اللون أزرق داكن، زاد عدد الأسئلة في تلك السنة.
                </p>
                <div class="table-wrapper">
                    <table class="heatmap-table" id="heatmap-ar">
                        <thead>
                            <tr>
                                <th>الدرس</th>
                                <th>2023</th><th>2022</th><th>2021</th><th>2020</th><th>2019</th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th><th>2011</th>
                            </tr>
                        </thead>
                        <tbody>
                             <tr><td>Immunoglobulines</td><td>6</td><td>6</td><td>5</td><td>16</td><td>11</td><td>7</td><td>5</td><td>8</td><td>6</td><td>17</td><td>1</td><td>0</td><td>3</td></tr>
                            <tr><td>Cytokines et Récepteurs</td><td>12</td><td>5</td><td>9</td><td>5</td><td>0</td><td>6</td><td>1</td><td>6</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Lymphocytes T et TCR</td><td>3</td><td>6</td><td>0</td><td>6</td><td>2</td><td>2</td><td>8</td><td>3</td><td>3</td><td>3</td><td>4</td><td>0</td><td>0</td></tr>
                            <tr><td>Immunité innée</td><td>2</td><td>6</td><td>6</td><td>1</td><td>3</td><td>3</td><td>3</td><td>2</td><td>4</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Organes Lymphoïdes</td><td>2</td><td>3</td><td>0</td><td>7</td><td>2</td><td>2</td><td>5</td><td>1</td><td>4</td><td>4</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Lymphocytes B</td><td>4</td><td>5</td><td>5</td><td>4</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>2</td><td>1</td><td>0</td><td>0</td></tr>
                            <tr><td>Système du Complément</td><td>2</td><td>5</td><td>4</td><td>2</td><td>2</td><td>3</td><td>0</td><td>1</td><td>3</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Réponse Immunitaire</td><td>3</td><td>1</td><td>3</td><td>4</td><td>3</td><td>2</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Réaction Inflammatoire</td><td>3</td><td>0</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Molécules d'Adhésion</td><td>2</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Antigènes</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2>نظرة عامة على الدروس والسنوات</h2>
                <div class="charts-grid">
                    <div>
                        <h3>أهم الدروس (إجمالي)</h3>
                        <div class="chart-container">
                            <canvas id="totalQuestionsColumnChart-ar"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>تطور الأسئلة عبر السنوات (إجمالي)</h3>
                        <div class="chart-container">
                            <canvas id="questionsByYearChart-ar"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>تحليل تكرار أهم الدروس عبر السنوات</h2>
                <p style="text-align: center; color: var(--secondary-color); margin-bottom: 25px; font-size: 14px;">
                    رسوم بيانية توضح كيف تغير عدد أسئلة الدروس الأكثر أهمية على مدار السنوات.
                </p>
                <div class="charts-grid">
                    <div>
                        <h3>Immunoglobulines</h3>
                        <div class="chart-container">
                            <canvas id="immunoTrendChart-ar"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Cytokines et Récepteurs</h3>
                        <div class="chart-container">
                            <canvas id="cytoTrendChart-ar"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Lymphocytes T et TCR</h3>
                        <div class="chart-container">
                            <canvas id="lymphoTTrendChart-ar"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Immunité innée</h3>
                        <div class="chart-container">
                            <canvas id="inneeTrendChart-ar"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="text-align: center; background-color: #f8fafd; border-left: 4px solid var(--primary-color);">
                <p style="margin: 0; font-size: 14px; color: var(--secondary-color);">
                    تحليل إحصائي لأسئلة علم المناعة - كلية الطب عنابة<br>
                    آخر تحديث: 2023 | عدد الأسئلة المحللة: <span class="highlight">326 سؤال</span>
                </p>
            </div>
        </div>

        <div class="language-content" id="en-content">
            <div class="card intro-card">
                <p>
                    This statistical analysis is based on a collection of past exam questions (QCM) for <strong>second-year medical students at Annaba Medical School</strong>.
                    The compiled data covers several years up to <strong>2023 exams</strong>, aiming to highlight the most frequently emphasized topics in the <strong>Immunology (Immunologie)</strong> course.
                </p>
            </div>

            <div class="summary-card">
                <div class="summary-item">Total Questions<br><span>326</span></div>
                <div class="summary-item">Years Covered<br><span>12</span></div>
                <div class="summary-item">Most Frequent Topic<br><span>Immunoglobulines</span></div>
                <div class="summary-item">Year with Most Questions<br><span>2020 (49)</span></div>
            </div>

            <div class="card">
                <h2>Detailed Statistical Table</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Topic</th>
                                <th>2023</th><th>2022</th><th>2021</th><th>2020</th><th>2019</th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th><th>2011</th><th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Immunoglobulines</td><td>6</td><td>6</td><td>5</td><td>16</td><td>11</td><td>7</td><td>5</td><td>8</td><td>6</td><td>17</td><td>1</td><td>0</td><td>3</td><td><b>91</b></td></tr>
                            <tr><td>Cytokines et Récepteurs</td><td>12</td><td>5</td><td>9</td><td>5</td><td>0</td><td>6</td><td>1</td><td>6</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>48</b></td></tr>
                            <tr><td>Lymphocytes T et TCR</td><td>3</td><td>6</td><td>0</td><td>6</td><td>2</td><td>2</td><td>8</td><td>3</td><td>3</td><td>3</td><td>4</td><td>0</td><td>0</td><td><b>40</b></td></tr>
                            <tr><td>Immunité innée</td><td>2</td><td>6</td><td>6</td><td>1</td><td>3</td><td>3</td><td>3</td><td>2</td><td>4</td><td>3</td><td>0</td><td>0</td><td>0</td><td><b>33</b></td></tr>
                            <tr><td>Organes Lymphoïdes</td><td>2</td><td>3</td><td>0</td><td>7</td><td>2</td><td>2</td><td>5</td><td>1</td><td>4</td><td>4</td><td>0</td><td>0</td><td>0</td><td><b>30</b></td></tr>
                            <tr><td>Lymphocytes B</td><td>4</td><td>5</td><td>5</td><td>4</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>2</td><td>1</td><td>0</td><td>0</td><td><b>26</b></td></tr>
                            <tr><td>Système du Complément</td><td>2</td><td>5</td><td>4</td><td>2</td><td>2</td><td>3</td><td>0</td><td>1</td><td>3</td><td>3</td><td>0</td><td>0</td><td>0</td><td><b>25</b></td></tr>
                            <tr><td>Réponse Immunitaire</td><td>3</td><td>1</td><td>3</td><td>4</td><td>3</td><td>2</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>21</b></td></tr>
                            <tr><td>Réaction Inflammatoire</td><td>3</td><td>0</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>8</b></td></tr>
                            <tr><td>Molécules d'Adhésion</td><td>2</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>3</b></td></tr>
                            <tr><td>Antigènes</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>1</b></td></tr>
                        </tbody>
                        <tfoot>
                            <tr><td>Annual Total</td><td>39</td><td>39</td><td>33</td><td>49</td><td>24</td><td>25</td><td>24</td><td>25</td><td>27</td><td>32</td><td>6</td><td>0</td><td>3</td><td><b>326</b></td></tr>
                        </tfoot>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2>Questions Distribution Heatmap</h2>
                <p style="text-align: center; color: var(--secondary-color); margin-bottom: 15px; font-size: 14px;">
                    Quick overview of question concentration. Darker blue indicates more questions in that year.
                </p>
                <div class="table-wrapper">
                    <table class="heatmap-table" id="heatmap-en">
                        <thead>
                            <tr>
                                <th>Topic</th>
                                <th>2023</th><th>2022</th><th>2021</th><th>2020</th><th>2019</th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th><th>2011</th>
                            </tr>
                        </thead>
                        <tbody>
                             <tr><td>Immunoglobulines</td><td>6</td><td>6</td><td>5</td><td>16</td><td>11</td><td>7</td><td>5</td><td>8</td><td>6</td><td>17</td><td>1</td><td>0</td><td>3</td></tr>
                            <tr><td>Cytokines et Récepteurs</td><td>12</td><td>5</td><td>9</td><td>5</td><td>0</td><td>6</td><td>1</td><td>6</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Lymphocytes T et TCR</td><td>3</td><td>6</td><td>0</td><td>6</td><td>2</td><td>2</td><td>8</td><td>3</td><td>3</td><td>3</td><td>4</td><td>0</td><td>0</td></tr>
                            <tr><td>Immunité innée</td><td>2</td><td>6</td><td>6</td><td>1</td><td>3</td><td>3</td><td>3</td><td>2</td><td>4</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Organes Lymphoïdes</td><td>2</td><td>3</td><td>0</td><td>7</td><td>2</td><td>2</td><td>5</td><td>1</td><td>4</td><td>4</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Lymphocytes B</td><td>4</td><td>5</td><td>5</td><td>4</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>2</td><td>1</td><td>0</td><td>0</td></tr>
                            <tr><td>Système du Complément</td><td>2</td><td>5</td><td>4</td><td>2</td><td>2</td><td>3</td><td>0</td><td>1</td><td>3</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Réponse Immunitaire</td><td>3</td><td>1</td><td>3</td><td>4</td><td>3</td><td>2</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Réaction Inflammatoire</td><td>3</td><td>0</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Molécules d'Adhésion</td><td>2</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Antigènes</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2>Overview of Topics and Years</h2>
                <div class="charts-grid">
                    <div>
                        <h3>Most Important Topics (Total)</h3>
                        <div class="chart-container">
                            <canvas id="totalQuestionsColumnChart-en"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Questions Evolution Over Years (Total)</h3>
                        <div class="chart-container">
                            <canvas id="questionsByYearChart-en"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>Analysis of Key Topics Frequency Over Years</h2>
                <p style="text-align: center; color: var(--secondary-color); margin-bottom: 25px; font-size: 14px;">
                    Charts showing how the number of questions for the most important topics changed over the years.
                </p>
                <div class="charts-grid">
                    <div>
                        <h3>Immunoglobulines</h3>
                        <div class="chart-container">
                            <canvas id="immunoTrendChart-en"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Cytokines et Récepteurs</h3>
                        <div class="chart-container">
                            <canvas id="cytoTrendChart-en"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Lymphocytes T et TCR</h3>
                        <div class="chart-container">
                            <canvas id="lymphoTTrendChart-en"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Immunité innée</h3>
                        <div class="chart-container">
                            <canvas id="inneeTrendChart-en"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="text-align: center; background-color: #f8fafd; border-left: 4px solid var(--primary-color);">
                <p style="margin: 0; font-size: 14px; color: var(--secondary-color);">
                    Statistical Analysis of Immunology Questions - Annaba Medical School<br>
                    Last Update: 2023 | Analyzed Questions: <span class="highlight">326 questions</span>
                </p>
            </div>
        </div>

        <div class="language-content" id="fr-content">
            <div class="card intro-card">
                <p>
                    Cette analyse statistique est basée sur un ensemble de questions d'examen (QCM) antérieures destinées aux étudiants de <strong>deuxième année de médecine à l'Université d'Annaba</strong>.
                    Les données compilées couvrent plusieurs années jusqu'aux <strong>examens de 2023</strong>, visant à mettre en évidence les sujets et axes les plus fréquemment mis en avant dans le module d'<strong>Immunologie</strong>.
                </p>
            </div>

            <div class="summary-card">
                <div class="summary-item">Total des Questions<br><span>326</span></div>
                <div class="summary-item">Nombre d'Années<br><span>12</span></div>
                <div class="summary-item">Sujet le Plus Fréquent<br><span>Immunoglobulines</span></div>
                <div class="summary-item">Année avec Plus de Questions<br><span>2020 (49)</span></div>
            </div>

            <div class="card">
                <h2>Tableau Statistique Détaillé</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Sujet</th>
                                <th>2023</th><th>2022</th><th>2021</th><th>2020</th><th>2019</th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th><th>2011</th><th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Immunoglobulines</td><td>6</td><td>6</td><td>5</td><td>16</td><td>11</td><td>7</td><td>5</td><td>8</td><td>6</td><td>17</td><td>1</td><td>0</td><td>3</td><td><b>91</b></td></tr>
                            <tr><td>Cytokines et Récepteurs</td><td>12</td><td>5</td><td>9</td><td>5</td><td>0</td><td>6</td><td>1</td><td>6</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>48</b></td></tr>
                            <tr><td>Lymphocytes T et TCR</td><td>3</td><td>6</td><td>0</td><td>6</td><td>2</td><td>2</td><td>8</td><td>3</td><td>3</td><td>3</td><td>4</td><td>0</td><td>0</td><td><b>40</b></td></tr>
                            <tr><td>Immunité innée</td><td>2</td><td>6</td><td>6</td><td>1</td><td>3</td><td>3</td><td>3</td><td>2</td><td>4</td><td>3</td><td>0</td><td>0</td><td>0</td><td><b>33</b></td></tr>
                            <tr><td>Organes Lymphoïdes</td><td>2</td><td>3</td><td>0</td><td>7</td><td>2</td><td>2</td><td>5</td><td>1</td><td>4</td><td>4</td><td>0</td><td>0</td><td>0</td><td><b>30</b></td></tr>
                            <tr><td>Lymphocytes B</td><td>4</td><td>5</td><td>5</td><td>4</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>2</td><td>1</td><td>0</td><td>0</td><td><b>26</b></td></tr>
                            <tr><td>Système du Complément</td><td>2</td><td>5</td><td>4</td><td>2</td><td>2</td><td>3</td><td>0</td><td>1</td><td>3</td><td>3</td><td>0</td><td>0</td><td>0</td><td><b>25</b></td></tr>
                            <tr><td>Réponse Immunitaire</td><td>3</td><td>1</td><td>3</td><td>4</td><td>3</td><td>2</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>21</b></td></tr>
                            <tr><td>Réaction Inflammatoire</td><td>3</td><td>0</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>8</b></td></tr>
                            <tr><td>Molécules d'Adhésion</td><td>2</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>3</b></td></tr>
                            <tr><td>Antigènes</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td><b>1</b></td></tr>
                        </tbody>
                        <tfoot>
                            <tr><td>Total Annuel</td><td>39</td><td>39</td><td>33</td><td>49</td><td>24</td><td>25</td><td>24</td><td>25</td><td>27</td><td>32</td><td>6</td><td>0</td><td>3</td><td><b>326</b></td></tr>
                        </tfoot>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2>Carte Thermique de Répartition des Questions</h2>
                <p style="text-align: center; color: var(--secondary-color); margin-bottom: 15px; font-size: 14px;">
                    Aperçu rapide de la concentration des questions. Plus la couleur est bleu foncé, plus le nombre de questions est élevé pour cette année.
                </p>
                <div class="table-wrapper">
                    <table class="heatmap-table" id="heatmap-fr">
                        <thead>
                            <tr>
                                <th>Sujet</th>
                                <th>2023</th><th>2022</th><th>2021</th><th>2020</th><th>2019</th><th>2018</th><th>2017</th><th>2016</th><th>2015</th><th>2014</th><th>2013</th><th>2012</th><th>2011</th>
                            </tr>
                        </thead>
                        <tbody>
                             <tr><td>Immunoglobulines</td><td>6</td><td>6</td><td>5</td><td>16</td><td>11</td><td>7</td><td>5</td><td>8</td><td>6</td><td>17</td><td>1</td><td>0</td><td>3</td></tr>
                            <tr><td>Cytokines et Récepteurs</td><td>12</td><td>5</td><td>9</td><td>5</td><td>0</td><td>6</td><td>1</td><td>6</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Lymphocytes T et TCR</td><td>3</td><td>6</td><td>0</td><td>6</td><td>2</td><td>2</td><td>8</td><td>3</td><td>3</td><td>3</td><td>4</td><td>0</td><td>0</td></tr>
                            <tr><td>Immunité innée</td><td>2</td><td>6</td><td>6</td><td>1</td><td>3</td><td>3</td><td>3</td><td>2</td><td>4</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Organes Lymphoïdes</td><td>2</td><td>3</td><td>0</td><td>7</td><td>2</td><td>2</td><td>5</td><td>1</td><td>4</td><td>4</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Lymphocytes B</td><td>4</td><td>5</td><td>5</td><td>4</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>2</td><td>1</td><td>0</td><td>0</td></tr>
                            <tr><td>Système du Complément</td><td>2</td><td>5</td><td>4</td><td>2</td><td>2</td><td>3</td><td>0</td><td>1</td><td>3</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Réponse Immunitaire</td><td>3</td><td>1</td><td>3</td><td>4</td><td>3</td><td>2</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Réaction Inflammatoire</td><td>3</td><td>0</td><td>1</td><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Molécules d'Adhésion</td><td>2</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>Antigènes</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2>Vue d'Ensemble des Sujets et Années</h2>
                <div class="charts-grid">
                    <div>
                        <h3>Sujets les Plus Importants (Total)</h3>
                        <div class="chart-container">
                            <canvas id="totalQuestionsColumnChart-fr"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Évolution des Questions par Année (Total)</h3>
                        <div class="chart-container">
                            <canvas id="questionsByYearChart-fr"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>Analyse de la Fréquence des Sujets Clés par Année</h2>
                <p style="text-align: center; color: var(--secondary-color); margin-bottom: 25px; font-size: 14px;">
                    Graphiques montrant l'évolution du nombre de questions pour les sujets les plus importants au fil des années.
                </p>
                <div class="charts-grid">
                    <div>
                        <h3>Immunoglobulines</h3>
                        <div class="chart-container">
                            <canvas id="immunoTrendChart-fr"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Cytokines et Récepteurs</h3>
                        <div class="chart-container">
                            <canvas id="cytoTrendChart-fr"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Lymphocytes T et TCR</h3>
                        <div class="chart-container">
                            <canvas id="lymphoTTrendChart-fr"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3>Immunité innée</h3>
                        <div class="chart-container">
                            <canvas id="inneeTrendChart-fr"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="text-align: center; background-color: #f8fafd; border-left: 4px solid var(--primary-color);">
                <p style="margin: 0; font-size: 14px; color: var(--secondary-color);">
                    Analyse Statistique des Questions d'Immunologie - Faculté de Médecine d'Annaba<br>
                    Dernière Mise à Jour: 2023 | Questions Analysées: <span class="highlight">326 questions</span>
                </p>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Language toggle functionality
    const languageBtns = document.querySelectorAll('.language-btn');
    const languageContents = document.querySelectorAll('.language-content');
    
    languageBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            
            // Update active button
            languageBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Show selected language content
            languageContents.forEach(content => content.classList.remove('active'));
            document.getElementById(`${lang}-content`).classList.add('active');
        });
    });

    // Set default font for all charts
    Chart.defaults.font.family = "'Tajawal', sans-serif";
    Chart.defaults.color = '#6e84a3';
    Chart.defaults.borderColor = 'rgba(228, 234, 244, 0.7)';

    const lessons = [
        'Immunoglobulines', 'Cytokines et Récepteurs', 'Lymphocytes T et TCR', 'Immunité innée', 'Organes Lymphoïdes', 
        'Lymphocytes B', 'Système du Complément', 'Réponse Immunitaire', 'Réaction Inflammatoire', 'Molécules d\'Adhésion', 'Antigènes'
    ];
    
    const totals = [91, 48, 40, 33, 30, 26, 25, 21, 8, 3, 1];
    const years = ['2023', '2022', '2021', '2020', '2019', '2018', '2017', '2016', '2015', '2014', '2013', '2012', '2011'];
    const annualTotals = [39, 39, 33, 49, 24, 25, 24, 25, 27, 32, 6, 0, 3];
    
    const yearlyData = {
        'Immunoglobulines':     [6, 6, 5, 16, 11, 7, 5, 8, 6, 17, 1, 0, 3],
        'Cytokines et Récepteurs':[12, 5, 9, 5, 0, 6, 1, 6, 4, 0, 0, 0, 0],
        'Lymphocytes T et TCR': [3, 6, 0, 6, 2, 2, 8, 3, 3, 3, 4, 0, 0],
        'Immunité innée':       [2, 6, 6, 1, 3, 3, 3, 2, 4, 3, 0, 0, 0]
    };

    const chartColors = ['#2c7be5', '#00d97e', '#f6c343', '#e63757', '#8bc8f6', '#02a8b5', '#798bff', '#f59762', '#80e6c1', '#a78df5'];
    
    // Function to create charts for each language
    const createChartsForLanguage = (lang) => {
        // Main Column Chart
        const ctxColumn = document.getElementById(`totalQuestionsColumnChart-${lang}`).getContext('2d');
        new Chart(ctxColumn, {
            type: 'bar',
            data: { 
                labels: lessons, 
                datasets: [{
                    label: lang === 'ar' ? 'إجمالي الأسئلة' : (lang === 'en' ? 'Total Questions' : 'Total des Questions'),
                    data: totals, 
                    backgroundColor: chartColors, 
                    borderRadius: 6 
                }] 
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                plugins: { 
                    legend: { display: false } 
                }, 
                scales: { 
                    y: { beginAtZero: true }, 
                    x: { ticks: { display: false } } 
                } 
            }
        });

        // Main Line Chart
        const ctxYear = document.getElementById(`questionsByYearChart-${lang}`).getContext('2d');
        new Chart(ctxYear, {
            type: 'line',
            data: {
                labels: years.slice().reverse(),
                datasets: [{
                    label: lang === 'ar' ? 'إجمالي عدد الأسئلة' : (lang === 'en' ? 'Total Number of Questions' : 'Nombre Total de Questions'),
                    data: annualTotals.slice().reverse(), 
                    backgroundColor: 'rgba(44, 123, 229, 0.1)', 
                    borderColor: 'rgba(44, 123, 229, 1)', 
                    borderWidth: 3, 
                    fill: true, 
                    tension: 0.3 
                }]
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                plugins: { 
                    legend: { display: false } 
                }, 
                scales: { 
                    y: { 
                        beginAtZero: true, 
                        ticks: { stepSize: 10 } 
                    }, 
                    x: { 
                        grid: { display: false } 
                    } 
                } 
            }
        });
        
        // Function to create individual trend charts
        const createTrendChart = (canvasId, lessonName, data, color) => {
            const ctx = document.getElementById(canvasId).getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: years.slice().reverse(),
                    datasets: [{
                        label: lang === 'ar' ? 'عدد الأسئلة' : (lang === 'en' ? 'Number of Questions' : 'Nombre de Questions'),
                        data: data.slice().reverse(),
                        backgroundColor: color,
                        borderColor: 'white',
                        borderWidth: 1,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, ticks: { precision: 0 } },
                        x: { grid: { display: false } }
                    }
                }
            });
        };

        // Create the 4 individual charts for each language
        createTrendChart(`immunoTrendChart-${lang}`, 'Immunoglobulines', yearlyData['Immunoglobulines'], chartColors[0]);
        createTrendChart(`cytoTrendChart-${lang}`, 'Cytokines et Récepteurs', yearlyData['Cytokines et Récepteurs'], chartColors[1]);
        createTrendChart(`lymphoTTrendChart-${lang}`, 'Lymphocytes T et TCR', yearlyData['Lymphocytes T et TCR'], chartColors[2]);
        createTrendChart(`inneeTrendChart-${lang}`, 'Immunité innée', yearlyData['Immunité innée'], chartColors[3]);
    };

    // Create charts for all languages
    createChartsForLanguage('ar');
    createChartsForLanguage('en');
    createChartsForLanguage('fr');

    // Heatmap coloring function for all languages
    const colorHeatmap = (lang) => {
        const heatmap = document.getElementById(`heatmap-${lang}`);
        const cells = heatmap.getElementsByTagName('td');
        for (let cell of cells) {
            const value = parseInt(cell.innerText, 10);
            if (!isNaN(value)) {
                let heatLevel = 0;
                if (value === 0) { heatLevel = 0; }
                else if (value >= 1 && value <= 3) { heatLevel = 1; }
                else if (value >= 4 && value <= 6) { heatLevel = 2; }
                else if (value >= 7 && value <= 10) { heatLevel = 3; }
                else if (value >= 11 && value <= 15) { heatLevel = 4; }
                else if (value > 15) { heatLevel = 5; }
                cell.classList.add('heat-' + heatLevel);
            }
        }
    };
    
    // Apply heatmap coloring to all language tables
    colorHeatmap('ar');
    colorHeatmap('en');
    colorHeatmap('fr');
});
</script>

</body>
</html>







