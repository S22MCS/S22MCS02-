<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>     </title>

    
    <!-- إضافة الفافيكون بصيغة JPG -->
    <link rel="icon" href="S22MCS PARTS/doctor.png" type="image/jpeg">


<style>
.LIKEWIKIIDAFA-tooltip {
    position: relative;
    display: inline-block;
    cursor: pointer;
    color: red;
    font-weight: bold;
    line-height: 1.5;
}

.LIKEWIKIIDAFA-content {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90vw;
    max-width: 650px;
    max-height: 85vh;
    background-color: #fff;
    padding: 20px;
    z-index: 999999;
    overflow-y: auto;
    direction: rtl;
    border-radius: 12px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
    border: 1px solid #e0e0e0;
    font-size: 1rem;
}

.LIKEWIKIIDAFA-content-inner {
    position: relative;
    height: auto;
    padding: 10px;
}

.LIKEWIKIIDAFA-content::-webkit-scrollbar {
    width: 8px;
}
.LIKEWIKIIDAFA-content::-webkit-scrollbar-thumb {
    background-color: #888;
    border-radius: 4px;
}
.LIKEWIKIIDAFA-content::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.LIKEWIKIIDAFA-tooltip.active .LIKEWIKIIDAFA-content {
    display: block;
    animation: fadeInScale 0.3s ease;
}

.LIKEWIKIIDAFA-tooltip.active::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999998;
}

@keyframes fadeInScale {
    from { opacity: 0; transform: translate(-50%, -50%) scale(0.95); }
    to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

.LIKEWIKIIDAFA-content img {
    max-width: 100%;
    height: auto;
    margin: 15px auto;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    display: block;
}

.LIKEWIKIIDAFA-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #f44336;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
    z-index: 1000000;
    padding: 0;
    line-height: 1;
}

.LIKEWIKIIDAFA-close-btn:hover {
    background: #d32f2f;
    transform: scale(1.1);
}

.LIKEWIKIIDAFA-close-btn:active {
    transform: scale(0.95);
}

.language-section {
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}

.language-title {
    font-size: 1.1rem;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 15px;
    text-align: center;
    padding: 8px 12px;
    background-color: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.arabic-text {
    direction: rtl;
    text-align: right;
    font-size: 1rem;
    line-height: 1.6;
}

.english-text, .french-text {
    direction: ltr;
    text-align: left;
    font-size: 1rem;
    line-height: 1.6;
}

.language-flag {
    width: 22px;
    height: 16px;
    margin: 0 6px;
    vertical-align: middle;
    border-radius: 3px;
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.1);
}

ul {
    padding-right: 20px;
    margin: 10px 0;
}

li {
    margin-bottom: 8px;
}

@media (max-width: 1024px) {
    .LIKEWIKIIDAFA-content {
        width: 92vw;
        padding: 18px;
    }
}

@media (max-width: 768px) {
    .LIKEWIKIIDAFA-content {
        width: 94vw;
        max-height: 90vh;
        padding: 16px;
        font-size: 0.95rem;
    }
    
    .language-title {
        font-size: 1rem;
        padding: 6px 10px;
    }
    
    .LIKEWIKIIDAFA-close-btn {
        width: 28px;
        height: 28px;
        font-size: 16px;
    }
    
    .language-flag {
        width: 20px;
        height: 14px;
    }
}

@media (max-width: 480px) {
    .LIKEWIKIIDAFA-content {
        width: 96vw;
        padding: 14px;
        max-height: 95vh;
        font-size: 0.9rem;
    }
    
    .language-title {
        font-size: 0.95rem;
        padding: 5px 8px;
    }
    
    .LIKEWIKIIDAFA-close-btn {
        width: 26px;
        height: 26px;
        font-size: 15px;
        top: 10px;
        right: 10px;
    }
    
    .language-flag {
        width: 18px;
        height: 12px;
    }
    
    ul {
        padding-right: 15px;
    }
    
    li {
        margin-bottom: 6px;
    }
}

@media (max-height: 600px) {
    .LIKEWIKIIDAFA-content {
        top: 20px;
        transform: translateX(-50%);
        max-height: calc(100vh - 40px);
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const LIKEWIKIIDAFA_tooltip = document.getElementById('LIKEWIKIIDAFA-tooltip');
    const LIKEWIKIIDAFA_closeBtn = document.querySelector('.LIKEWIKIIDAFA-close-btn');
    
    // فتح عند الضغط على النص
    LIKEWIKIIDAFA_tooltip.addEventListener('click', function(e) {
        e.stopPropagation();
        document.body.style.overflow = 'hidden';
        document.documentElement.style.overflow = 'hidden';
        LIKEWIKIIDAFA_tooltip.classList.add('active');
    });
    
    // إغلاق بالضغط على الزر X فقط
    LIKEWIKIIDAFA_closeBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        closeTooltip();
    });
    
    // إغلاق عند الضغط خارج النافذة
    document.addEventListener('click', function(e) {
        if (LIKEWIKIIDAFA_tooltip.classList.contains('active') && 
            !e.target.closest('.LIKEWIKIIDAFA-content') && 
            !e.target.closest('.LIKEWIKIIDAFA-tooltip')) {
            closeTooltip();
        }
    });
    
    // إغلاق بالضغط على زر ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && LIKEWIKIIDAFA_tooltip.classList.contains('active')) {
            closeTooltip();
        }
    });
    
    function closeTooltip() {
        document.body.style.overflow = '';
        document.documentElement.style.overflow = '';
        LIKEWIKIIDAFA_tooltip.classList.remove('active');
    }
    
    // منع التمرير عند فتح النافذة على الأجهزة المحمولة
    document.querySelector('.LIKEWIKIIDAFA-content').addEventListener('touchmove', function(e) {
        if (LIKEWIKIIDAFA_tooltip.classList.contains('active')) {
            e.preventDefault();
        }
    }, { passive: false });
});
</script>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أداة حماية العين</title>
    <style>
        /* تحسينات عامة */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* إعدادات الصفحة الأساسية */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #edf2f7;
            color: #333;
            transition: all 0.5s ease;
        }
    
        header, main {
            padding: 20px;
            text-align: center;
        }
    
        header h1 {
            font-size: 2rem;
            color: #444;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1.2s ease-in-out;
        }
    
        main h2 {
            font-size: 1.5rem;
            color: #555;
            margin-bottom: 10px;
        }
    
        main p {
            font-size: 1rem;
            line-height: 1.6;
            color: #666;
        }
    
        /* الحاوية */
        #controlPanel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(145deg, #e0e5ec, #ffffff);
            border-radius: 50px;
            box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.1), -10px -10px 20px rgba(255, 255, 255, 0.7);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            width: 60px;
            height: 60px;
            overflow: hidden;
            transition: all 0.4s ease, box-shadow 0.3s ease-in-out;
        }
    
        #controlPanel.expanded {
            width: auto; /* ستتحدد بناءً على المحتوى والاستعلامات أدناه */
            min-width: 280px; /* حد أدنى لعرض اللوحة الموسعة */
            height: auto;
            max-height: 75vh; /* حد أقصى لارتفاع اللوحة على شاشات الهاتف */
            overflow-y: auto; /* إضافة تمرير إذا تجاوز المحتوى الارتفاع الأقصى */
            border-radius: 20px;
            padding-bottom: 10px; /* إضافة حشو سفلي للوحة الموسعة */
            box-shadow: 20px 20px 40px rgba(0, 0, 0, 0.15), -20px -20px 40px rgba(255, 255, 255, 0.9);
        }
    
        /* الزر */
        #toggleButton {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at 30% 30%, #4caf50, #388e3c);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 28px;
            cursor: pointer;
            display: flex;
            flex-shrink: 0; /* منع الزر من الانكماش */
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.2), 
                        5px 5px 10px rgba(0,0,0,0.2), 
                        -5px -5px 10px rgba(255,255,255,0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
    
        #toggleButton:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3), 
                        8px 8px 20px rgba(0,0,0,0.2), 
                        -8px -8px 20px rgba(255,255,255,0.5);
            background: radial-gradient(circle at 30% 30%, #43a047, #2e7d32);
        }
    
        #emoji {
            font-size: 32px;
            line-height: 1;
            animation: bounce 2s infinite ease-in-out;
        }
    
        #toggleText {
            font-size: 14px;
            color: white;
            position: absolute;
            bottom: -20px;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
    
        #toggleButton:hover #toggleText {
            opacity: 1;
            transform: translateY(-5px);
        }
    
        /* شريط التمرير */
        .slider-container {
            width: 90%;
            max-width: 280px; /* حد أقصى لعرض حاوية الشريط */
            margin: 10px auto; /* توسيط وتعديل الهامش */
            position: relative;
        }
        
        .color-spectrum {
            width: 100%;
            height: 20px;
            border-radius: 10px;
            background: linear-gradient(to right, 
                #ff9a3c, /* 1700K */
                #ffb347, /* 2000K */
                #ffcc6a, /* 2300K */
                #ffe08c, /* 2700K */
                #f5f5f5  /* أبيض محايد (للتوضيح، القيمة الفعلية للفلتر قد تختلف) */
            );
            margin-bottom: 5px;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        #colorTempSlider {
            width: 100%;
            appearance: none;
            -webkit-appearance: none; /* لمتصفحات WebKit */
            height: 12px;
            background: transparent; /* جعل مسار الشريط شفافًا */
            border-radius: 6px;
            outline: none;
            cursor: pointer;
            position: absolute;
            top: 4px; /* تعديل ليتمركز فوق color-spectrum */
            left: 0;
        }
    
        #colorTempSlider::-webkit-slider-thumb {
            appearance: none;
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: var(--thumb-color, radial-gradient(circle, #4caf50, #388e3c)); /* استخدام متغير CSS */
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3), -2px -2px 4px rgba(255, 255, 255, 0.5);
            transition: transform 0.2s ease-in-out, background 0.3s ease;
        }
         #colorTempSlider::-moz-range-thumb { /* لمتصفح Firefox */
            width: 22px;
            height: 22px;
            background: var(--thumb-color, radial-gradient(circle, #4caf50, #388e3c));
            border-radius: 50%;
            cursor: pointer;
            border: none; /* إزالة الحدود الافتراضية في Firefox */
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3), -2px -2px 4px rgba(255, 255, 255, 0.5);
            transition: transform 0.2s ease-in-out, background 0.3s ease;
        }
    
        #colorTempSlider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        #colorTempSlider::-moz-range-thumb:hover {
            transform: scale(1.2);
        }
    
        .temp-labels {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 11px;
            color: #555;
            margin-top: 25px; /* ليكون أسفل شريط التمرير والطيف */
        }
    
        .small-slider {
            width: 80px;
            height: 8px;
        }
    
        #label {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            display: none;
            text-align: center;
            margin-top: 5px; /* هامش علوي بسيط */
            animation: fadeIn 0.8s ease-in-out;
        }
    
        .expanded #label {
            display: block;
        }
    
        /* خيارات إضافية */
        .options {
            display: none;
            width: 100%;
            padding: 0 15px 10px; /* تقليل الحشو السفلي قليلاً */
            flex-direction: column;
            gap: 12px; /* زيادة طفيفة في الفجوة لتحسين اللمس */
        }
    
        .expanded .options {
            display: flex;
        }
    
        .option-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    
        .option-label {
            font-size: 13px;
            color: #555;
        }
    
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            flex-shrink: 0; /* منع الانكماش */
        }
    
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
    
        .slider { /* هذا اسم الكلاس لمحول التبديل، وليس شريط التمرير الرئيسي */
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
    
        .slider:before {
            position: absolute;
            content: "";
            height: 18px; /* زيادة طفيفة لحجم المقبض */
            width: 18px;  /* زيادة طفيفة لحجم المقبض */
            left: 3px;    /* تعديل الموقع ليتناسب مع الحجم الجديد */
            bottom: 3px;  /* تعديل الموقع ليتناسب مع الحجم الجديد */
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
    
        input:checked + .slider {
            background-color: #4CAF50;
        }
    
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    
        /* معلومات علمية */
        .science-info {
            display: none;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 10px;
            margin: 10px 15px;
            font-size: 12px;
            color: #555;
            border-right: 3px solid #4CAF50;
        }
    
        .expanded .science-info {
            display: block;
            animation: fadeIn 0.8s ease-in-out;
        }
    
        .science-title {
            font-weight: bold;
            color: #388e3c;
            margin-bottom: 5px;
        }
    
        /* الإشعارات */
        .notification {
            position: fixed;
            bottom: 100px; /* تعديل الموضع ليكون أعلى من اللوحة في حالة توسعها */
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 12px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            animation: slideIn 0.5s ease-out;
            z-index: 1001;
        }
    
        .fade-out {
            animation: fadeOut 0.5s ease-out forwards;
        }

        /* فواصل للموبايل (تم نقلها من داخل body) */
        .mobile-breaks {
          display: none;
        }
    
        /* الرسوم المتحركة */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); } /* تقليل مقدار الارتداد */
        }
        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
    
        /* تحسين التوافق مع الهواتف */
        @media (max-width: 768px) {
            header h1 { font-size: 1.8rem; }
            main h2 { font-size: 1.3rem; }

            #controlPanel {
                bottom: 10px;
                right: 10px;
                gap: 8px; /* تقليل الفجوة قليلاً */
            }
            #controlPanel.expanded {
                width: 300px; /* عرض ثابت للتابلت والهواتف الكبيرة نسبياً */
                padding-bottom: 15px;
            }
            #toggleButton {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }
            #emoji { font-size: 28px; }
            .notification {
                bottom: 80px; /* تعديل المسافة من الأسفل للوحة التحكم الأصغر */
                right: 10px;
                padding: 10px 15px;
            }
            .mobile-breaks {
                display: block;
                height: 1.5em; /* تقليل الارتفاع قليلاً */
            }
            .temp-labels span { font-size: 10px; }
            #label { font-size: 0.875rem; } /* 14px */
           .option-label { font-size: 0.8125rem; } /* 13px */
        }
    
        @media (max-width: 480px) {
            header h1 { font-size: 1.6rem; }
            main h2 { font-size: 1.2rem; }
            main p { font-size: 0.9rem; }

            #controlPanel.expanded {
                width: 90%; /* استخدام نسبة مئوية للشاشات الصغيرة جداً */
                right: 5%;
                bottom: 10px;
                gap: 5px; /* تقليل إضافي للفجوة */
                padding-bottom: 10px;
            }
            .options {
                padding: 0 10px 10px;
                gap: 10px;
            }
            .slider-container {
                margin: 5px auto;
            }
            .temp-labels {
                flex-wrap: wrap; /* السماح بالالتفاف إذا ضاقت المساحة */
                justify-content: center; /* توسيط العناصر عند الالتفاف */
                gap: 5px; /* فجوة بين العناصر الملتفة */
            }
            .temp-labels span { font-size: 0.7rem; } /* تصغير إضافي */
            #label { font-size: 0.8rem; } 
            .option-label { font-size: 0.75rem; } /* 12px */
            .science-info {
                font-size: 11px;
                margin: 5px 10px;
                padding: 8px;
            }
        }
        @media (max-width: 360px) {
             header h1 { font-size: 1.5rem; }
            .option-row {
                flex-direction: column; /* جعل الخيارات تحت بعضها */
                align-items: flex-start;
                gap: 5px; /* فجوة بين الملصق والمفتاح */
            }
            .option-row .switch {
                margin-top: 3px; /* هامش بسيط للمفتاح */
            }
            #controlPanel.expanded {
                gap: 3px;
            }
        }

    </style>
</head>
<body>
    


    <div id="controlPanel">
        <button id="toggleButton">
            <span id="emoji">🌙</span>
            <span id="toggleText">تشغيل</span>
        </button>
        <label id="label" for="colorTempSlider">درجة حرارة اللون (1700K-2700K):</label>
        
        <div class="slider-container">
            <div class="color-spectrum"></div>
            <input type="range" id="colorTempSlider" min="1700" max="2700" step="100" value="2700">
            <div class="temp-labels">
                <span>1700K</span>
                <span>2000K</span>
                <span>2300K</span>
                <span>2700K</span>
            </div>
        </div>
        
        <div class="science-info">
            <div class="science-title">معلومات علمية:</div>
            <p>• درجات الحرارة المرتفعة (&gt;5000K) تسبب انتباه الأشخاص وزيادة التركيز.</p>
            <p>• درجات الحرارة المنخفضة (2700K-3000K) تشعر الأشخاص بالاسترخاء والنعاس.</p>
            <p>• الضوء الأزرق (380-550 نانومتر) يؤثر على الساعة البيولوجية.</p>
        </div>
        
        <div class="options">
            <div class="option-row">
                <span class="option-label">الوضع الليلي التلقائي</span>
                <label class="switch">
                    <input type="checkbox" id="autoNightMode">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="option-row">
                <span class="option-label">تقليل الوهج</span>
                <label class="switch">
                    <input type="checkbox" id="reduceGlare" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="option-row">
                <span class="option-label">تعتيم النص</span>
                <label class="switch">
                    <input type="checkbox" id="darkenText">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="option-row">
                <span class="option-label">ضبط السطوع</span>
                <input type="range" id="brightnessSlider" min="50" max="100" value="100" class="small-slider">
            </div>
            <div class="mobile-breaks"></div>
        </div>
    </div>

    <script>
        const controlPanel = document.getElementById('controlPanel');
        const toggleButton = document.getElementById('toggleButton');
        const emoji = document.getElementById('emoji');
        const toggleText = document.getElementById('toggleText');
        const colorTempSliderElement = document.getElementById('colorTempSlider'); // تم تغيير الاسم لتمييزه
        const autoNightMode = document.getElementById('autoNightMode');
        const reduceGlare = document.getElementById('reduceGlare');
        const darkenText = document.getElementById('darkenText');
        const brightnessSlider = document.getElementById('brightnessSlider');
    
        let isEyeProtectionEnabled = false;
        let autoNightModeInterval;
    
        // تحميل التفضيلات المحفوظة
        window.addEventListener('DOMContentLoaded', () => {
            const preferences = JSON.parse(localStorage.getItem('eyeProtectionPrefs')) || {};
            if (preferences.autoNightMode) autoNightMode.checked = true;
            if (preferences.reduceGlare === false) reduceGlare.checked = false; // معالجة القيمة false صراحة
            else reduceGlare.checked = true; // القيمة الافتراضية أو true
            if (preferences.darkenText) darkenText.checked = true;
            
            if (preferences.brightness) {
                brightnessSlider.value = preferences.brightness;
                document.body.style.opacity = preferences.brightness / 100;
            }
            if (preferences.colorTemp) colorTempSliderElement.value = preferences.colorTemp;

            // يجب تفعيل الحماية بعد تحميل الإعدادات المتعلقة بها
            if (preferences.enabled) {
                enableEyeProtection(); // يستدعي updateFilter و updateSliderColor
            } else {
                // إذا لم تكن مفعلة، لا يزال يجب تحديث لون المقبض بناءً على القيمة المحملة
                updateSliderColor(colorTempSliderElement.value);
            }
    
            // تحقق من وقت اليوم عند التحميل
            if (autoNightMode.checked) { // فقط إذا كان الوضع التلقائي محدداً
                checkTimeOfDay(); // هذا قد يفعل الحماية إذا كان الوقت ليلاً
                startAutoNightMode();
            }
        });
    
        toggleButton.addEventListener('click', () => {
            controlPanel.classList.toggle('expanded');
    
            if (isEyeProtectionEnabled) {
                disableEyeProtection();
            } else {
                enableEyeProtection();
                // لا تغلق اللوحة تلقائيًا إذا فتحها المستخدم يدويًا للتو
                // يمكن إبقاء هذا السلوك أو إزالته حسب الرغبة
                // setTimeout(() => {
                //     if (isEyeProtectionEnabled) { // فقط أغلق إذا كانت الحماية لا تزال مفعلة
                //        controlPanel.classList.remove('expanded');
                //     }
                // }, 7000); // زيادة الوقت قليلاً
            }
            savePreferences();
        });
    
        colorTempSliderElement.addEventListener('input', function() {
            updateFilter();
            updateSliderColor(this.value);
            savePreferences(); // حفظ عند تغيير شريط التمرير أيضًا
        });
        
        // تحديث لون مقبض شريط التمرير بناء على القيمة باستخدام متغير CSS
        function updateSliderColor(value) {
            const percent = (value - 1700) / (2700 - 1700); // النسبة من 0 إلى 1
            let newThumbColor = 'radial-gradient(circle, #4caf50, #388e3c)'; // لون افتراضي

            // الألوان تتدرج من البرتقالي (دافئ جداً) إلى الأصفر (دافئ)
            // 1700K هو الأكثر دفئًا (برتقالي), 2700K هو الأقل دفئًا في هذا النطاق (أصفر فاتح)
            if (percent < 0.33) { // الثلث الأول (الأكثر دفئًا)
                newThumbColor = 'radial-gradient(circle, #ff9a3c, #e07c2e)'; 
            } else if (percent < 0.66) { // الثلث الأوسط
                newThumbColor = 'radial-gradient(circle, #ffb347, #e0953a)'; 
            } else { // الثلث الأخير (الأقل دفئًا)
                newThumbColor = 'radial-gradient(circle, #ffe08c, #e0c87a)'; 
            }
            // تطبيق اللون على متغير CSS الذي يستخدمه مقبض شريط التمرير
            colorTempSliderElement.style.setProperty('--thumb-color', newThumbColor);
        }
        
        autoNightMode.addEventListener('change', function() {
            if (this.checked) {
                startAutoNightMode();
                 // لا حاجة لاستدعاء updateFilter هنا مباشرة، سيتم استدعاؤه من checkTimeOfDay إذا لزم الأمر
            } else {
                stopAutoNightMode();
                // إذا تم إلغاء الوضع التلقائي وكان ليلاً، قد نرغب في إبقاء الفلتر أو إزالته بناءً على حالة isEyeProtectionEnabled
            }
            savePreferences();
        });
    
        reduceGlare.addEventListener('change', function() {
            if (isEyeProtectionEnabled) {
                updateFilter();
            }
            savePreferences();
        });
    
        darkenText.addEventListener('change', function() {
            if (isEyeProtectionEnabled) {
                updateFilter();
            }
            savePreferences();
        });
    
        brightnessSlider.addEventListener('input', function() {
            document.body.style.opacity = this.value / 100;
            savePreferences();
        });
    
        function enableEyeProtection() {
            isEyeProtectionEnabled = true;
            emoji.textContent = '🛡️';
            toggleText.textContent = 'إيقاف';
            updateFilter();
            updateSliderColor(colorTempSliderElement.value); // تحديث لون المقبض عند التفعيل
            showNotification('تم تفعيل حماية العين');
            savePreferences(); // حفظ الحالة الجديدة
        }
    
        function disableEyeProtection() {
            isEyeProtectionEnabled = false;
            emoji.textContent = '🌙';
            toggleText.textContent = 'تشغيل';
            document.documentElement.style.filter = 'none';
            document.body.style.color = ''; // استعادة اللون الأصلي للنص
            // استعادة السطوع الافتراضي إذا لم يكن المستخدم قد ضبطه يدوياً
            // brightnessSlider.value = 100; // أو قيمة محفوظة مسبقًا
            // document.body.style.opacity = 1; 
            showNotification('تم إيقاف حماية العين');
            savePreferences(); // حفظ الحالة الجديدة
        }
    
        function updateFilter() {
            if (!isEyeProtectionEnabled) return;
    
            const temp = colorTempSliderElement.value;
            const warmth = (temp - 1700) / (2700 - 1700); // 0 (أكثر دفئًا) إلى 1 (أقل دفئًا)
            
            const sepiaValue = Math.min(1, 0.3 + 0.7 * (1 - warmth)); // زيادة تأثير السيبيا للألوان الدافئة
            const brightnessValue = 1 - 0.15 * (1 - warmth); // تقليل السطوع قليلاً مع الألوان الدافئة
            const contrastValue = reduceGlare.checked ? 1.05 : 1; // زيادة طفيفة للتباين عند تقليل الوهج
            const grayscaleValue = reduceGlare.checked ? 0.05 : 0; // مسحة رمادية خفيفة عند تقليل الوهج
            
            let filterString = `sepia(${sepiaValue}) brightness(${brightnessValue}) contrast(${contrastValue}) grayscale(${grayscaleValue})`;
            
            document.documentElement.style.filter = filterString;
            
            if (darkenText.checked) {
                // تعتيم النص بناءً على الدفء، النص يصبح أغمق مع الألوان الأكثر دفئًا
                document.body.style.color = `hsl(0, 0%, ${60 - ( (1-warmth) * 25)}%)`; 
            } else {
                document.body.style.color = ''; // استعادة اللون الافتراضي المحدد في CSS
            }
        }
    
        function checkTimeOfDay() {
            const hour = new Date().getHours();
            const isNightTime = hour >= 18 || hour <= 6; // من 6 مساءً حتى 6 صباحًا
            
            if (autoNightMode.checked) { // تحقق فقط إذا كان الوضع التلقائي نشطًا
                if (isNightTime) {
                    colorTempSliderElement.value = Math.max(1700, Math.min(colorTempSliderElement.value, 2000)); // ضبط لدرجة أكثر دفئًا ليلاً، لا تتجاوز 2000K
                    if (!isEyeProtectionEnabled) {
                        enableEyeProtection();
                        showNotification('تم تفعيل الوضع الليلي تلقائياً');
                    } else {
                        updateFilter(); // تحديث الفلتر إذا كان مفعلاً بالفعل
                    }
                } else { // وقت النهار
                    colorTempSliderElement.value = Math.min(2700, Math.max(colorTempSliderElement.value, 2400)); // درجة أقل دفئًا نهارًا، لا تقل عن 2400K
                    // يمكنك اختيارياً إيقاف الحماية تلقائيًا في النهار إذا كانت مفعلة بواسطة الوضع الليلي
                    // if (isEyeProtectionEnabled) {
                    //    disableEyeProtection();
                    //    showNotification('تم إيقاف الوضع الليلي تلقائياً (النهار)');
                    // }
                    if (isEyeProtectionEnabled) updateFilter();
                }
                updateSliderColor(colorTempSliderElement.value);
            }
        }
    
        function startAutoNightMode() {
            checkTimeOfDay(); // تحقق فورًا
            if (autoNightModeInterval) clearInterval(autoNightModeInterval); // مسح المؤقت القديم إذا وجد
            autoNightModeInterval = setInterval(checkTimeOfDay, 30 * 60 * 1000); // كل 30 دقيقة
        }
    
        function stopAutoNightMode() {
            clearInterval(autoNightModeInterval);
            autoNightModeInterval = null;
        }
    
        function showNotification(message) {
            // إزالة أي إشعار موجود أولاً
            const existingNotif = document.querySelector('.notification');
            if (existingNotif) existingNotif.remove();

            const notif = document.createElement('div');
            notif.className = 'notification';
            notif.textContent = message;
            document.body.appendChild(notif);
            
            setTimeout(() => {
                notif.classList.add('fade-out');
                setTimeout(() => notif.remove(), 500);
            }, 3000);
        }
    
        function savePreferences() {
            localStorage.setItem('eyeProtectionPrefs', JSON.stringify({
                autoNightMode: autoNightMode.checked,
                reduceGlare: reduceGlare.checked,
                darkenText: darkenText.checked,
                enabled: isEyeProtectionEnabled,
                brightness: brightnessSlider.value,
                colorTemp: colorTempSliderElement.value
            }));
        }
        
        // إغلاق اللوحة عند الضغط خارجها (باستثناء زر التبديل نفسه)
        document.addEventListener('click', function(event) {
            const isClickInsidePanel = controlPanel.contains(event.target);
            const isClickOnToggleButton = toggleButton.contains(event.target) || toggleButton === event.target;

            if (controlPanel.classList.contains('expanded') && !isClickInsidePanel && !isClickOnToggleButton) {
                controlPanel.classList.remove('expanded');
            }
        });

    </script>
</body>
</html>
  <style>
        body {
            font-family: 'Poppins', 'Amiri', serif;
            background-color: #121212;
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;



            text-align: center;
        }

        .popup {
            display: none;
            position: fixed;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1e1e1e;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 150, 255, 0.6);
            text-align: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, top 0.3s ease-in-out;
        }

        .popup h3 {
            color: #00aaff;
            font-size: 22px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 10px;
        }

        .input-group input {
            width: 85%;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #00aaff;
            text-align: center;
            font-size: 16px;
            background-color: #222;
            color: white;
            outline: none;
            transition: 0.3s;
        }

        .input-group input:focus {
            border-color: #007bff;
            box-shadow: 0 0 10px rgba(0, 150, 255, 0.5);
        }

        .gender-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .gender-buttons button {
            background: linear-gradient(90deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
            transition: background 0.3s ease, transform 0.2s ease-in-out;
        }

        .gender-buttons button:hover {
            background: linear-gradient(90deg, #0056b3, #003c80);
            transform: scale(1.05);
        }

        .gender-buttons button.selected {
            background: #FFD700;
            color: black;
            font-weight: bold;
        }

        .submit-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 16px;
            transition: background 0.3s ease, transform 0.2s ease-in-out;
        }

        .submit-button:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .fade-in {
            opacity: 1 !important;
            top: 50% !important;
        }

        #greeting {
            display: none;
            font-size: 24px;
            font-weight: bold;
            margin-top: 50px;
            text-shadow: 2px 2px 10px rgba(0, 150, 255, 0.5);
        }
#studyMessage {
    display: none;
    font-size: 18px;
    margin-top: 15px;
    color: #FFD700;
    font-weight: bold; /* ← تمت إضافتها */
    text-align: center;
}



    </style>
</head>
<body>

    <br>  <br>  
    <div id="welcomePopup" class="popup">
        <h3>  ! السلام عليكم و أهلاً يا طبيب/طبيبة مستقبلنا ان شاء الله  </h3>

        <p>من فضلك أدخل/ادخلي اسمك واختر/اختاري جنسك:</p>

    
        <div class="input-group">
            <input type="text" id="username" placeholder="أدخل اسمك">
        </div>
    
        <div class="gender-buttons">
            <button id="femaleButton" onclick="selectGender('female')"> امرأة</button>
            <button id="maleButton" onclick="selectGender('male')">  رجل</button>
           
        </div>
    
        <button class="submit-button" onclick="submitInfo()">متابعة</button>
    </div>
    
    <!-- يجب أن يكون خارج نافذة الإدخال حتى يظهر عند الضغط على متابعة -->
    <div id="greetingContainer" style="display: none; flex-direction: column; align-items: center; gap: 10px; margin-top: 70px;">
        <h2 id="welcomeMessage" style="color: #00aaff; text-align: center;"></h2>
        <img id="doctorImage" src="" alt="صورة الطبيب" style="width: 60px; height: 60px; border-radius: 50%;">
        <h1 id="greeting" style="margin: 0; font-size: 22px;"></h1>
    </div>
    <p id="studyMessage" style= " text-align: center; background-color: black;"></p>
    <BR>
<p id="nationMessage" style="color: #FFD700; font-weight: bold; font-size: 18px; text-align: center; background-color: black;"></p>
    
    <script>
        let selectedGender = "";
    
        document.addEventListener("DOMContentLoaded", function () {
            let storedName = localStorage.getItem("username");
            let storedGender = localStorage.getItem("gender");
            let visitCount = parseInt(localStorage.getItem("visitCount") || "0");
    
            visitCount += 1;
            localStorage.setItem("visitCount", visitCount);
    
            if (visitCount >= 3) {
                localStorage.removeItem("username");
                localStorage.removeItem("gender");
                localStorage.setItem("visitCount", "0");
                storedName = null;
            }
    
            if (storedName && storedGender) {
                displayGreeting(storedName, storedGender);
            } else {
                let popup = document.getElementById('welcomePopup');
                popup.style.display = 'block';
                setTimeout(() => popup.classList.add('fade-in'), 50);
            }
        });
    
        function selectGender(gender) {
            selectedGender = gender;
            document.getElementById("maleButton").classList.remove("selected");
            document.getElementById("femaleButton").classList.remove("selected");
    
            if (gender === "male") {
                document.getElementById("maleButton").classList.add("selected");
            } else {
                document.getElementById("femaleButton").classList.add("selected");
            }
        }
    


        function submitInfo() {
    let name = document.getElementById('username').value.trim();
    if (name === "") {
        alert("❌ يرجى إدخال اسمك");
        return;
    }
    if (!selectedGender) {
        alert("❌ يرجى اختيار الجنس");
        return;
    }

    console.log("🚀 إرسال الاسم:", name);
    console.log("🚀 إرسال الجنس:", selectedGender);

    localStorage.setItem("username", name);
    localStorage.setItem("gender", selectedGender);
    localStorage.setItem("visitCount", "0");

    displayGreeting(name, selectedGender);

    let popup = document.getElementById('welcomePopup');
    popup.classList.remove('fade-in');
    setTimeout(() => popup.style.display = 'none', 500);
}






function displayGreeting(name, gender) {
    console.log("✅ تم استلام الاسم:", name);
    console.log("✅ تم استلام الجنس:", gender);

    let welcomeMessage = `السلام عليكم ومرحبًا بك يا ${name}`;  
    
    
    let greetingMessage = gender === "male" 
        ? `مرحبًا دكتور ${name}!` 
        : `مرحبًا دكتورة ${name}!`;

    let studyMessage = gender === "male" 
        ? "ادرس جيدًا يا طبيب المسلمين إن شاء الله 📚" 
        : "ادرسِ جيدًا يا طبيبة المسلمات إن شاء الله 📚";

  
       
        

        let nationNeedsYou = 
    " يقول الله تعالى وبعد بسم الله الرحمان الرحيم :\n" +
    "  ﴿الَّذِينَ يَتَّخِذُونَ الْكَافِرِينَ أَوْلِيَاءَ مِن دُونِ الْمُؤْمِنِينَ ۚ أَيَبْتَغُونَ عِندَهُمُ الْعِزَّةَ فَإِنَّ الْعِزَّةَ لِلَّهِ جَمِيعًا ﴾\n" +
    "[النساء: 139]\n\n" +
    
    " يقول الله تعالى وبعد بسم الله الرحمان الرحيم :\n" +
    "﴿ لَهُ مُعَقِّبَاتٌ مِّن بَيْنِ يَدَيْهِ وَمِنْ خَلْفِهِ يَحْفَظُونَهُ مِنْ أَمْرِ اللَّهِ ۗ إِنَّ اللَّهَ لَا يُغَيِّرُ مَا بِقَوْمٍ حَتَّىٰ يُغَيِّرُوا مَا بِأَنفُسِهِمْ ۗ وَإِذَا أَرَادَ اللَّهُ بِقَوْمٍ سُوءًا فَلَا مَرَدَّ لَهُ ۚ وَمَا لَهُم مِّن دُونِهِ مِن وَالٍ ﴾\n" +
    "[الرعد: 11]\n\n" +

    "أمتكم بحاجة إليكم.. كونوا عونًا لها في سبيل الله، اجعلوا علمكم طريقًا لنهضة أمتكم.. أمتكم بحاجة إليكم.\n\n" +
    
    "فعن السلف الصالح عمر بن الخطاب رضي الله عنه قال:\n" +
    "\"إنَّا كنَّا أذَلَّ قومٍ، فأعزَّنا اللَّهُ بالإسلامِ، فمهما نطلُبِ العِزَّةَ بغيرِ ما أعزَّنا اللَّهُ به أذلَّنا اللَّهُ.\"";

// وضع النص داخل العنصر بدون أكواد HTML ظاهرة
document.getElementById('nationMessage').textContent = nationNeedsYou;






    let imageSrc = gender === "male" 
        ? "S22MCS PARTS/doctor.png" 
        : "S22MCS PARTS/doctormuslim.png";

    // تحديث العناصر في الصفحة
    document.getElementById('welcomeMessage').innerText = welcomeMessage;
    document.getElementById('greeting').innerText = greetingMessage;
    document.getElementById('studyMessage').innerText = studyMessage;
    document.getElementById('nationMessage').innerText = nationNeedsYou;
    document.getElementById('doctorImage').src = imageSrc;

    // عرض القسم بالكامل
    document.getElementById('greetingContainer').style.display = 'flex';
    document.getElementById('studyMessage').style.display = 'block';
    document.getElementById('nationMessage').style.display = 'block';
}

        
    </script>
    
</body>
</html>




<!DOCTYPE html>
        <html lang="ar">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>  </title>
       <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة الدرس</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* === إعدادات عامة === */
        :root {
            --primary-color: #00aaff;
            --primary-dark-color: #007bff;
            --primary-darker-color: #0056b3;
            --dark-bg: #121212;
            --light-dark-bg: #1a1a1a;
            --medium-dark-bg: #222;
            --dark-gray-bg: #333;
            --light-gray-bg: #444;
        }

        body {
            font-family: 'Poppins', 'Amiri', serif;
            background-color: var(--dark-bg);
            color: white;
            margin: 0;
            padding: 20px;
            text-align: center;
            padding-top: 100px; /* مساحة للشريط العلوي الثابت */
        }

        /* === الشريط العلوي === */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 90px;
            background-color: var(--dark-gray-bg);
            color: white;
            padding: 0 16px;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            box-sizing: border-box;
            gap: 15px; /* مسافة بين العناصر */
        }

        .sidebar h3 {
            margin: 0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0; /* يمنع التقلص */
        }
        
        /* حاوية شريط التقدم */
        .progress-bar-container {
            width: 100%; /* اجعله يأخذ المساحة المتاحة */
            max-width: 600px;
            height: 25px;
            background-color: var(--light-gray-bg);
            border-radius: 15px;
            position: relative;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            flex-grow: 1; /* يسمح له بالتمدد */
        }

.progress-bar {
    height: 100%;
    width: 50%;

  background-color: #0066ff; /* <-- هذا السطر يجعل الشريط أزرق */

    border-radius: 15px;
    transition: width 0.3s ease-in-out;
}



        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        /* أزرار الشريط العلوي */
        .sidebar-button {
            padding: 8px 12px;
            font-size: 0.9rem;
            box-sizing: border-box;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            background-color: var(--primary-dark-color);
            color: white;
            white-space: nowrap; /* يمنع التفاف النص */
        }
        .sidebar-button:hover {
            background-color: var(--primary-darker-color);
        }
        .finish-button {
             background-color: var(--primary-color);
        }

        /* === محتوى الدرس (الفقاعات) === */
        .lesson-container {
            margin-top: 20px;
        }
        .bubble {
            background: rgba(30, 30, 30, 0.95);
            box-shadow: 0 6px 20px rgba(0, 150, 255, 0.4);
            border-left: 6px solid var(--primary-color);
            padding: 20px;
            border-radius: 20px;
            margin: 20px auto 70px auto;
            max-width: 60rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
            text-align: right;
            position: relative;
            cursor: pointer;
        }
        .bubble:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 150, 255, 0.5);
        }

        .interact-button {
            position: absolute;
            top: 5px;
            left: 6px;
            background-color: var(--primary-dark-color);
            color: white;
            border: none;
            padding: 8px 12px;
            font-size: 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .interact-button:hover {
            background-color: var(--primary-darker-color);
        }
        
        /* صورة خارجية */
        .outside-image {
            display: block;
            margin: 20px auto;
            max-width: 100%;
            height: auto;
        }
        
        /* زر إعادة التحميل */
        .refresh-button {
            background: linear-gradient(135deg, var(--light-dark-bg), var(--dark-gray-bg));
            color: #ffffff;
            border: 1px solid var(--light-gray-bg);
            padding: 10px 22px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 25px;
            font-family: 'Poppins', Arial, sans-serif;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            min-width: 160px;
            justify-content: center;
        }
        .refresh-button:hover {
            background: linear-gradient(135deg, #292929, var(--light-gray-bg));
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(255, 255, 255, 0.15);
        }
        .refresh-button::before {
            content: "🔄";
            font-size: 18px;
        }

        /* === النوافذ المنبثقة (Modals) === */
        .modal, #end-lesson-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 400px;
            background: var(--medium-dark-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 150, 255, 0.5);
            text-align: center;
        }
        .modal h3, #end-lesson-modal h3 {
            color: var(--primary-color);
        }
        .modal button, #end-lesson-modal button {
            background-color: var(--primary-dark-color);
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
            margin: 10px;
            font-size: 16px;
        }
        .modal button:hover, #end-lesson-modal button:hover {
             background-color: var(--primary-darker-color);
        }
        
        /* نافذة نهاية الدرس */
        #end-lesson-modal {
            max-width: 600px;
            background-color: var(--dark-gray-bg);
            padding: 30px;
        }
         #end-lesson-modal h3 {
            font-size: 24px;
         }
         #end-lesson-modal p {
            font-size: 18px;
         }
        
        /* === استجابة التصميم للشاشات المختلفة (Media Queries) === */
        
        /* شاشات متوسطة (Tablets) */
        @media (max-width: 768px) {
            body {
                padding-top: 80px;
            }
            .sidebar {
                height: 70px;
                gap: 10px;
            }
            .sidebar h3 {
                font-size: 0.9rem;
            }
             .sidebar-button {
                padding: 6px 10px;
                font-size: 0.8rem;
            }
            .bubble {
                max-width: 90%;
                padding: 15px;
            }
            .refresh-button {
                padding: 8px 18px;
                font-size: 14px;
                min-width: 140px;
            }
        }

        /* شاشات صغيرة (الهواتف) */
        @media (max-width: 480px) {
            body {
                padding: 10px;
                padding-top: 130px; /* مساحة إضافية بسبب التفاف الشريط */
                font-size: 15px;
            }
            .sidebar {
                flex-wrap: wrap; /* السماح للعناصر بالالتفاف */
                height: auto; /* ارتفاع تلقائي */
                padding: 10px;
                justify-content: center;
            }
            .sidebar h3 {
                display: none; /* إخفاء النص لتوفير مساحة */
            }
            .progress-bar-container {
                order: -1; /* وضع شريط التقدم في الأعلى */
                width: 100%;
                height: 20px;
                margin-bottom: 10px;
            }
            .progress-percentage {
                font-size: 12px;
            }
            .bubble {
                padding: 10px;
            }
            .interact-button {
                font-size: 12px;
                padding: 5px 8px;
            }
             .refresh-button {
                padding: 7px 16px;
                font-size: 13px;
                min-width: 120px;
            }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <button class="sidebar-button finish-button" onclick="finishLesson()">
            ✅ انتهيت
        </button>
        
        <h3 id="proo">📊 <span>التقدم</span></h3>

        <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
            <div class="progress-percentage" id="progress-percentage">0%</div>
        </div>

        <button onclick="goToUncompletedBubble()" class="sidebar-button">
            🔍 الفقاعات غير المكتملة
        </button>
    </div>


   
 




</body>
</html>
    


    <br>       <br>    <br>
    <div class="refresh-container"  id="ref">
        <button class="refresh-button" onclick="location.reload();">تحديث الصفحة</button>
    </div>
    <br>
    <div class="lesson-container" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 70vh; text-align: center;">
      

 
     

    







        <h1 class="lesson-title">الْمَسَالِكُ الْهَوَائِيَّةُ الْعَمِيقَةُ  </h1>
        <h2 class="lesson-subtitle">🔻THE DEEP AIRWAYS🔻</h2>
        <h2 class="lesson-subtitle">🔻LES VOIES AÉRIENNES PROFONDES🔻</h2>
    
    </div>
          
    </div>
    

     


     <!DOCTYPE html>
     <html lang="ar">
     <head>
         <meta charset="UTF-8">
         <meta name="viewport" content="width=device-width, initial-scale=1.0">
         <title>تم عبر برنامج 2019 الطب الجزائري</title>
     
         <style>
         body {
             font-family: 'Poppins', 'Amiri', serif;
             direction: rtl;
             text-align: right;
             background-color: #121212;
             color: white;
             margin: 0;
             padding: 20px;
         }
         
         .container {
             max-width: 600px;
             margin: auto;
             background: #1e1e1e;
             padding: 20px;
             border-radius: 10px;
             box-shadow: 0 0 15px rgba(0, 150, 255, 0.3);
         }
         
         h2 {
             text-align: center;
             color: #00aaff;
         }
         
         .lesson {
             display: flex;
             align-items: center;
             justify-content: space-between;
             padding: 15px;
             border-bottom: 1px solid #444;
             flex-direction: column;
             background: rgba(30, 30, 30, 0.9);
             border-radius: 10px;
             margin-bottom: 10px;
             transition: transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
         }
         
         .lesson:hover {
             transform: translateY(-3px);
             box-shadow: 0 6px 15px rgba(0, 150, 255, 0.4);
         }
         
         .lesson input {
             transform: scale(1.3);
             accent-color: #00aaff;
         }
         
         .lesson span {
             flex-grow: 1;
             margin-right: 10px;
         }
         
         .translation {
             font-size: 12px;
             color: #bbb;
             margin-top: 5px;
         }
         
         .progress-bar {
             width: 100%;
             background: #444;
             height: 12px;
             border-radius: 6px;
             margin: 10px 0;
             overflow: hidden;
         }
         
         .progress {
             height: 100%;
             background: #00aaff;
             width: 0%;
             transition: width 0.3s;
         }
         
         .btn {
             display: block;
             width: 100%;
             padding: 12px;
             background: #00aaff;
             color: white;
             text-align: center;
             border: none;
             border-radius: 6px;
             cursor: pointer;
             font-size: 16px;
             margin-top: 10px;
             transition: background 0.3s ease-in-out;
         }
         
         .btn:hover {
             background: #0077cc;
         }
         
         .lang {
             text-align: center;
             color: #bbb;
             font-size: 14px;
             margin-top: 20px;
         }
     </style>    
     </head>
     <body>
         <div class="container">

             <div class="lesson-container" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                <h2>الأهداف العامة والخاصة في الدرس</h2>
            </div>
            
             <div class="progress-bar"><div class="progress"></div></div>
             <div id="lessonList"></div>
             <button class="btn" onclick="completeAll()">إكمال الكل</button>
             <div class="lang">
                
                العربية

                <br>
            English | Français 
            </div>
         </div>
     
         <script>
             const lessons = [
        


             { ar: "  الاهداف العامة   " },




        { ar: "  الاهداف الخاصة بالدرس   " },







    ];

     
             const lessonList = document.getElementById("lessonList");
             lessons.forEach((lesson, index) => {
                 const div = document.createElement("div");
                 div.className = "lesson";
                 div.innerHTML = `
                     <input type="checkbox" onchange="updateProgress()" id="lesson${index}">
                     <span>${lesson.ar}</span>
                     <div class="translation">${lesson.en}</div>
                     <div class="translation">${lesson.fr}</div>
                 `;
                 lessonList.appendChild(div);
             });
     
             function updateProgress() {
                 const checkboxes = document.querySelectorAll("input[type=checkbox]");
                 let completed = 0;
                 checkboxes.forEach(cb => { if (cb.checked) completed++; });
                 document.querySelector(".progress").style.width = (completed / lessons.length * 100) + "%";
             }
     
             function completeAll() {
                 document.querySelectorAll("input[type=checkbox]").forEach(cb => cb.checked = true);
                 updateProgress();
             }
         </script>
     </body>
     </html>
     




<div class="bubble">
    <button class="interact-button" id="generalites" onclick="markBubbleAsCompleted(this)">تفاعل</button>

    <!-- بالعربية -->
    <ul>
        <li><strong>1-عامة - GENERALITES :</strong></li>
        <ul>
            <li>تضم الممرات الهوائية السفلى شجرة القصبة الهوائية والشعب الهوائية التي يمكن تمييزها حسب موقعها وحجمها كما يلي:
                <ul>
                    <li>الممرات خارج الرئوية (قطر 15 مم):
                        <ul>
                            <li>القصبة الهوائية</li>
                            <li>الشعب الهوائية الرئيسية</li>
                        </ul>
                    </li>
                    <li>الممرات داخل الرئوية (قطر أقل من 15 مم):
                        <ul>
                            <li>شعب ذات قطر كبير</li>
                            <li>شعب ذات قطر متوسط</li>
                            <li>الشعب بين الفصوص</li>
                            <li>الشعب فوق الفصوص</li>
                        </ul>
                    </li>
                    <li>الممرات داخل الفصوص أو القصيبات (قطر أقل من 1 مم):
                        <ul>
                            <li>القصيبات propriement dites</li>
                            <li>القصيبات النهائية</li>
                            <li>القصيبات التنفسية</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>القصبة الهوائية :</strong></li>
            <ul>
                <li>تلي القصبة الهوائية الحنجرة وتقع في المنصف على اتصال وثيق مع المريء (خلفياً) والهياكل الوعائية العصبية.</li>
                <li>هي قناة نصف أسطوانية، مسطحة من الخلف.</li>
                <li>قطرها من 2 إلى 3 سم وطولها 12 سم.</li>
                <li>مزودة بهيكل غضروفي مكون من 16 إلى 20 حلقة غير مكتملة على شكل حدوة حصان مفتوحة من الخلف.</li>
                <li>تنتهي بالتفرع إلى شعبتين رئيسيتين.</li>
            </ul>
            <li><strong>شجرة الشعب الهوائية :</strong></li>
            <ul>
                <li>في المنصف، تنقسم القصبة الهوائية إلى شعب رئيسية (جذوع) تدخل إلى الرئتين عبر فتحة تسمى الباب.</li>
                <li>هذه تنقسم إلى شعب فصية عند فصي الرئة الأيسر (2 فص) والأيمن (3 فصوص).</li>
                <li>ثم تنقسم إلى شعب قطاعية، كل واحدة مخصصة لقطاع رئوي.</li>
                <li>تليها الشعب تحت القطاعية التي تنقسم إلى شعب فوق الفصوص التي تصل إلى كتل متعددة الأضلاع من نسيج الرئة = الفصيصة الرئوية.</li>
                <li>الشعب الدقيقة التي وصلت داخل الرئة تُسمى القصيبات، وتنقسم كل واحدة منها إلى 5 إلى 7 قصيبات نهائية تمثل نهايات القسم الناقل للجهاز التنفسي.</li>
                <li>التقسيم يتم بطريقة تفرعية غير متساوية (الشعبة الأم تتفرع إلى شعبتين بنات).</li>
                <li>مع هذه الانقسامات المتتالية، يقل القطر: 15 مم للجذوع، بين 10 و5 مم للشعب الكبيرة والمتوسطة، من 5 إلى 1.5 مم للشعب ذات القطر الصغير (بين الفصوص). وأخيرًا، الشعبة فوق الفصوص، الموجودة في ساق الفصيصة، قطرها 1 مم.</li>
            </ul>
        </ul>
    </ul>

    <br>

    <!-- بالإنجليزية -->
    <div class="bubble" dir="ltr">
        <ul>
            <li><strong>1- GENERALITIES :</strong></li>
            <ul>
                <li>The lower airways include the tracheobronchial tree, which can be distinguished according to their topography and caliber as follows:
                    <ul>
                        <li>Extra-pulmonary airways (caliber 15 mm):
                            <ul>
                                <li>Trachea</li>
                                <li>Main bronchi</li>
                            </ul>
                        </li>
                        <li>Intra-pulmonary airways (caliber <15 mm):
                            <ul>
                                <li>Large caliber bronchi</li>
                                <li>Medium caliber bronchi</li>
                                <li>Interlobular bronchi</li>
                                <li>Supralobular bronchi</li>
                            </ul>
                        </li>
                        <li>Intralobular airways or bronchioles (caliber <1 mm):
                            <ul>
                                <li>Proper bronchioles</li>
                                <li>Terminal bronchioles</li>
                                <li>Respiratory bronchioles</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>The trachea:</strong></li>
                <ul>
                    <li>The trachea follows the larynx and is located in the mediastinum, closely related to the esophagus (posteriorly) and the neurovascular structures.</li>
                    <li>It is a hemi-cylindrical conduit, flattened posteriorly.</li>
                    <li>Its diameter is 2 to 3 cm and length is 12 cm.</li>
                    <li>It has a cartilaginous skeleton composed of 16 to 20 incomplete rings shaped like a horseshoe, open at the back.</li>
                    <li>It ends by bifurcating into two main bronchi.</li>
                </ul>
                <li><strong>The bronchial tree:</strong></li>
                <ul>
                    <li>In the mediastinum, the trachea divides into main bronchi (stems) that enter the lungs through an opening called the hilum.</li>
                    <li>These branch into lobar bronchi at the level of the 2 lobes of the left lung and 3 lobes of the right lung.</li>
                    <li>They further divide into segmental bronchi, each serving a pulmonary segment.</li>
                    <li>Then they give rise to subsegmental bronchi which further give rise to supralobular bronchi that lead to polyhedral masses of pulmonary tissue = pulmonary lobule.</li>
                    <li>The finest bronchi that have penetrated constitute the bronchioles. Each branches into 5 to 7 terminal bronchioles which are terminal segments of the conducting part of the respiratory system.</li>
                    <li>The division occurs in an unequal dichotomous pattern (the mother bronchus bifurcates into two daughter bronchi).</li>
                    <li>During these successive divisions, the caliber decreases: 15 mm for the main bronchi, between 10 and 5 mm for the large and medium bronchi. It goes from 5 to 1.5 mm along the path of the small bronchi (interlobular bronchi). Finally, the supralobular bronchus, located in the pedicle of the lobule, has a diameter of 1 mm.</li>
                </ul>
            </ul>
        </ul>
    </div>

    <br>

    <!-- بالفرنسية -->
    <div class="bubble">
        <ul>
            <li><strong>1- GÉNÉRALITÉS :</strong></li>
            <ul>
                <li>Les voies aériennes inférieures regroupent l’arbre trachéo-bronchique qui peuvent être distinguées selon leur topographie et leur calibre en :
                    <ul>
                        <li>Voies extra-pulmonaires (calibre 15 mm) :
                            <ul>
                                <li>Trachée</li>
                                <li>Bronches souches</li>
                            </ul>
                        </li>
                        <li>Voies intra-pulmonaires (calibre <15 mm) :
                            <ul>
                                <li>Bronches de gros calibre</li>
                                <li>Bronches de moyen calibre</li>
                                <li>Bronches interlobulaires</li>
                                <li>Bronches sus-lobulaires</li>
                            </ul>
                        </li>
                        <li>Voies intra-lobulaires ou bronchioles (calibre <1 mm) :
                            <ul>
                                <li>Bronchioles proprement dites</li>
                                <li>Bronchioles terminales</li>
                                <li>Bronchioles respiratoires</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>La trachée :</strong></li>
                <ul>
                    <li>La trachée fait suite au larynx et se situe dans le médiastin en relation étroite avec l’œsophage (en postérieur), et les structures vasculonerveuses.</li>
                    <li>C'est un conduit hémi-cylindrique, aplati à l'arrière.</li>
                    <li>Son diamètre est de 2 à 3 cm et sa longueur de 12 cm.</li>
                    <li>Elle est munie d'un squelette cartilagineux formé de 16 à 20 anneaux incomplets, en forme de fer à cheval, ouverts à l'arrière.</li>
                    <li>Se termine par bifurcation en deux bronches souches.</li>
                </ul>
                <li><strong>L’arbre bronchique :</strong></li>
                <ul>
                    <li>Dans le médiastin, la trachée se divise en bronches principales (souches) qui pénètrent dans les poumons par une ouverture appelée le hile.</li>
                    <li>Ces dernières se ramifient en bronches lobaires au niveau des 2 lobes du poumon gauche et des 3 lobes du poumon droit.</li>
                    <li>Elles se divisent ensuite en bronches segmentaires, chacune destinée à un segment pulmonaire.</li>
                    <li>Puis elles donnent des bronches sous-segmentaires qui à leur tour donnent des bronches sus-lobulaires lesquelles aboutissent à des masses polyédriques de tissu pulmonaire = lobule pulmonaire.</li>
                    <li>Les bronches les plus fines qui ont pénétré constituent les bronchioles. Chacune d’elles se ramifie en 5 à 7 bronchioles terminales qui sont des segments terminaux de la partie de conduction de l’appareil respiratoire.</li>
                    <li>La division s’effectue suivant un mode dichotomique inégal (la bronche mère se bifurque en 2 bronches filles).</li>
                    <li>Au cours de ces divisions successives, le calibre se réduit : il est de 15 mm pour les bronches souches, entre 10 et 5 mm pour les grosses et moyennes bronches. Il passe de 5 à 1,5 mm sur le trajet des bronches de petit calibre (bronches inter-lobulaires). Enfin, la bronche sus-lobulaire, située dans le pédicule du lobule, a un diamètre de 1 mm.</li>
                </ul>
            </ul>
        </ul>
    </div>
</div>
<div class="bubble">
    <button class="interact-button" id="embryological-origin" onclick="markBubbleAsCompleted(this)">تفاعل</button>

    <!-- بالعربية -->
    <ul>
        <li><strong>2- الأصل الجنيني (ORIGINE EMBRYOLOGIQUE) :</strong></li>
        <ul>
            <li><strong>2-1 الفترة الجنينية لتكوين الأعضاء (Période embryonnaire d'organogénèse) :</strong></li>
            <ul>
                <li>في الأسبوع الرابع، تظهر نتوء في الجدار البطني للأمعاء الأمامية: الأخدود التنفسي، وبالتالي فإن الشجرة القصبية الرئوية أصلها إنتوبلاستيكي.</li>
                <li>تمتد هذه النتوء في الاتجاه القحفي الذنبى بين اليوم 26 و30 من الحياة داخل الرحم.</li>
                <li>تنفصل عن الأمعاء الأمامية وتشكل الأنبوب الرغامي أو القناة الحنجرة-الرغامية-القصبية-الرئوية. البطانة الظهارية لها أصل إنتوبلاستيكي.</li>
                <li>المكونات الأخرى للجدار: النسيج الضام، العضلات، والغضاريف تتطور من الميزوبلاست.</li>
                <li>النهاية الذيلية للأنبوب الرغامي تولد بسرعة 02 براعم قصبية، هي المسودات للقصبات الأساسية التي تنقسم يمينًا إلى 3 قصبات ويسارًا إلى 02 قصبات.</li>
                <li>تستمر الانقسامات بشكل ثنائي حتى تصل إلى 17 انقسامًا عند 6 أشهر لتكوين الطرق الهوائية داخل الرئة.</li>
                <li>في نهاية الشهر الثاني تنتهي مرحلة تكوين الأعضاء.</li>
            </ul>
            <li><strong>2-2 الفترة الجنينية النسيجية (Période fœtale d'histogénèse) :</strong></li>
            <ul>
                <li>حتى الشهر الرابع (16 أسبوعًا)، يكون ظهارة الطرق التنفسية ظهارة أسطوانية مكعبة بسيطة، وهي مرحلة الغدد الكاذبة.</li>
                <li>بين 4 و8 أشهر، تصبح ظهارة القصبات متعددة الطبقات أسطوانية، في حين تبقى ظهارة القصيبات مكعبة بسيطة.</li>
                <li>بين الأسبوع 18 و24، تتطور الشعيرات الدموية بشكل كبير داخل النسيج الضام لكنها تبقى بعيدة عن الظهارة.</li>
                <li>خلال الفترة بعد الولادة تستمر انقسامات الشجرة القصبية ويتكون 6 إلى 7 أجيال جديدة. تؤدي هذه التشعبات ضمن الميزوبلاست إلى نظامية الرئة إلى فصوص، فصوص فرعية، فصوص، وأقسام.</li>
            </ul>
        </ul>
    </ul>

    <br>

    <!-- بالإنجليزية -->
    <div class="bubble" dir="ltr">
        <ul>
            <li><strong>2- EMBRYOLOGICAL ORIGIN :</strong></li>
            <ul>
                <li><strong>2-1 Embryonic period of organogenesis :</strong></li>
                <ul>
                    <li>At the 4th week, an evagination appears from the ventral wall of the foregut: the respiratory groove, thus the bronchopulmonary tree is of entoblastic origin.</li>
                    <li>It elongates in the cranio-caudal direction between the 26th and 30th day of intrauterine life.</li>
                    <li>It separates from the foregut and will form the tracheal tube or the laryngo-tracheobronchopulmonary canal. Its epithelial lining is of entoblastic origin.</li>
                    <li>The other components of the wall: connective tissue, muscle, cartilage develop from the mesoblast.</li>
                    <li>The caudal end of the tracheal canal rapidly gives rise to 02 bronchial buds, rudiments of the main bronchi which divide on the right into 3 bronchi and on the left into 02 bronchi.</li>
                    <li>The divisions then continue dichotomously, finally reaching 17 divisions at 6 months, giving rise to the intra-pulmonary airways.</li>
                    <li>At the end of the 2nd month, the organogenesis phase is completed.</li>
                </ul>
                <li><strong>2-2 Fetal period of histogenesis :</strong></li>
                <ul>
                    <li>Until the 4th month (16 weeks), the epithelium of the airways is simple cylindrical-cuboidal. This is the pseudoglandular stage.</li>
                    <li>Between 4 and 8 months, the bronchial epithelium becomes pseudostratified columnar while the bronchiolar epithelium remains simple cuboidal.</li>
                    <li>Between 18 and 24 weeks, capillaries develop considerably within the connective tissue but remain distant from the epithelium.</li>
                    <li>During the postnatal period, division of the bronchial tree continues and 6 to 7 new generations form. This bronchial arborization within the mesoblast results in the systematization of the lung into lobules, subsegments, segments, lobes.</li>
                </ul>
            </ul>
        </ul>
    </div>

    <br>

    <!-- بالفرنسية -->
    <div class="bubble">
        <ul>
            <li><strong>2- ORIGINE EMBRYOLOGIQUE :</strong></li>
            <ul>
                <li><strong>2-1 Période embryonnaire d'organogénèse :</strong></li>
                <ul>
                    <li>À la 4e semaine, apparaît une évagination de la paroi ventrale de l’intestin antérieur : la gouttière respiratoire, ainsi l’arbre broncho-pulmonaire est d’origine entoblastique.</li>
                    <li>Elle s’allonge dans le sens cranio-caudal entre le 26ème et 30ème jour de la vie intra-utérine.</li>
                    <li>Elle se sépare de l’intestin antérieur et formera le tube trachéal ou canal laryngo-tracheobroncho-pulmonaire. Son revêtement épithélial est d’origine entoblastique.</li>
                    <li>Les autres constituants de la paroi : conjonctif, muscle, cartilage se développent à partir du mésoblaste.</li>
                    <li>L’extrémité caudale du canal trachéal donne naissance rapidement à 02 bourgeons bronchiques, ébauches des bronches souches qui se divisent à droite en 3 bronches et à gauche en 02 bronches.</li>
                    <li>Les divisions vont ensuite se poursuivre de façon dichotomique, atteignant finalement 17 divisions à 6 mois, pour donner les voies aérophores intra pulmonaires.</li>
                    <li>À la fin du 2e mois, la phase d'organogenèse est terminée.</li>
                </ul>
                <li><strong>2-2 Période fœtale d'histogénèse :</strong></li>
                <ul>
                    <li>Jusqu'au 4e mois (16 semaines), l'épithélium des voies est un épithélium cylindro-cubique simple. C'est le stade pseudo-glandulaire.</li>
                    <li>Entre 4 et 8 mois, l'épithélium des bronches devient prismatique pseudo stratifié tandis que celui des bronchioles reste cubique simple.</li>
                    <li>Entre 18 et 24 semaines, les capillaires se développent considérablement au sein du tissu conjonctif, mais restent à distance de l'épithélium.</li>
                    <li>Au cours de la période post natale la division de l’arbre bronchique continue et il se forme 6 à 7 nouvelles générations. Cette arborisation bronchique au sein du mésoblaste aboutit à la systématisation du poumon en lobules, sous segments, segments, lobes.</li>
                </ul>
            </ul>
        </ul>
    </div>
</div>

















<div class="bubble">
    <button class="interact-button" id="histological-structure" onclick="markBubbleAsCompleted(this)">تفاعل</button>

    <!-- بالعربية -->
    <ul>
        <li><strong>3- البنية النسيجية :</strong></li>
        <ul>
            <li>- بشكل عام، الممرات الهوائية مغطاة بغشاء مخاطي تنفسي،</li>
            <li>- يُلاحظ انتقال تدريجي وغير مفاجئ لهذا الغشاء من ممر إلى آخر.</li>
            <li><strong>3-1 القصبة الهوائية :</strong></li>
            <li>- جدار القصبة الهوائية منظم في 3 طبقات من الداخل إلى الخارج :</li>
            <ul>
                <li>الغشاء المخاطي،</li>
                <li>تحت المخاطي،</li>
                <li>الغشاء الخارجي (النسيج المحيط).</li>
            </ul>
            <li><strong>أ- الغشاء المخاطي :</strong></li>
            <ul>
                <li><em>* الظهارة :</em><br>
                    هي من النوع التنفسي (عمودية زائفة الطبقات ومهدبة) وتستند إلى غشاء قاعدي سميك (6 إلى 7 ميكرومتر).<br>
                    تحتوي على: خلايا مهدبة، خلايا كأسية (خلايا ذات قطب مخاطي مفتوح)، خلايا شعيرية، خلايا فضية وصبغ (argentaffines) وخلايا قاعدية. من الجزء العلوي للقصبة إلى الجزء السفلي، تزداد نسبة الخلايا المهدبة على حساب الأنواع الأخرى.
                </li>
                <li><em>* الطبقة الضامة (الكوريون):</em><br>
                    رقيقة وغنية بالألياف المرنة، التي تشكل في الجزء الخارجي منها شبكة من الألياف الطولية. تحتوي على،
                    <ul>
                        <li>- أوعية دموية وغدد لمفاوية كثيرة، وأعصاب الغشاء المخاطي.</li>
                        <li>- تجمعات لمفاوية غزيرة. تفرز اللمفاويات الأجسام المضادة IgA وتتجمع أحيانًا في عقيدات لمفاوية.</li>
                        <li>- بعض الغدد القصبية، حيث تمتد الغالبية العظمى منها في الطبقة تحت المخاطية.</li>
                    </ul>
                </li>
            </ul>
            <li><strong>ب- الطبقة تحت المخاطية :</strong></li>
            <ul>
                <li>سميكة ومنظمة في طبقتين :</li>
                <ul>
                    <li>* طبقة داخلية ليفية: أكثر سمكًا من الكوريون في الغشاء المخاطي، تحتوي على معظم الغدد القصبية. هذه الغدد مختلطة وتميل إلى الإفراز الصافي، وتكثر في الجانب الخلفي.</li>
                    <li>* طبقة ليفية غضروفية: تحتوي على 16 إلى 20 حلقة غضروفية غير مكتملة من غضروف زجاجي، على شكل حدوة حصان ومفتوحة من الخلف. تلتقي الأطراف الخلفية لكل حلقة بعضلات ملساء تسمى العضلة القصبية، وأربطة من ألياف كولاجينية ومرنة (الرباط القصبي). ترتبط هذه التركيبات بالغلاف المحيط بالغضروف. تحافظ هذه الأقواس الغضروفية على بقاء القصبة الهوائية مفتوحة.</li>
                </ul>
                <li>انقباض العضلة القصبية (مثلًا أثناء ردود فعل السعال) يغلق الحلقات، مما يقلل من قطر القصبة الهوائية.</li>
            </ul>
        </ul>
    </ul>






<div class="bubble">

    <!-- In English -->
    <ul>
        <li><strong>3- HISTOLOGICAL STRUCTURE :</strong></li>
        <ul>
            <li>- Generally, the airways are lined with a respiratory mucosa,</li>
            <li>- A gradual and smooth transition of this mucosa is observed from one airway region to another.</li>
            <li><strong>3-1 THE TRACHEA :</strong></li>
            <li>- The tracheal wall is organized into 3 layers from inside to outside :</li>
            <ul>
                <li>The mucosa,</li>
                <li>The submucosa,</li>
                <li>The adventitia.</li>
            </ul>
            <li><strong>A- The mucosa :</strong></li>
            <ul>
                <li><em>* The epithelium :</em><br>
                    It is respiratory type (pseudo-stratified ciliated columnar) resting on a thick basement membrane (6 to 7 µm).<br>
                    It contains: ciliated cells, goblet cells (open mucus pole cells), brush cells, argentaffin cells, and basal cells. From the upper to the lower trachea, the percentage of ciliated cells increases at the expense of other cell types.
                </li>
                <li><em>* The lamina propria (chorion) :</em><br>
                    It is thin and rich in elastic fibers, which form a layer of longitudinal fibers at the external part of the lamina propria. It contains:
                    <ul>
                        <li>- Numerous blood and lymphatic vessels and nerves of the mucosa.</li>
                        <li>- A dense lymphoid infiltrate. Lymphocytes secrete IgA and sometimes group into lymphoid follicles.</li>
                        <li>- Some tracheal glands, most of which extend into the submucosa.</li>
                    </ul>
                </li>
            </ul>
            <li><strong>B- The submucosa :</strong></li>
            <ul>
                <li>It is thick and organized into two layers :</li>
                <ul>
                    <li>* An inner connective layer: thicker than the lamina propria of the mucosa, containing most of the tracheal glands. These are mixed glands with a serous predominance, more numerous on the posterior aspect.</li>
                    <li>* A fibro-cartilaginous layer: containing 16 to 20 incomplete rings of hyaline cartilage, shaped like horseshoes and open at the back. The posterior ends of each ring are connected by a smooth muscle, the trachealis muscle, and bundles of collagenous and elastic fibers (the tracheal ligament). These elements attach to the perichondrium. The cartilaginous arches keep the trachea open.</li>
                </ul>
                <li>Contraction of the trachealis muscle (e.g., during cough reflexes) closes the rings, reducing the diameter of the trachea.</li>
            </ul>
        </ul>
    </ul>
</div>





    <div class="bubble">

    <!-- En français -->
    <ul>
        <li><strong>3- STRUCTURE HISTOLOGIQUE :</strong></li>
        <ul>
            <li>- De manière générale, les voies aériennes sont recouvertes d’une muqueuse respiratoire,</li>
            <li>- On observe une transition progressive et non brutale de cette dernière d’une voie à une autre.</li>
            <li><strong>3-1 LA TRACHÉE :</strong></li>
            <li>- La paroi trachéale est organisée en 3 couches de l’intérieur vers l’extérieur :</li>
            <ul>
                <li>La muqueuse,</li>
                <li>La sous-muqueuse,</li>
                <li>L’adventice.</li>
            </ul>
            <li><strong>A- La muqueuse :</strong></li>
            <ul>
                <li><em>* L'épithélium :</em><br>
                    Il est de type respiratoire (prismatique pseudo-stratifié cilié) et repose sur une membrane basale épaisse (6 à 7 µm).<br>
                    Il contient : des cellules ciliées, des cellules caliciformes (cellules à pôle muqueux ouvert), des cellules en brosse, des cellules argentaffines et des cellules basales. Du haut vers le bas de la trachée, le pourcentage des cellules ciliées augmente au détriment des autres types cellulaires.
                </li>
                <li><em>* Le chorion :</em><br>
                    Il est mince et riche en fibres élastiques, qui forment à la partie externe du chorion un réseau de fibres longitudinales. Il contient :
                    <ul>
                        <li>- Des vaisseaux abondants (sanguins et lymphatiques) et les nerfs de la muqueuse.</li>
                        <li>- Un infiltrat lymphoïde important. Les lymphocytes sécrètent des IgA et se regroupent parfois en follicules lymphoïdes.</li>
                        <li>- Quelques glandes trachéales, dont la majeure partie s'étend dans la sous-muqueuse.</li>
                    </ul>
                </li>
            </ul>
            <li><strong>B- La sous-muqueuse :</strong></li>
            <ul>
                <li>Elle est épaisse, organisée en deux plans :</li>
                <ul>
                    <li>* Un plan interne conjonctif : plus épais que le chorion de la muqueuse, il renferme la majeure partie des glandes trachéales. Ce sont des glandes mixtes à prédominance séreuse, plus nombreuses au niveau de la face postérieure.</li>
                    <li>* Un plan fibro-cartilagineux : Il contient 16 à 20 anneaux incomplets de cartilage hyalin, en forme de fer à cheval, ouverts à l'arrière. Les extrémités postérieures de chaque anneau sont reliées par un muscle lisse, le muscle trachéal, et par des faisceaux de fibres collagènes et élastiques (le ligament trachéal). Ces éléments s’attachent au périchondre. Les arcs cartilagineux maintiennent la trachée ouverte.</li>
                </ul>
                <li>La contraction du muscle trachéal (par exemple lors des réflexes de toux) ferme les anneaux, réduisant le diamètre de la trachée.</li>
            </ul>
        </ul>
    </ul>
</div>

</div>

       










<div class="bubble">
    <button class="interact-button" id="bronchial-tree" onclick="markBubbleAsCompleted(this)">تفاعل</button>

    <!-- بالعربية -->
 <ul>
    <li><strong>ج- النسيج الليفي الدهني المحيط (الأدفنتيس):</strong></li>
    <ul>
        <li>يحيط بالقصبة الهوائية ويستمر طرفياً مع النسيج الضام للأعضاء المجاورة، خصوصاً مع الأدفنتيس المريئي من الخلف.</li>
        <li><strong>3-2 الشجرة القصبية :</strong></li>
        <li><strong>أ- الشعب الهوائية :</strong></li>
        <li>مع التناقص التدريجي في القطر، يقل سمك جدار القصبة الهوائية وتصبح بنيتها أبسط. الشعب الهوائية الرئيسية خارج الرئة لها نفس بنية القصبة الهوائية، وتظهر أولى التغيرات عند دخولها الرئة.</li>
        <li><strong>أ-1 الغشاء المخاطي :</strong></li>
        <li>يشكل طيات في تجويف القصبة، ربما بسبب توتر الجهاز العضلي في تحت المخاطية. يقل سمكه تدريجياً مع التقدم في الشجرة القصبية.</li>
        <li><em>* الظهارة :</em></li>
        <ul>
            <li>- في الشعب الهوائية ذات القطر الكبير، هي ظهارة تنفسية مماثلة للقصبة الهوائية.</li>
            <li>- في الشعب ذات القطر المتوسط، يقل سمكها وتصبح الطبقات أقل وضوحاً. كما تقل خلايا الكأس فيها.</li>
            <li>- في الشعب الصغيرة أو بين الفصيصية، تبدو ثنائية الطبقة مع طبقة من الخلايا المهدبة وخلايا الكأس فوق طبقة من الخلايا القاعدية.</li>
            <li>- في الشعب فوق الفصيصية، تكون الطبقة القاعدية غير مستمرة. تصبح الظهارة بسيطة أسطوانية وفقيرة جداً في خلايا الكأس.</li>
        </ul>
        <li><em>* اللّمعة (الخورين) :</em></li>
        <li>خالية من الغدد، جيدة التروية وغنية جداً بالألياف المرنة. تحتوي على ضفائر عصبية وتسلل لمفاوي قد يشكل جُريبات لمفاوية خاصة بالقرب من تفرعات الشعب الهوائية. يتناقص سمكها تدريجياً مع التقدم في الشجرة القصبية، وفي الشعب الصغيرة تتحول إلى طبقة مرنة رقيقة فقط.</li>
        <li><strong>أ-2 تحت المخاطية :</strong></li>
        <li>تتكون تقريباً من ثلاث طبقات متحدة المركز :</li>
        <li><em>* الطبقة العضلية الداخلية :</em></li>
        <li>تتألف من عضلة رايسسن، مكونة من ألياف ملساء مرتبة بشكل دائري ومائل. تظهر في الشعب الفصية. تتحكم في قطر التجويف الهوائي، لكنها ليست نظير العضلة القصبية بسبب موقعها. تزداد سماكة هذه الطبقة في الشعب الصغيرة نتيجة نقصان سماكة الطبقات الأخرى. تستمر عضلة رايسسن في القصيبات الصغيرة وتسبب تشنجات الشعب الهوائية.</li>
        <li><em>* الطبقة الوسطى النسيج الضام :</em></li>
        <li>تحتوي على الغدد القصبية، إما سيروزية أو مختلطة. تفتح في تجويف الشعب بقنوات إخراج رقيقة تمر عبر عضلة رايسسن واللورقة المخاطية. يقل عددها تدريجياً وتختفي عند آخر الشعب بين الفصيصية.</li>
        <li><em>* الطبقة الخارجية الليفية والغضروفية :</em></li>
        <li>تحل محل الحلقات الغضروفية في القصبة والشعب الرئيسية. تتكون من قطع غضروف هيالن منحنية ومتحدة بألياف مرنة طولية بشكل رئيسي. تتحلل وتتناقص تدريجياً لتختفي في الشعب بين الفصيصية مع الغدد.</li>
        <li><strong>أ-3 الأدفنتيس :</strong></li>
        <li>مكونة من طبقات ليفية ملتصقة بالغضاريف ونسيج ضام دهني ليفي يربط الشعب الهوائية بالنسيج الرئوي. يحتوي هذا الفراغ الضام على الأوعية الدموية واللمفاوية ونفاصيل الأعصاب.</li>
    </ul>
</ul>

    <br>

    <!-- بالإنجليزية -->
    <div class="bubble" dir="ltr">
   <ul>
    <li><strong>C- The fibro-adipose adventitia:</strong></li>
    <ul>
        <li>It surrounds the trachea and continues peripherally with the connective tissue of neighboring organs, particularly with the adventitia of the esophagus posteriorly.</li>
        <li><strong>3-2 BRONCHIAL TREE:</strong></li>
        <li><strong>A- THE BRONCHI:</strong></li>
        <li>Along with the reduction in diameter, the wall thickness decreases and its structure simplifies. The main (extra-pulmonary) bronchi have a structure identical to the trachea, and the first modifications appear upon entering the lung.</li>
        <li><strong>A-1 The mucosa:</strong></li>
        <li>It forms folds within the bronchial lumen, likely related to the tone of the muscular system of the submucosa. Its thickness decreases progressively as one moves along the bronchial tree.</li>
        <li><em>* The epithelium:</em></li>
        <ul>
            <li>- In large caliber bronchi, it is respiratory epithelium identical to that of the trachea.</li>
            <li>- In medium caliber bronchi, it decreases in thickness and its stratification becomes less distinct. It is depleted in goblet cells.</li>
            <li>- In small or interlobular bronchi, it appears bi-stratified with a layer of ciliated and goblet cells resting on a layer of basal cells.</li>
            <li>- In the supralobular bronchi, the basal layer is discontinuous. The epithelium becomes simple columnar, very poor in goblet cells.</li>
        </ul>
        <li><em>* The lamina propria (chorion):</em></li>
        <li>It is devoid of glands, well vascularized, and very rich in elastic fibers. It contains nerve plexuses and a lymphoid infiltrate, which may form follicles in places, especially near bronchial bifurcations. This lamina propria gradually thins as one moves along the bronchial tree. In small bronchi, it reduces to a simple elastic layer.</li>
        <li><strong>A-2 The submucosa:</strong></li>
        <li>It schematically comprises three concentric layers:</li>
        <li><em>* The internal muscular layer:</em></li>
        <li>It consists of the muscle of Reissessen, formed of smooth muscle fibers arranged circularly and obliquely. This muscle appears at the level of lobar bronchi. It controls the diameter of the bronchial lumen but should not be considered homologous to the tracheal muscle (due to its position in the wall). The relative thickness of this muscle layer increases in small bronchi due to thinning of the other layers. The muscle of Reissessen continues into the bronchioles and is responsible for bronchial spasms.</li>
        <li><em>* The middle connective tissue layer:</em></li>
        <li>It contains bronchial glands, either serous or mixed. They open into the bronchial lumen through thin excretory ducts that traverse the muscle of Reissessen and the lamina propria. Their number gradually decreases and they disappear at the level of the last interlobular bronchi.</li>
        <li><em>* The external fibro-cartilaginous layer:</em></li>
        <li>It replaces the cartilaginous rings found in the trachea and main bronchi. It is made of curved pieces of hyaline cartilage joined by bundles of predominantly longitudinal elastic fibers. The cartilaginous pieces fragment and gradually diminish to disappear in the interlobular bronchi along with the glands.</li>
        <li><strong>A-3 The adventitia:</strong></li>
        <li>Formed of fibrous sheets adhering to the cartilage and fibro-adipose connective tissue connecting the bronchus to the pulmonary parenchyma. This connective space contains corresponding blood and lymphatic vessels as well as nerve plexuses.</li>
    </ul>
</ul>

    </div>

    <br>

    <!-- بالفرنسية -->
    <div class="bubble">
      
   <ul>
        <li><strong>C-L ‘adventice fibro-adipeuse :</strong></li>
        <ul>
            <li>Elle entoure la trachée et se continue en périphérie par le conjonctif des organes de voisinage, en particulier par l'adventice de l’œsophage en arrière.</li>
            <li><strong>3-2 ARBRE BRONCHIQUE :</strong></li>
            <li><strong>A-LES BRONCHES :</strong></li>
            <li>Parallèlement à la réduction de diamètre, l'épaisseur de la paroi diminue et sa structure se simplifie. Les bronches souches, extra-pulmonaires, ont une structure identique à celle de la trachée et les premières modifications apparaissent à l'entrée dans le poumon.</li>
            <li><strong>A-1 La muqueuse :</strong></li>
            <li>Elle forme des plis dans la lumière de la bronche, vraisemblablement en rapport avec le tonus du système musculaire de la sous-muqueuse. Son épaisseur diminue au fur et à mesure que l'on progresse dans l'arbre bronchique.</li>
            <li><em>* L'épithélium :</em></li>
            <ul>
                <li>- Au niveau des bronches de gros calibre, c'est un épithélium respiratoire identique à celui de la trachée.</li>
                <li>- Dans les bronches de moyen calibre, il diminue d'épaisseur et sa stratification devient moins nette. Il s'appauvrit en cellules caliciformes.</li>
                <li>- Dans les bronches de petit calibre ou inter-lobulaires, il semble bistratifié avec une assise de cellules ciliées et caliciformes reposant sur une assise de cellules basales.</li>
                <li>- Dans les bronches sus-lobulaires, l'assise basale est discontinue. L'épithélium devient cylindrique simple, très pauvre en cellules caliciformes.</li>
            </ul>
            <li><em>* Le chorion :</em></li>
            <li>Il est dépourvu de glandes. Il est bien vascularisé et très riche en fibres élastiques. Il contient des plexus nerveux et un infiltrat lymphoïde, pouvant, par endroits, former des follicules, en particulier à proximité des bifurcations bronchiques. Ce chorion s'amincit progressivement au fur et à mesure que l'on progresse dans l'arbre bronchique. Dans les petites bronches, il se réduit à une simple lame élastique.</li>
            <li><strong>A-2 La sous-muqueuse :</strong></li>
            <li>Elle comprend schématiquement 3 plans concentriques :</li>
            <li><em>* Le plan musculaire interne :</em></li>
            <li>Il est constitué par le muscle de Reissessen, formé de fibres lisses à disposition circulaire et oblique. Ce muscle apparaît au niveau des bronches lobaires. Il contrôle le diamètre de la lumière bronchique, mais ne doit pas être considéré comme l'homologue du muscle trachéal (du fait de sa situation dans la paroi). L'épaisseur relative du plan musculaire augmente dans les petites bronches en raison de la diminution d'épaisseur des autres couches. Le muscle de Reissessen se continue dans les bronchioles. Il est responsable des spasmes bronchiques.</li>
            <li><em>* Le plan conjonctif, moyen :</em></li>
            <li>Il renferme les glandes bronchiques, séreuses ou mixtes. Elles s'ouvrent dans la lumière bronchique par de fins conduits excréteurs qui traversent le muscle de Reissessen et le chorion. Leur nombre diminue progressivement et elles disparaissent au niveau des dernières bronches interlobulaires.</li>
            <li><em>* Le plan fibro-cartilagineux, externe :</em></li>
            <li>Il remplace les anneaux cartilagineux rencontrés dans la trachée et les bronches souches. Il est formé de pièces de cartilage hyalin, incurvées et réunies par des faisceaux de fibres élastiques à prédominance longitudinale. Les pièces cartilagineuses se fragmentent et diminuent progressivement pour disparaître dans les bronches interlobulaires, en même temps que les glandes.</li>
            <li><strong>A-3 L’adventice :</strong></li>
            <li>Formée de lames fibreuses adhérentes aux cartilages et de tissu conjonctif fibro-adipeux reliant la bronche au parenchyme pulmonaire. Cet espace conjonctif contient les vaisseaux sanguins et lymphatiques homologues ainsi que des plexus nerveux.</li>
        </ul>
    </ul>


    </div>
</div>
<div class="bubble">
    <button class="interact-button" id="bronchioles-structure" onclick="markBubbleAsCompleted(this)">تفاعل</button>

    <!-- بالعربية -->
    <ul>
        <li><strong>B- القصيبات الهوائية:</strong></li>
        <ul>
            <li>هي الممرات التنفسية داخل الفصيصية. قطرها أقل من 1 مم.</li>
            <li>القصيبات لا تحتوي على هيكل غضروفي ولا غدة. ومع ذلك، فإن عضلة ريسيسين جزء مهم من الجدار ثم تختفي تدريجيًا (القصيبات التنفسية والقنوات الحويصلية).</li>
            <li><strong>B-1 تركيب القصيبات عند التشعب:</strong></li>
            <li><strong>B-1-1 الغشاء المخاطي:</strong></li>
            <ul>
                <li>يشكل طيات في تجويف القناة، خاصة بسبب انقباض خلايا العضلات في الجدار.</li>
                <li>الظهارة بسيطة وتتضمن:
                    <ul>
                        <li>خلايا أسطوانية مهدبة</li>
                        <li>خلايا كؤوس تقل كثافتها</li>
                        <li>بعض الخلايا القاعدية</li>
                        <li>خلايا صماء: الخلايا الأرجنتية يمكن أن تتجمع لتشكل أجسام عصبية-ظهارية مرتبطة بألياف عصبية غير مغطاة بالميلين وتلعب دور مستقبلات حسية.</li>
                        <li>خلايا القبة أو خلايا كلارا: وهي خلايا خاصة بالقصيبات، كثيرة في الأجزاء الأخيرة، نواتها تقع في القاعدة، والقطب القمي المدور مزود ببعض الزغابات الدقيقة ويبرز في التجويف بين أهداب الخلايا الأسطوانية، ويحتوي القطب القمي على حبيبات إفراز ذات محتوى بروتيني وجليكوجين. إفرازها ينتشر على سطح الظهارة بطريقة تشبه السطح الفعال في الحويصلات الهوائية، ويعتقد أنه يقلل من التصاق القصيبات بعد زفير عميق.</li>
                    </ul>
                </li>
                <li>الصفيحة الأساسية: رقيقة وغنية بالألياف المرنة، خالية من الغدد، تحتوي على أوعية دموية، بعض الألياف العصبية، نقاط وأحيانًا جُرَيبات لمفاوية.</li>
            </ul>
            <li><strong>B-2-2 الطبقة العضلية الليفية المرنة أو تحت المخاطية:</strong></li>
            <ul>
                <li>تقع فوق الغشاء المخاطي، وتتكون من عضلة ريسيسين في الجزء الداخلي، ونسج ضامة محيطية رقيقة غنية بالألياف المرنة.</li>
                <li>لا توجد غلاف خارجي مميز، فالنسيج الضام يمتد بلا حدود واضحة إلى النسيج الرئوي المجاور.</li>
            </ul>
            <li><strong>B-2 تركيب القصيبات الطرفية:</strong></li>
            <li>الظهارة بسيطة، مكعبة منخفضة، تحتوي على خلايا مهدبة قليلة متناثرة بين خلايا كلارا.</li>
            <li>الصفيحة الضامة المرنة رقيقة، ومحاطة ببعض الألياف العضلية الملساء.</li>
        </ul>
    </ul>

    <br>

    <!-- بالإنجليزية -->
    <div class="bubble" dir="ltr">
        <ul>
            <li><strong>B- Bronchioles:</strong></li>
            <ul>
                <li>These are the intra-lobular airways. Their diameter is less than 1 mm.</li>
                <li>Bronchioles have no cartilaginous framework or glands. However, the Reissessen muscle is an important component of the wall and disappears progressively (respiratory bronchioles and alveolar ducts).</li>
                <li><strong>B-1 Structure of bifurcation bronchioles:</strong></li>
                <li><strong>B-1-1 The mucosa:</strong></li>
                <ul>
                    <li>It forms folds in the lumen of the duct, especially due to contraction of the muscle cells of the wall.</li>
                    <li>The epithelium is simple and includes:
                        <ul>
                            <li>Ciliated columnar cells</li>
                            <li>Goblet cells, which become scarce</li>
                            <li>Some basal cells</li>
                            <li>Endocrine cells: argentaffin cells may associate to form neuro-epithelial bodies related to unmyelinated nerve fibers that play a sensory receptor role.</li>
                            <li>Dome-shaped cells or Clara cells: these are particular to bronchioles, numerous in the last segments, their nucleus is basal, the rounded apical pole has some microvilli and projects into the lumen between the cilia of columnar cells. The apical pole contains secretory granules with protein content and glycogen. Their secretion spreads on the epithelial surface similarly to surfactant in alveoli. It is believed to have surface tension-active properties and prevent bronchioles from collapsing after a deep expiration.</li>
                        </ul>
                    </li>
                    <li>The lamina propria: very thin and rich in elastic fibers, devoid of glands, contains vessels, some nerve fibers, points and sometimes lymphoid follicles.</li>
                </ul>
                <li><strong>B-2-2 The musculo-fibro-elastic layer or submucosa:</strong></li>
                <ul>
                    <li>It lies on the mucosa. It consists of the Reissessen muscle in its internal part and thin peripheral connective tissue rich in elastic fibers.</li>
                    <li>There is no distinct adventitia: The connective tissue layer continues without a clear boundary into the adjacent respiratory parenchyma.</li>
                </ul>
                <li><strong>B-2 Structure of terminal bronchioles:</strong></li>
                <li>The epithelium is simple, low cuboidal, containing few scattered ciliated cells among Clara cells.</li>
                <li>The connective-elastic lamina is thin, surrounded by some smooth muscle fibers.</li>
            </ul>
        </ul>
    </div>

    <br>

    <!-- بالفرنسية -->
    <div class="bubble">
        <ul>
            <li><strong>B- LES BRONCHIOLES :</strong></li>
            <ul>
                <li>Ce sont les voies respiratoires intra-lobulaires. Leur diamètre est inférieur à 1 mm.</li>
                <li>Les bronchioles ne possèdent ni armature cartilagineuse, ni glande. En revanche, le muscle de Reissessen est un composant important de la paroi puis disparait progressivement (bronchioles respiratoires et canaux alvéolaires).</li>
                <li><strong>B-1 Structure des bronchioles de bifurcation :</strong></li>
                <li><strong>B-1-1 La muqueuse :</strong></li>
                <ul>
                    <li>Elle forme des plis dans la lumière du conduit, en particulier en raison de la contraction des cellules musculaires de la paroi.</li>
                    <li>L'épithélium est simple et comporte :
                        <ul>
                            <li>Des cellules cylindriques ciliées</li>
                            <li>Des cellules caliciformes qui se raréfient</li>
                            <li>Quelques cellules basales</li>
                            <li>Des cellules endocrines : les cellules argentaffines peuvent s'associer pour former des corps neuro-épithéliaux, en rapport avec des fibres nerveuses amyéliniques, qui jouent un rôle de récepteur sensoriel.</li>
                            <li>Des cellules en dôme ou cellules de Clara : il s'agit de cellules particulières aux bronchioles, elles sont nombreuses dans les derniers segments, leur noyau est basal, Le pôle apical, arrondi, est pourvu de quelques microvillosités et dépasse dans la lumière entre les cils des cellules cylindriques, le pôle apical contient des grains de sécrétion à contenu protéique et du glycogène. Leur produit de sécrétion se répand à la surface de l'épithélium de la même façon que le surfactant au niveau des alvéoles. Il aurait des propriétés tensio-actives et éviterait que les bronchioles restent collabées à la suite d'une expiration profonde.</li>
                        </ul>
                    </li>
                    <li>Le chorion : très mince et riche en fibres élastiques, il est dépourvu de glandes. Il contient des vaisseaux, quelques fibres nerveuses, des points et parfois des follicules lymphoïdes.</li>
                </ul>
                <li><strong>B-2-2 Le plan musculo-fibro-élastique ou sous muqueuse :</strong></li>
                <ul>
                    <li>Il repose sur la muqueuse. Il est constitué par le muscle de Reissessen dans sa partie interne et par du conjonctif périphérique mince et riche en fibres élastiques.</li>
                    <li>Il n'y a pas d'adventice individualisé : Le plan conjonctif se poursuit sans limite nette par le parenchyme respiratoire avoisinant.</li>
                </ul>
                <li><strong>B-2 Structure des bronchioles terminales :</strong></li>
                <li>L'épithélium, simple, est cubique bas, comportant de rares cellules ciliées, éparpillées entre des cellules de Clara.</li>
                <li>Le chorion conjonctivo-élastique est mince, entouré de quelques fibres musculaires lisses.</li>
            </ul>
        </ul>
    </div>
</div>
<div class="bubble">
    <button class="interact-button" id="histophysiology-lower-airways" onclick="markBubbleAsCompleted(this)">تفاعل</button>

    <!-- بالعربية -->
    <ul>
        <li><strong>4- الفسيولوجيا النسيجية:</strong></li>
        <ul>
            <li>المجاري الهوائية السفلية تؤمن:</li>
            <ul>
                <li>نقل الهواء أثناء التنفس، ولهذا السبب تبقى أكبر هذه الممرات مفتوحة بواسطة هيكل غضروفي.</li>
                <li>تعديل الهواء المستنشق: تنقية، تدفئة، ترطيب.</li>
                <li>الدفاع المناعي والميكروبي عن طريق تفعيل ثلاثة آليات:</li>
                <ul>
                    <li>1- التقاط ورفض الجسيمات المحاصرة بواسطة الفيلم المخاطي الهدبي الذي يغطي الظهارة ويعمل كحزام ناقل (بسرعة حوالي 1 سم/دقيقة) باتجاه البلعوم. عند هذه النقطة، يُطرد المخاط المحمّل بالغبار والحطام إلى الجهاز الهضمي. يُبلع ويُهضم.</li>
                    <li>2- إنتاج الليزوزيم (إنزيم قاتل للبكتيريا) بواسطة الخلايا المصلية في الغدد المختلطة تحت المخاطية.</li>
                    <li>3- إفراز الأجسام المضادة. الخلايا اللمفاوية B والخلايا البلازمية في الصفيحة الأساسية تنتج خاصة الغلوبولين المناعي A (IgA) بكميات تختلف حسب جودة الهواء المستنشق.</li>
                </ul>
                <li>عضلة القصبة الهوائية تشارك في الحفاظ على قطر المجاري وتنظيم تدفق الهواء.</li>
                <li>الهيكل المرن يلعب دورًا في آلية التنفس.</li>
            </ul>
        </ul>
    </ul>

    <br>

    <!-- بالإنجليزية -->
    <div class="bubble" dir="ltr">
        <ul>
            <li><strong>4- HISTOPHYSIOLOGY:</strong></li>
            <ul>
                <li>The lower airways ensure:</li>
                <ul>
                    <li>Transport of air during respiration; thus, the largest of these airways are kept open by a cartilaginous skeleton.</li>
                    <li>Modification of inhaled air: purification, warming, humidification.</li>
                    <li>Immune and microbial defense through three mechanisms:</li>
                    <ul>
                        <li>1- Capture and rejection of particles trapped by the mucociliary film covering the epithelium, functioning as a conveyor belt (at about 1 cm/minute) towards the pharynx. At this point, mucus loaded with dust and various debris is shifted into the digestive tract. It is swallowed and digested.</li>
                        <li>2- Production of lysozyme (bactericidal enzyme) by the serous cells of the mixed glands of the submucosa.</li>
                        <li>3- Secretion of antibodies. B lymphocytes and plasma cells in the lamina propria produce particularly IgA (immunoglobulins A) in variable quantities depending on the quality of inspired air.</li>
                    </ul>
                    <li>The tracheal muscle is involved in maintaining the caliber and regulating airflow.</li>
                    <li>The elastic apparatus plays a role in the respiratory mechanism.</li>
                </ul>
            </ul>
        </ul>
    </div>

    <br>

    <!-- بالفرنسية -->
    <div class="bubble">
        <ul>
            <li><strong>4- HISTOPHYSIOLOGIE :</strong></li>
            <ul>
                <li>Les voies aériennes inférieures assurent :</li>
                <ul>
                    <li>Le transport de l’air au cours de la respiration, pour cela les plus grosses de ces voies sont maintenues ouvertes par un squelette cartilagineux.</li>
                    <li>Modification de l’air inhalé : épuration, réchauffage, humidification.</li>
                    <li>Défense immunitaire et microbienne par la mise en jeu de trois mécanismes :</li>
                    <ul>
                        <li>1- La capture et le rejet des particules piégées par le film mucociliaire recouvrant l’épithélium et fonctionnant comme un tapis roulant (à la vitesse de l’ordre de 1 cm/minute), en direction du pharynx. À ce niveau le mucus chargé de poussières et de débris variés, est basculé dans les voies digestives. Il est avalé et sera digéré.</li>
                        <li>2- La production de lysozyme (enzyme bactéricide) par les cellules séreuses des glandes mixtes de la sous-muqueuse.</li>
                        <li>3- La sécrétion d’anticorps. Les lymphocytes B et les plasmocytes du chorion produisent en particulier des IgA (immunoglobulines A), en quantité variable selon la qualité de l’air inspiré.</li>
                    </ul>
                    <li>Le muscle trachéal intervient dans la maintenance du calibre et règle le débit aérien.</li>
                    <li>Le dispositif élastique joue un rôle dans le mécanisme respiratoire.</li>
                </ul>
            </ul>
        </ul>
    </div>
</div>
<div class="bubble">
    <button class="interact-button" id="conclusion-respiratory-system" onclick="markBubbleAsCompleted(this)">تفاعل</button>

    <!-- بالعربية -->
    <ul>
        <li><strong>5- الخلاصة:</strong></li>
        <ul>
            <li>الجهاز التنفسي يؤمن تبادل الغازات بين الدم والهواء المحيط.</li>
            <li>يتم التبادل على مستوى الرئة، التي تعتبر ملحقًا حقيقيًا للجهاز القلبي الوعائي.</li>
            <li>الجزء الناقل من الجهاز التنفسي يشمل: التجويف الأنفي، البلعوم، الحنجرة، القصبة الهوائية ونظام الشعب الهوائية ذات القطر المتناقص الذي ينتهي بالشعيبات النهائية.</li>
            <li>تستمر الشعيبات النهائية بالشعيبات التنفسية التي تحمل بعض الحويصلات وتنتهي بالقنوات الحويصلية.</li>
        </ul>
    </ul>

    <br>

    <!-- بالإنجليزية -->
    <div class="bubble" dir="ltr">
        <ul>
            <li><strong>5- CONCLUSION:</strong></li>
            <ul>
                <li>The respiratory system ensures gas exchange between the blood and ambient air.</li>
                <li>The exchanges take place at the lung, a true annex of the cardiovascular system.</li>
                <li>The conducting portion of the respiratory system includes: the nasal cavity, pharynx, larynx, trachea, and the bronchial tree of decreasing caliber that ends in the terminal bronchioles.</li>
                <li>The terminal bronchioles continue as respiratory bronchioles which bear some alveoli and end in the alveolar ducts.</li>
            </ul>
        </ul>
    </div>

    <br>

    <!-- بالفرنسية -->
    <div class="bubble">
        <ul>
            <li><strong>5- CONCLUSION :</strong></li>
            <ul>
                <li>L'appareil respiratoire assure les échanges gazeux entre le sang et l'air ambiant.</li>
                <li>Les échanges sont réalisés au niveau du poumon, véritable annexe du système cardiovasculaire.</li>
                <li>La portion conductrice de l’appareil respiratoire comprend : la cavité nasale, pharynx, le larynx, la trachée et le système de bronches de calibre décroissant qui aboutit aux bronchioles terminales.</li>
                <li>Les bronchioles terminales se poursuivent par les bronchioles respiratoires qui portent quelques alvéoles et qui se terminent dans les canaux alvéolaires.</li>
            </ul>
        </ul>
    </div>
</div>








<div style="display: flex; gap: 10px;"><figure class="bubble">
                    <img src="2MED U1 HISTOLOGY/A27.png" alt="NNN" class="outside-image"></figure></div>

<div style="display: flex; gap: 10px;"><figure class="bubble">
                    <img src="2MED U1 HISTOLOGY/A28.png" alt="NNN" class="outside-image"></figure></div>

<div style="display: flex; gap: 10px;"><figure class="bubble">
                    <img src="2MED U1 HISTOLOGY/A29.png" alt="NNN" class="outside-image"></figure></div>

<div style="display: flex; gap: 10px;"><figure class="bubble">
                    <img src="2MED U1 HISTOLOGY/A30.png" alt="NNN" class="outside-image"></figure></div>

<div style="display: flex; gap: 10px;"><figure class="bubble">
                    <img src="2MED U1 HISTOLOGY/A31.png" alt="NNN" class="outside-image"></figure></div>

<div style="display: flex; gap: 10px;"><figure class="bubble">
                    <img src="2MED U1 HISTOLOGY/A32.png" alt="NNN" class="outside-image"></figure></div>


<div class="bubble">
                        <!-- زر إضافات باللون الأحمر ومتمركز -->
                        <div style="text-align: center; margin-bottom: 20px;">
                          <button style="background-color: #d32f2f; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-size: 16px; cursor: pointer;">
                            إضافات
                          </button>
                        </div>
                    </div>




    <div id="end-lesson-modal">
        <h3>أحسنت يا طبيبنا إن شاء الله!</h3>
        <p id="lesson-summary">الوقت المستغرق: 00 دقيقة و 00 ثانية. عدد الفقاعات التي تم التفاعل معها: 0 من أصل 0.</p>
        <button class="reload-button" onclick="reloadPage()">إعادة الحفظ</button>
        <button onclick="goToTestsPage()">الانتقال إلى صفحة الاختبارات</button>
    </div>

    <div class="modal" id="question-modal">
        <h3 id="modal-question">هل حفظت هذه الفقاعة؟</h3>
        <button onclick="closeModal(true)">نعم</button>
        <button onclick="closeModal(false)">لا</button>
    </div>

    <script>
    let totalBubbles = 7; 
    let completedBubbles = 0; 
    let startTime = Date.now();
    let bubbleButton = null;
    
    function showQuestion() {
        document.getElementById('question-modal').style.display = 'block';
    }
    
    function closeModal(answer) {
        document.getElementById('question-modal').style.display = 'none';
    
        if (answer) {
            completedBubbles++;
            updateProgress();
            bubbleButton.style.backgroundColor = '#4CAF50'; 
            bubbleButton.innerText = 'تم التفاعل'; 
            bubbleButton.disabled = true; 
    
            if (completedBubbles === totalBubbles) {
                enableFinishButton();
            }
        }
    }
    
    function updateProgress() {
        let progress = (completedBubbles / totalBubbles) * 100; 
        document.getElementById('progress-bar').style.width = `${progress}%`;
        document.getElementById('progress-percentage').innerText = `${Math.round(progress)}%`;
    
        const finishButton = document.querySelector('.finish-button');
        if (progress === 100) {
            finishButton.disabled = false; 
            finishButton.style.backgroundColor = '#00aaff'; 
            finishButton.style.cursor = 'pointer'; 
        } else {
            finishButton.disabled = true;
            finishButton.style.backgroundColor = '#ccc'; 
            finishButton.style.cursor = 'not-allowed'; 
        }
    }
    
    function markBubbleAsCompleted(button) {
        bubbleButton = button; 
        showQuestion(); 
    }
    
    function finishLesson() {
        let elapsedTime = Date.now() - startTime;
        let minutes = Math.floor(elapsedTime / 60000);
        let seconds = Math.floor((elapsedTime % 60000) / 1000);
        let summary = `الوقت المستغرق: ${minutes} دقيقة و ${seconds} ثانية. عدد الفقاعات التي تم التفاعل معها: ${completedBubbles} من أصل ${totalBubbles}.`;
        document.getElementById('lesson-summary').innerText = summary;
        document.getElementById('end-lesson-modal').style.display = 'block';
    }
    
    function reloadPage() {
        location.reload();
    }
    
    function goToTestsPage() {
        window.location.href = 'MED02.html';
    }
    
    function initializeFinishButton() {
        const finishButton = document.querySelector('.finish-button');
        finishButton.disabled = true; 
        finishButton.style.backgroundColor = '#ccc'; 
        finishButton.style.cursor = 'not-allowed'; 
    }
    
    window.onload = initializeFinishButton;
    
    // وظيفة للانتقال إلى أول فقاعة غير مكتملة
    function goToUncompletedBubble() {
        let bubbles = document.querySelectorAll('.interact-button');
        for (let bubble of bubbles) {
            if (!bubble.disabled) { // تعني أن الفقاعة لم يتم التفاعل معها
                bubble.scrollIntoView({ behavior: 'smooth', block: 'center' });
                bubble.style.border = "3px solid red"; // تمييزها باللون الأحمر
                break;
            }
        }
    }
    </script>
    
</body>
</html>




































































<br><br><br><br><br><br><br>




<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📚 بطاقات فلاش تفاعلية</title>
    <style>
        body {
            font-family: 'Amiri', serif;
            background-color: #121212;
            color: #fff;
            text-align: center;
            padding: 20px;
            margin: 0;
            direction: rtl;
        }

        .flashcard {
            width: 100%;
            height: 300px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .flipped {
            transform: rotateY(180deg);
        }

        .flashcard-side {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2);
        }

        .front {
            background-color: #1e1e1e;
        }

        .back {
            background-color: #2c2c2c;
            transform: rotateY(180deg);
        }

        .flashcard-image {
            width: 40%;
            height: 100%;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .flashcard-image img {
            max-width: 100%;
            max-height: 100%;
            transition: transform 0.3s ease-in-out;
            cursor: pointer;
        }

        .flashcard-image img.expanded {
            transform: scale(1.5);
        }

        .flashcard-content {
            width: 65%;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
            text-align: right;
            direction: rtl;
            overflow-y: auto;
            max-height: 150px;
            white-space: normal;
            word-wrap: break-word;
            position: relative;
        }
        .hint-container {
    position: fixed; /* استخدم fixed لجعل التلميح ثابتًا في المكان */
    top: -190px; /* 20px من أعلى الصفحة */
    left: 50%;
    transform: translateX(-50%); /* لتوسيط التلميح بشكل أفقي */
    width: 80%; /* عرض التلميح */
    background-color: rgba(0, 0, 0, 0.7);
    padding: 10px;
    border-radius: 10px;
    font-size: 16px;
    color: #f1c40f;
    box-shadow: 0 4px 8px rgba(255, 255, 255, 0.2);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease-out;
}

        /* عند إظهار التلميح */
        .hint-container.show {
            opacity: 1;
            pointer-events: auto;
        }

        .buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
            gap: 10px;
        }

        .navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            transition: background 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #0056b3;
            transform: scale(1.05);
        }

        .arrow {
            font-size: 30px;
            cursor: pointer;
            transition: color 0.3s, transform 0.2s;
        }

        .arrow:hover {
            color: #00aaff;
            transform: scale(1.2);
        }

        @media (max-width: 480px) {
            .flashcard {
                height: 230px;
            }

            .flashcard-image {
                width: 40%;
                max-height: 150px;
            }

            .flashcard-content {
                font-size: 14px;
                padding: 10px;
                max-height: 120px;
            }

            button {
                font-size: 14px;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
       

            <div class="lesson-container" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 30vh; text-align: center;">
      
                <h2  id="flashcard-section">📚 بطاقات فلاش تفاعلية</h2>
         
            </div>
            

   
    <div class="flashcard-container" onclick="flipCard(event)">
        <div class="flashcard" id="flashcard">
            <div class="flashcard-side front">
                <div class="flashcard-image">
                    <img id="cardImageFront" src="" alt="صورة البطاقة" onclick="toggleImageSize(this)">
                </div>
                <div class="flashcard-content">
                    <h3 id="question"></h3>
                    <!-- حاوية التلميح -->
                    <div id="hintContainer" class="hint-container">
                        <p id="hint" class="hint"></p>
                    </div>
                </div>
            </div>
            <div class="flashcard-side back">
                <div class="flashcard-image">
                    <img id="cardImageBack" src="" alt="صورة البطاقة" onclick="toggleImageSize(this)">
                </div>
                <div class="flashcard-content">
                    <h3>الإجابة:</h3>
                    <p id="answer"></p>
                </div>
            </div>
        </div>
    </div>

    <br><br>
    <div class="buttons">
        <button onclick="showHint()">🔍 تلميح</button>
        <button onclick="shuffleCards()">🔀 خلط البطاقات</button>
    </div>

    <br>
    <div class="navigation">
        <span class="arrow" onclick="nextCard()">➡️</span>
        <span id="cardNumber">1 / 3</span>
        <span class="arrow" onclick="prevCard()">⬅️</span>
    </div>

    <script>
        const flashcards = [
            {
                question : "خمن البيانات والعنوان:<br>🔹 باللغة العربية (AR): خمن البيانات والعنوان<br>🔹 باللغة الإنجليزية (EN): Guess the data and the title<br>🔹 باللغة الفرنسية (FR): Devinez les données et le titre",
                hint : "🔍 شريحة محورية من تصوير مقطعي محوسب / TDM للصدر عند مستوى Th5 (AR)<br>🔍 In English (EN): Axial slice from a CT scan / TDM of the chest at the Th5 level<br>🔍 En français (FR): Coupe axiale d'un scanner TDM du thorax au niveau Th5",
                answer: `
                    <ul style="padding-right: 20px; text-align: right; direction: rtl; list-style: none; line-height: 1.8; font-size: 18px;">
                        <li><b>  العنوان:</b><br>
                            🔹 <b>شريحة محورية من تصوير مقطعي محوسب / TDM للصدر عند مستوى Th5.  (AR):</b><br>
                            🔹 <b>Axial slice of a CT scan / TDM of the thorax at the Th5 level.  (EN):</b><br>
                            🔹 <b> Coupe axiale d'un scanner / TDM thoracique au niveau Th5 (FR):</b>
               
                        </li><br>
                        <span style="font-size: 20px; font-weight: bold;">🔍 شريحة محورية من تصوير مقطعي محوسب / TDM للصدر عند مستوى Th5:</span><br>
                        <ol style="padding-right: 20px; text-align: right;">
                            <li>1️⃣ : الرئة اليمنى (Right Lung) - <i>Poumon droit</i></li><br>
                            <li>2️⃣ : الرئة اليسرى (Left Lung) - <i>Poumon gauche</i></li><br>
                            <li>3️⃣ : الجذع الرئوي (Pulmonary Trunk) - <i>Tronc pulmonaire</i></li><br>
                            <li>4️⃣ : الشريان الرئوي الأيمن (Right Pulmonary Artery) - <i>Artère pulmonaire droite</i></li><br>
                            <li>5️⃣ : الشريان الرئوي الأيسر (Left Pulmonary Artery) - <i>Artère pulmonaire gauche</i></li><br>
                            <li>6️⃣ : الوريد الأجوف العلوي (Superior Vena Cava) - <i>Veine cave supérieure</i></li><br>
                            <li>7️⃣ : الأبهر الصدري الصاعد (Ascending Thoracic Aorta) - <i>Aorte thoracique ascendante</i></li><br>
                            <li>8️⃣ : الأبهر الصدري النازل (Descending Thoracic Aorta) - <i>Aorte thoracique descendante</i></li><br>
                            <li>9️⃣ : الوريد الرئوي الأيسر (Left Pulmonary Vein) - <i>Veine pulmonaire gauche</i></li><br>
                            <li>🔟 : الكتف الأيسر (Left Scapula) - <i>Scapula gauche</i></li><br>
                        </ol>
                    </ul>
                `,
                imageFront: "2MEDU1ANATOMIE/A101.png", // صورة الجهة الأمامية
                imageBack: "2MEDU1ANATOMIE/A101.png", // صورة الجهة الخلفية
                isHtml: true
            },
    {
        question: `🔹 <b>  خمن الشرايين الوربية( intercostal) التي تغذي الغدة الثديية.   </b> 🔹<br>
        🔹 <b>باللغة العربية (AR):</b> خمن الشرايين الوربية( intercostal) التي تغذي الغدة الثديية.  br>
        🔹 <b>In English (EN):</b> Guess the intercostal arteries that supply the mammary gland<br>
        🔹 <b>En français (FR):</b> Devinez les artères intercostales qui irriguent la glande mammaire`,
        
        hint: `🔍 <b>تلميح / Hint / Indice</b><br>
        🔴 <b>باللغة العربية (AR):</b> عددها ثلاثة بالترتيب.<br>
        🔵 <b>In English (EN):</b> They are three in order.<br>
        ⚪ <b>En français (FR):</b> Ils sont au nombre de trois dans l'ordre.`,
        
        answer: `
            <div style="text-align: center;">
                <ul style="padding-right: 20px; text-align: right; direction: rtl; list-style: none; line-height: 1.8; font-size: 18px;">
                    <li>2️⃣ <b>الشريان الوربي الثاني</b> (Intercostal Artery 2) - <i>Deuxième artère intercostale</i></li><br>
                    <li>3️⃣ <b>الشريان الوربي الثالث</b> (Intercostal Artery 3) - <i>Troisième artère intercostale</i></li><br>
                    <li>4️⃣ <b>الشريان الوربي الرابع</b> (Intercostal Artery 4) - <i>Quatrième artère intercostale</i></li><br>
                </ul>
            </div>
        `,
        imageFront: "/A101.png", // صورة الجهة الأمامية
                imageBack: "2MED U4 ANATOMIE/A47.jpg", // صورة الجهة الخلفية
                isHtml: true
    }



    ];

let currentIndex = 0;
let flipped = false;

function updateCard() {
    const card = flashcards[currentIndex];
    document.getElementById("question").innerHTML = card.question;
    document.getElementById("answer").innerHTML = card.answer;
    document.getElementById("cardImageFront").src = card.imageFront;
    document.getElementById("cardImageBack").src = card.imageBack;
    document.getElementById("cardNumber").textContent = `${currentIndex + 1} / ${flashcards.length}`;
}

function flipCard(event) {
    event.stopPropagation();
    flipped = !flipped;
    document.getElementById("flashcard").classList.toggle("flipped", flipped);
}

function nextCard() {
    currentIndex = (currentIndex + 1) % flashcards.length;
    flipped = false;
    document.getElementById("flashcard").classList.remove("flipped");
    updateCard();
}

function prevCard() {
    currentIndex = (currentIndex - 1 + flashcards.length) % flashcards.length;
    flipped = false;
    document.getElementById("flashcard").classList.remove("flipped");
    updateCard();
}

updateCard();
</script>










<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>نظام الأزرار العائمة الذكي - نسخة الهاتف</title>

    <style>
        .floating-system {
            position: fixed;
            z-index: 9999;
            bottom: 25px;
            left: 25px; /* تغيير من right إلى left */
            display: flex;
            flex-direction: row;
            gap: 15px;
            align-items: center;
            touch-action: none;
        }
        
        /* الزر الرئيسي */
        .main-floating-btn {
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(108, 92, 231, 0.4);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-tap-highlight-color: transparent;
            position: relative;
            order: 1;
        }
    
        /* الأزرار الثانوية */
        .secondary-btn {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, #00b894, #55efc4);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 22px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: translateX(30px);
            visibility: hidden;
            -webkit-tap-highlight-color: transparent;
            position: relative;
        }
        
        .secondary-btn.search-btn {
            background: linear-gradient(135deg, #0984e3, #74b9ff);
        }
        
        .secondary-btn.speech-btn {
            background: linear-gradient(135deg, #e17055, #fab1a0);
        }
        
        .secondary-btn.contact-btn {
            background: linear-gradient(135deg, #fd79a8, #ff9ff3);
        }
        
        .secondary-btn.flashcard-btn {
            background: linear-gradient(135deg, #fdcb6e, #ffeaa7);
            color: #333;
        }
    
      .secondary-btn.eldars-btn {
          background: linear-gradient(135deg, #9b59b6, #8e44ad);
      }
  
        /* حالة الأزرار عند الفتح */
        .floating-system.expanded {
            flex-direction: row-reverse;
        }
        
        .floating-system.expanded .secondary-btn {
            opacity: 1;
            transform: translateX(0);
            visibility: visible;
        }
        
        .floating-system.expanded .search-btn {
            transition-delay: 0.1s;
        }
        
        .floating-system.expanded .speech-btn {
            transition-delay: 0.2s;
        }
        
        .floating-system.expanded .contact-btn {
            transition-delay: 0.3s;
        }
        
        .floating-system.expanded .flashcard-btn {
            transition-delay: 0.4s;
        }
            
      .floating-system.expanded .eldars-btn {
          transition-delay: 0.5s;
      }
    
        /* تأثير النبض */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(108, 92, 231, 0.7); }
            70% { box-shadow: 0 0 0 12px rgba(108, 92, 231, 0); }
            100% { box-shadow: 0 0 0 0 rgba(108, 92, 231, 0); }
        }
    
        .pulse-effect {
            animation: pulse 1.5s infinite;
        }
    
        /* تحسينات للهواتف الصغيرة */
        @media (max-width: 480px) {
            .floating-system {
                bottom: 20px;
                left: 20px; /* تغيير من right إلى left */
                gap: 12px;
            }
            
            .main-floating-btn {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .secondary-btn {
                width: 52px;
                height: 52px;
                font-size: 22px;
            }
            
            /* زيادة مساحة الضغط */
            .main-floating-btn::after,
            .secondary-btn::after {
                content: '';
                position: absolute;
                top: -15px;
                left: -15px;
                right: -15px;
                bottom: -15px;
            }
        }
    
        /* أنماط القلم الناطق */
        .notification {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background: #008cff;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            font-size: 18px;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.5s, transform 0.5s;
            display: none;
            z-index: 9998;
            max-width: 80%;
        }
    
        .show-notification {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        
        /* أنماط البحث */
        .search-bubble {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 350px;
            max-height: 60vh;
            background-color: rgb(82, 82, 82);
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            display: none;
            flex-direction: column;
            z-index: 10000;
            overflow: hidden;
            animation: bubbleAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
    
        .search-bubble.show {
            display: flex;
        }
    
        @keyframes bubbleAppear {
            from {
                transform: translateY(20px) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
    
        .bubble-header {
            padding: 15px;
            background-color: #ffffff;
            border-bottom: 1px solid #424242;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    
        .bubble-title {
            font-weight: bold;
            color: #333;
        }
    
        .close-bubble {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #777;
            padding: 0;
            margin: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    
        .bubble-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
        }
    
        .search-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: none;
            border-bottom: 2px solid #989898;
            outline: none;
        }
    
        .search-input:focus {
            border-bottom-color: #2185d0;
        }
    
        .search-results {
            max-height: calc(60vh - 120px);
            overflow-y: auto;
        }
    
        .result-item {
            padding: 15px;
            border-bottom: 1px solid #747272;
            cursor: pointer;
            transition: background 0.2s;
        }
    
        .result-item:hover {
            background-color: #393737;
        }
    
        .result-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2185d0;
        }
    
        .highlight {
            background-color: #009c05;
            padding: 0 2px;
            border-radius: 3px;
        }
        .no-results {
            padding: 20px;
            text-align: center;
            color: #999;
        }
    
        @media (max-width: 768px) {
            .search-bubble {
                right: 15px;
                width: calc(100% - 30px);
                max-height: 50vh;
                bottom: 100px;
            }
            
            .search-results {
                max-height: calc(50vh - 120px);
            }
        }
        
        /* أنماط نافذة التواصل */
        .popupCONTACT {
            position: fixed;
            top: 50%;
            right: 50%;
            transform: translate(50%, -50%);
            width: 90%;
            max-width: 300px;
            background: #ffffff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            z-index: 1001;
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
    
        .close-btnCONTACT {
            position: absolute;
            top: 10px;
            left: 10px;
            background: transparent;
            border: none;
            font-size: 22px;
            color: #ff4d4d;
            cursor: pointer;
            font-weight: bold;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    
        .contact-containerCONTACT {
            text-align: center;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            margin: auto;
        }
    
        .contact-titleCONTACT {
            font-size: 22px;
            margin-bottom: 10px;
        }
    
        .contact-textCONTACT {
            font-size: 16px;
            color: #333;
            margin-bottom: 15px;
        }
    
        .social-linksCONTACT {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
    
        .btnCONTACT {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
            color: white;
            transition: 0.3s;
        }
    
        .telegram-btnCONTACT { background: #0088cc; }
        .facebook-btnCONTACT { background: #1877f2; }
        .instagram-btnCONTACT { background: #e1306c; }
    
  
  
  
  
   /* أنماط نافذة Eldars */
   .eldars-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  max-width: 600px;
  height: 80vh;
  background: white;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  z-index: 10010;
  display: none;
  overflow: hidden;
  animation: fadeIn 0.3s ease-in-out;
  }
  
  .eldars-popup.show {
  display: block;
  }
  
  .eldars-header {
  padding: 15px;
  background: #9b59b6;
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  }
  
  .eldars-title {
  font-weight: bold;
  font-size: 18px;
  }
  
  .close-eldars {
  background: none;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
  }
  
  .eldars-content {
  width: 100%;
  height: calc(100% - 50px);
  overflow: hidden;
  position: relative;
  }
  
  .eldars-iframe {
  width: 100%; /* عرض العنصر 100% ليشغل المساحة المتاحة */
  height: 100%; /* ارتفاع العنصر 100% ليشغل المساحة المتاحة */
  position: absolute;
  top: 0;
  left: 0;
  transform: none; /* إزالة التكبير الزائد */
  border: none;
  overflow: auto; /* تمكين التمرير داخل الـiframe إذا لزم الأمر */
  }
  
  /* تحسين العرض على الشاشات الصغيرة (الهواتف) */
  @media (max-width: 768px) {
  .eldars-popup {
      max-width: 90%;
      height: 85vh; /* تقليل ارتفاع النافذة لتكون أكثر مرونة */
  }
  .eldars-iframe {
      width: 100%;
      height: 100%;
  }
  }
  
  /* تحسين العرض على الشاشات الصغيرة جدًا (الهاتف المحمول) */
  @media (max-width: 480px) {
  .eldars-popup {
      max-width: 95%;
      height: 90vh;
  }
  .eldars-iframe {
      width: 100%;
      height: 100%;
  }
  }
  
  /* تحسين العرض على الشاشات الكبيرة */
  @media (min-width: 1024px) {
  .eldars-popup {
      max-width: 800px;
      height: 80vh;
  }
  .eldars-iframe {
      width: 100%;
      height: 100%;
  }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(50%, -45%); }
            to { opacity: 1; transform: translate(50%, -50%); }
        }
    
        /* تحسينات للهواتف الصغيرة */
        @media (max-width: 480px) {
            .floating-system {
                bottom: 15px;
                left: 15px; /* تغيير من right إلى left */
                gap: 8px;
            }
            
            .main-floating-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .secondary-btn {
                width: 42px;
                height: 42px;
                font-size: 18px;
            }
            
            /* تحسينات للبحث على الشاشات الصغيرة */
            .search-bubble {
                bottom: 90px;
                max-height: 60vh;
            }
            
            /* تحسينات لنافذة التواصل */
            .popupCONTACT {
                max-width: 90%;
                padding: 15px;
            }
            
            .contact-titleCONTACT {
                font-size: 18px;
            }
            
            .contact-textCONTACT {
                font-size: 14px;
            }
            
            .btnCONTACT {
                padding: 10px;
                font-size: 14px;
            }
            
            /* زيادة مساحة الضغط للأزرار */
            .main-floating-btn::after,
            .secondary-btn::after {
                content: '';
                position: absolute;
                top: -10px;
                left: -10px;
                right: -10px;
                bottom: -10px;
            }
            
            /* تحسينات للإشعارات */
            .notification {
                bottom: 80px;
                right: 10px;
                font-size: 14px;
                padding: 10px 15px;
            }
        }
    
        /* تحسينات إضافية للشاشات الصغيرة جدًا */
        @media (max-width: 360px) {
            .floating-system {
                bottom: 10px;
                left: 10px; /* تغيير من right إلى left */
                gap: 6px;
            }
            
            .main-floating-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            
            .secondary-btn {
                width: 38px;
                height: 38px;
                font-size: 16px;
            }
        }
        </style>
    </style>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- نظام الأزرار العائمة -->
    <div class="floating-system" id="floatingSystem">
        <!-- الأزرار الثانوية -->
        <button class="secondary-btn flashcard-btn" id="flashcardBtn" title="البطاقات التعليمية">
            <i class="far fa-copy"></i>
        </button>
        
        <button class="secondary-btn contact-btn" id="contactBtn" title="الدعم الفني">
            <i class="fas fa-headset"></i>
        </button>


    



        <button class="secondary-btn speech-btn" id="speechBtn" title="القلم الناطق">
            <i class="fas fa-microphone-alt"></i>
        </button>
        
        <button class="secondary-btn search-btn" id="searchBtn" title="البحث الذكي">
            <i class="fas fa-search"></i>
        </button>
        
        <!-- الزر الرئيسي -->
        <button class="main-floating-btn" id="mainFloatingBtn">
            <i class="fas fa-plus"></i>
        </button>
    </div>


    <!-- إشعارات القلم الناطق -->
    <div id="notification" class="notification"></div>


    <div>
        <label>🔹 اختر جنس الصوت:</label>
        <select id="voiceGender">
            <option value="male">ذكر</option>
            <option value="female">أنثى</option>
        </select>
    </div>

    <div class="speed-control">
        <label for="speedRange">🔊 سرعة الصوت:</label>
        <input type="range" id="speedRange" min="0.5" max="2" step="0.1" value="1">
    </div>
    <!-- فقاعة البحث -->
    <div class="search-bubble" id="searchBubble">
        <div class="bubble-header">
            <div class="bubble-title">البحث في الموقع</div>
            <button class="close-bubble" id="closeBubble" aria-label="إغلاق البحث">×</button>
        </div>
        <div class="bubble-content">
            <input type="text" class="search-input" id="searchInput" 
                   placeholder="اكتب كلمة البحث..." autocomplete="off"
                   aria-label="مربع البحث">
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <!-- نافذة التواصل -->
    <div class="popupCONTACT" id="popupCONTACT">
        <button class="close-btnCONTACT" id="closeContactBtn">✖</button>
        <div class="contact-containerCONTACT">
            <h3 class="contact-titleCONTACT" style="text-align: center; color: black; font-size: 24px; font-weight: bold;">📩 تواصل معنا</h3>

            <p class="contact-textCONTACT">في حالة توفر مشكلة أو لديك اقتراح سواء حول اختبار أو غيره تواصل معنا</p>
            
            <div class="social-linksCONTACT">
                <a href="http://t.me/ADATEALM_bot" target="_blank" class="btnCONTACT telegram-btnCONTACT">
                    <i class="fab fa-telegram"></i> بوت تيليغرام
                </a>
                
                <a href="https://t.me/adatealm" target="_blank" class="btnCONTACT telegram-btnCONTACT">
                    <i class="fab fa-telegram"></i> تيليغرام
                </a>
                
                <a href="https://www.facebook.com/share/1BFTe2mWNL/" target="_blank" class="btnCONTACT facebook-btnCONTACT">
                    <i class="fab fa-facebook"></i> فيسبوك
                </a>
                
                <a href="https://www.instagram.com/adat_ealm?igsh=djg1eXlwMTJvM2xw" target="_blank" class="btnCONTACT instagram-btnCONTACT">
                    <i class="fab fa-instagram"></i> إنستغرام
                </a>
            </div>
        </div>
    </div>


    <script>
        // عناصر الواجهة
        const floatingSystem = document.getElementById('floatingSystem');
        const mainBtn = document.getElementById('mainFloatingBtn');
        const searchBtn = document.getElementById('searchBtn');
        const speechBtn = document.getElementById('speechBtn');
        const contactBtn = document.getElementById('contactBtn');
        const flashcardBtn = document.getElementById('flashcardBtn');
        const searchBubble = document.getElementById('searchBubble');
        const closeBubble = document.getElementById('closeBubble');
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const popupCONTACT = document.getElementById('popupCONTACT');
        const closeContactBtn = document.getElementById('closeContactBtn');
        const notification = document.getElementById('notification');
        
        // حالات النظام
        let isExpanded = false;
        let isDragging = false;
        let startX, startY, initialX, initialY;
        let isSpeechEnabled = false;
        let speechSynthesisInstance = window.speechSynthesis || null;
        let currentUtterance = null;
        let voices = [];
        let currentResults = [];
        let selectedIndex = -1;
        let searchTimeout;
        
        // تهيئة النظام
        function initSystem() {
            // إضافة تأثير النبض بعد 3 ثواني
            setTimeout(() => {
                mainBtn.classList.add('pulse-effect');
                setTimeout(() => {
                    mainBtn.classList.remove('pulse-effect');
                }, 3000);
            }, 3000);
            
            // تهيئة Web Speech API
            if (speechSynthesisInstance) {
                speechSynthesisInstance.onvoiceschanged = function() {
                    voices = speechSynthesisInstance.getVoices();
                };
                
                // تحميل الأصوات مباشرة إذا كانت متاحة
                voices = speechSynthesisInstance.getVoices();
            } else {
                speechBtn.style.display = 'none';
            }
            
            // جعل النظام قابلاً للسحب
            setupDragAndDrop();
            
            // إضافة أحداث اللمس
            setupTouchEvents();
        }
        
        // إعداد أحداث اللمس
        function setupTouchEvents() {
            // منع السلوك الافتراضي لللمس
            const buttons = [mainBtn, searchBtn, speechBtn, contactBtn, flashcardBtn];
            
            buttons.forEach(btn => {
                btn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // محاكاة تأثير الضغط
                    this.style.transform = 'scale(0.95)';
                    
                    // تحديد الزر الذي تم الضغط عليه
                    if (btn === mainBtn) {
                        toggleSystem();
                    } else if (btn === searchBtn) {
                        toggleSearch();
                    } else if (btn === speechBtn) {
                        toggleSpeech();
                    } else if (btn === contactBtn) {
                        togglePopupCONTACT();
                    } else if (btn === flashcardBtn) {
                        goToFlashCard();
                    }
                }, { passive: false });
                
                btn.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
        }
        
        // تبديل حالة النظام (مفتوح/مغلق)
        function toggleSystem() {
            isExpanded = !isExpanded;
            floatingSystem.classList.toggle('expanded', isExpanded);
            
            if (isExpanded) {
                mainBtn.innerHTML = '<i class="fas fa-times"></i>';
                mainBtn.style.transform = 'rotate(135deg)';
                isDragging = false;
            } else {
                mainBtn.innerHTML = '<i class="fas fa-plus"></i>';
                mainBtn.style.transform = 'rotate(0)';
                closeAllPopups();
            }
        }
        
        // إغلاق جميع النوافذ المنبثقة
        function closeAllPopups() {
            searchBubble.classList.remove('show');
            popupCONTACT.style.display = 'none';
        }
        
        // تهيئة السحب والإفلات
        function setupDragAndDrop() {
            // للأجهزة التي تعمل باللمس
            mainBtn.addEventListener('touchstart', handleDragStart, { passive: false });
            document.addEventListener('touchmove', handleDragMove, { passive: false });
            document.addEventListener('touchend', endDrag);
            
            // للأجهزة التي تعمل بالماوس
            mainBtn.addEventListener('mousedown', handleDragStart);
            document.addEventListener('mousemove', handleDragMove);
            document.addEventListener('mouseup', endDrag);
        }
        
        function handleDragStart(e) {
            if (isExpanded) return;
            
            isDragging = true;
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            
            startX = clientX;
            startY = clientY;
            initialX = floatingSystem.offsetLeft;
            initialY = floatingSystem.offsetTop;
            
            if (e.cancelable) e.preventDefault();
        }
        
        function handleDragMove(e) {
            if (!isDragging || isExpanded) return;
            
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            const deltaX = clientX - startX;
            const deltaY = clientY - startY;
            
            let newX = initialX + deltaX;
            let newY = initialY + deltaY;
            
            // تحديد الحدود لمنع الخروج من الشاشة
            newX = Math.max(0, Math.min(newX, window.innerWidth - floatingSystem.offsetWidth));
            newY = Math.max(0, Math.min(newY, window.innerHeight - floatingSystem.offsetHeight));
            
            floatingSystem.style.left = newX + 'px';
            floatingSystem.style.top = newY + 'px';
            floatingSystem.style.right = 'auto';
            floatingSystem.style.bottom = 'auto';
            
            if (e.cancelable) e.preventDefault();
        }
        




        function endDrag() {
    if (!isDragging) return;
    isDragging = false;
    
    // جعل النظام يلتصق بالجانب الأيسر دائماً
    floatingSystem.style.left = '20px';
    floatingSystem.style.right = 'auto';
    floatingSystem.style.bottom = '20px';
    floatingSystem.style.top = 'auto';
}
       
        // وظائف الأزرار
        function toggleSearch() {
            if (isExpanded) toggleSystem();
            searchBubble.classList.toggle('show');
            if (searchBubble.classList.contains('show')) {
                searchInput.focus();
            }
        }
        
        function toggleSpeech() {
            if (!speechSynthesisInstance) {
                showNotification("⚠️ هذه الميزة غير مدعومة في متصفحك");
                return;
            }
            
            if (isExpanded) toggleSystem();
            isSpeechEnabled = !isSpeechEnabled;
            showNotification(isSpeechEnabled ? "✅ تم تفعيل القلم الناطق!" : "⛔ تم إيقاف القلم الناطق!");
            
            if (isSpeechEnabled) {
                document.addEventListener('mouseup', handleTextSelection);
                document.addEventListener('touchend', handleTextSelection);
            } else {
                document.removeEventListener('mouseup', handleTextSelection);
                document.removeEventListener('touchend', handleTextSelection);
                stopSpeech();
            }
        }
        
        function handleTextSelection(e) {
            if (!isSpeechEnabled) return;
            
            // منع النقر العادي إذا كان القلم الناطق مفعلاً
            if (e.target.closest('.floating-system, .search-bubble, .popupCONTACT')) {
                return;
            }
            
            let selectedText = window.getSelection().toString().trim();
            if (selectedText.length > 0) {
                speakText(selectedText);
            }
        }
        
        function speakText(text) {
            stopSpeech();
            
            let utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = /[\u0600-\u06FF]/.test(text) ? "ar-SA" : "en-US";
            
            // اختيار الصوت المناسب
            if (voices.length > 0) {
                const arabicVoices = voices.filter(v => v.lang.includes('ar'));
                if (arabicVoices.length > 0) {
                    utterance.voice = arabicVoices[0];
                }
            }
            
            utterance.rate = 1;
            utterance.volume = 1.0;
            
            currentUtterance = utterance;
            speechSynthesisInstance.speak(utterance);
        }
        
        function stopSpeech() {
            if (speechSynthesisInstance && speechSynthesisInstance.speaking) {
                speechSynthesisInstance.cancel();
            }
            currentUtterance = null;
        }
        
        function togglePopupCONTACT() {
            if (isExpanded) toggleSystem();
            popupCONTACT.style.display = popupCONTACT.style.display === "block" ? "none" : "block";
        }
        
        function goToFlashCard() {
            if (isExpanded) toggleSystem();
            document.getElementById('flashcard-section').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        function showNotification(message) {
            notification.textContent = message;
            notification.classList.add("show-notification");
            
            setTimeout(() => {
                notification.classList.remove("show-notification");
            }, 2000);
        }
        
        // أحداث البحث
        function handleSearchInput(e) {
            const query = e.target.value.trim();
            clearTimeout(searchTimeout);
            
            if (query.length < 2) {
                clearResults();
                return;
            }
            
            searchTimeout = setTimeout(() => {
                performSearch(query);
            }, 300);
        }
        
        function performSearch(query) {
            clearResults();
            currentResults = [];
            selectedIndex = -1;
            
            const searchableElements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, li, [id]');
            
            searchableElements.forEach(element => {
                const text = element.textContent || element.innerText;
                const elementId = element.id || (element.parentNode.id || '');
                
                if (text.toLowerCase().includes(query.toLowerCase())) {
                    const previewText = text.length > 100 ? text.substring(0, 100) + '...' : text;
                    
                    currentResults.push({
                        element: element,
                        id: elementId,
                        title: element.tagName.startsWith('H') ? text : (elementId || 'قسم في الصفحة'),
                        preview: previewText,
                        fullText: text
                    });
                }
            });
            
            if (currentResults.length === 0) {
                showNoResults();
                return;
            }
            
            displayResults(currentResults, query);
        }
        
        function displayResults(results, query) {
            results.forEach((result, index) => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.innerHTML = `
                    <div class="result-title">${highlightText(result.title, query)}</div>
                    <div class="result-preview">${highlightText(result.preview, query)}</div>
                `;
                resultItem.addEventListener('click', () => navigateToResult(result));
                searchResults.appendChild(resultItem);
            });
        }
        
        function highlightText(text, query) {
            if (!query) return text;
            return text.replace(
                new RegExp(query, 'gi'), 
                match => `<span class="highlight">${match}</span>`
            );
        }
        
        function navigateToResult(result) {
            if (result.element) {
                result.element.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
                
                const originalBg = result.element.style.backgroundColor;
                result.element.style.backgroundColor = '#fff9c4';
                setTimeout(() => {
                    result.element.style.backgroundColor = originalBg;
                }, 2000);
            }
            
            searchBubble.classList.remove('show');
        }
        
        function showNoResults() {
            searchResults.innerHTML = '<div class="no-results">لا توجد نتائج مطابقة</div>';
        }
        
        function clearResults() {
            searchResults.innerHTML = '';
            currentResults = [];
            selectedIndex = -1;
        }
        
        // إضافة الأحداث
        mainBtn.addEventListener('click', toggleSystem);
        searchBtn.addEventListener('click', toggleSearch);
        speechBtn.addEventListener('click', toggleSpeech);
        contactBtn.addEventListener('click', togglePopupCONTACT);
        flashcardBtn.addEventListener('click', goToFlashCard);
        closeBubble.addEventListener('click', () => searchBubble.classList.remove('show'));
        closeContactBtn.addEventListener('click', togglePopupCONTACT);
        searchInput.addEventListener('input', handleSearchInput);
        
        // تهيئة النظام عند التحميل
        window.addEventListener('load', initSystem);
        
        // إعادة حساب المواقع عند تغيير حجم النافذة
        window.addEventListener('resize', endDrag);
    </script>
</body>
</html>





































<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تحويل اتجاه النص تلقائيًا مع الحفاظ على التنسيق</title>
    <style>
        body {
    
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .rtl {
            direction: rtl;
            text-align: right;
        }
        
        .ltr {
            direction: ltr;
            text-align: left;
        }
        
        /* تنسيقات إضافية للحفاظ على المظهر */
        .mixed-content {
            unicode-bidi: embed;
        }
    </style>
</head>
<body>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // عناصر أكثر تحديداً مع استثناء العناصر التي قد تحتوي على أطفال معقدة
            const elements = document.querySelectorAll('p, div:not(div div), span, li, h1, h2, h3, h4, h5, h6');
            
            elements.forEach(element => {
                // تجاهل العناصر التي تحتوي على أطفال معقدة
                if (element.children.length > 0 && !(element.children.length === 1 && element.children[0].tagName === 'SPAN')) {
                    return;
                }
                
                const text = element.textContent.trim();
                
                if (!text) return;
                
                // تحليل النص لتحديد إذا كان إنجليزي/عربي
                const hasArabic = /[\u0600-\u06FF]/.test(text);
                const hasEnglish = /[a-zA-Z]/.test(text);
                
                // إذا كان النص يحتوي على الإنجليزية فقط
                if (hasEnglish && !hasArabic) {
                    element.classList.add('ltr');
                    element.classList.remove('rtl');
                } 
                // إذا كان النص يحتوي على العربية فقط
                else if (hasArabic && !hasEnglish) {
                    element.classList.add('rtl');
                    element.classList.remove('ltr');
                }
                // إذا كان نصاً مختلطاً
                else if (hasArabic && hasEnglish) {
                    element.classList.add('mixed-content');
                    
                    // تحديد الاتجاه الأساسي بناءً على الحرف الأول
                    const firstChar = text.charAt(0);
                    if (/[a-zA-Z]/.test(firstChar)) {
                        element.style.direction = 'ltr';
                        element.style.textAlign = 'left';
                    } else {
                        element.style.direction = 'rtl';
                        element.style.textAlign = 'right';
                    }
                }
            });
        });
    </script>
</body>
</html>
























































<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>تنبيه طبي - INFATM</title>
    <style>
        /* تهيئة عامة */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
        }

        /* زر الخطر العائم - تصميم جديد */
        ._x1 {
            position: fixed;
            top: 120px; /* تغيير من bottom إلى top */
            right: 10px;  /* تعديل القيمة */
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #ff0000, #c00000);
            color: white;
            font-size: 21px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3), 
                        inset 0 2px 4px rgba(255, 255, 255, 0.3);
            transition: all 0.2s ease;
            z-index: 1000;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            animation: _a1 2s infinite;
        }

        @keyframes _a1 {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
        }

        ._x1:hover {
            transform: scale(1.1);
            background: linear-gradient(135deg, #ff3333, #d10000);
        }

        ._x1:active {
            transform: scale(0.95);
            animation: none;
        }

        /* طبقة التعتيم */
        ._x2 {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            display: none;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        /* نافذة المحتوى */
        ._x3 {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            display: flex;
            flex-direction: column;
            z-index: 10012;
            display: none;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            background: white;
        }

        ._x4 {
          background: linear-gradient(to right, #e74c3c, #c0392b);
          color: white;
          padding: 18px;
          text-align: center;
          position: relative;
          flex-shrink: 0;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      ._x4 h2 {
          font-size: 1.3rem;
          font-weight: 600;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      }

        ._x5 {
            flex-grow: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            background-color: #f5f5f5;
        }

        /* زر الإغلاق الجديد */
        ._x6 {
            position: absolute;
            top: 12px;
            left: 12px;
            background: white;
            color: #e74c3c;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.2s;
        }

        ._x6:hover {
            transform: rotate(90deg);
            background: #ffebee;
        }

        /* مؤشر التحميل */
        ._x7 {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 20px;
        }

        ._x8 {
            width: 45px;
            height: 45px;
            border: 5px solid rgba(231, 76, 60, 0.2);
            border-top: 5px solid #e74c3c;
            border-radius: 50%;
            animation: _a2 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes _a2 {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        ._x7 p {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        /* المحتوى المعروض */
        ._x9 {
            padding: 18px;
            line-height: 1.7;
            font-size: 1rem;
            color: #333;
        }

        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 480px) {
            ._x1 {
                width: 30px;
                height: 30px;
                font-size: 16px;
                bottom: 20px;
            }
            
            ._x4 {
                padding: 15px;
            }
            
            ._x4 h2 {
                font-size: 1.1rem;
            }
            
            ._x6 {
                width: 28px;
                height: 28px;
                font-size: 1rem;
            }
        }

        /* تحسينات لللمس على الهواتف */
        @media (hover: none) {
            ._x1:hover {
                transform: scale(1);
                background: linear-gradient(135deg, #ff0000, #c00000);
            }
            
            ._x6:hover {
                transform: rotate(0deg);
                background: white;
            }
        }
    </style>
</head>
<body>

<!-- زر الخطر العائم الجديد -->
<button class="_x1" onclick="_f1()">⚠️</button>

<!-- طبقة التعتيم -->
<div class="_x2" id="_d1"></div>

<!-- نافذة المحتوى -->
<div class="_x3" id="_d2">
    <div class="_x4">
        <button class="_x6" onclick="_f1()">×</button>
        <h2 >⚠️  محتوى زر التنبيه  الخطر   ⚠️   </h2>
    </div>
    <div class="_x5" id="_d3">
        <div class="_x7">
            <div class="_x8"></div>
            <p>جاري تحميل المحتوى ...</p>
        </div>
    </div>
</div>

<script>
    // متغيرات التطبيق
    let _v1 = false;
    const _u1 = "https://s22mcs.github.io/S22MCS02-/MEDECINE_EXAM_NOTE.html";
    
    // عناصر DOM
    const _d2 = document.getElementById('_d2');
    const _d1 = document.getElementById('_d1');
    const _d3 = document.getElementById('_d3');
    const _b1 = document.querySelector('._x1');
    
    // تبديل عرض/إخفاء النافذة
    function _f1() {
        if (_d2.style.display === 'flex') {
            _f2();
        } else {
            _f3();
        }
    }
    
    function _f3() {
        // إيقاف تأثير النبض عند الفتح
        _b1.style.animation = 'none';
        
        _d1.style.display = 'block';
        _d2.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        if (!_v1) {
            _f4();
        }
    }
    
    function _f2() {
        // إعادة تشغيل تأثير النبض عند الإغلاق
        _b1.style.animation = '_a1 2s infinite';
        
        _d1.style.display = 'none';
        _d2.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    // تحميل المحتوى
    async function _f4() {
        try {
            // استخدام iframe كحل أساسي
            _f5();
            _v1 = true;
        } catch (error) {
            _f6(error);
        }
    }
    
    // عرض المحتوى باستخدام iframe
    function _f5() {
        _d3.innerHTML = `
            <iframe src="${_u1}" 
                    style="width:100%; height:100%; border:none;"
                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                    loading="lazy">
            </iframe>
        `;
    }
    
    // عرض رسالة الخطأ
    function _f6(_e1) {
        _d3.innerHTML = `
            <div class="_x7">
                <div style="color: #e74c3c; margin-bottom: 15px; font-size: 1.2rem;">⚠️ خطأ في تحميل المحتوى</div>
                <p style="margin-bottom: 20px; color: #555;">${_e1.message}</p>
                <button onclick="_f7()" 
                        style="padding: 10px 20px; 
                               background: linear-gradient(to right, #e74c3c, #c0392b); 
                               color: white; 
                               border: none; 
                               border-radius: 30px;
                               font-size: 1rem;
                               box-shadow: 0 3px 10px rgba(231, 76, 60, 0.3);
                               transition: all 0.2s;">
                    إعادة المحاولة
                </button>
            </div>
        `;
    }
    
    // إعادة تحميل المحتوى
    function _f7() {
        _d3.innerHTML = `
            <div class="_x7">
                <div class="_x8"></div>
                <p>جاري تحميل المحتوى الطبي...</p>
            </div>
        `;
        _f4();
    }
    
    // إغلاق النافذة عند النقر خارجها
    _d1.addEventListener('click', _f2);
    
    // منع إغلاق النافذة عند النقر داخلها
    _d2.addEventListener('click', (e) => {
        e.stopPropagation();
    });
    
    // تحسين الأداء للهواتف
    if ('connection' in navigator) {
        if (navigator.connection.saveData || navigator.connection.effectiveType.includes('2g')) {
            // تحسينات لشبكات الجيل الثاني
            _b1.style.animation = 'none';
        }
    }
    
    // إضافة اهتزاز عند النقر (للهواتف)
    function _f8() {
        if ('vibrate' in navigator) {
            navigator.vibrate(10);
        }
    }
    
    // إضافة الاهتزاز للأزرار
    document.querySelector('._x1').addEventListener('click', _f8);
    document.querySelector('._x6')?.addEventListener('click', _f8);
</script>

</body>
</html>



  
















<style>
    /* أنماط الزر الطافي */
    .theme-toggle {
        position: fixed;
        top:100px;
        left: 20px;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #333;
        color: #fff;
        border: none;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        z-index: 9999;
        transition: all 0.3s ease;
    }
    
    .theme-toggle:hover {
        transform: scale(1.1);
    }
    
    /* أنماط الوضع النهاري */
    body.light-mode {
        background-color: #f5f5f5;
        color: #333;
    }
    

    

body.dark-mode .hover-image-container {
    color: #ffffff;
}

body.dark-mode .image-tooltip {
    color: #66bfff;
}

body.dark-mode .image-tooltip-content {
    background-color: #222;
    box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
}

body.dark-mode .tooltip-caption {
    color: #ccc;
}
    body.light-mode .sidebar {
        background-color: #f0f0f0;
        color: #333;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    
    body.light-mode .bubble {
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        border-left: 6px solid #007bff;
        color: #333;
    }
    
    body.light-mode .progress-bar-container {
        background-color: #e0e0e0;
    }
    
    body.light-mode .finish-button {
        background-color: #007bff;
        color: white;
    }
    
    body.light-mode .interact-button {
        background-color: #007bff;
        color: white;
    }
    
    body.light-mode .refresh-button {
        background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
        color: #333;
        border: 1px solid #ccc;
    }
    
    body.light-mode #end-lesson-modal {
        background-color: #f5f5f5;
        color: #333;
    }
    
    body.light-mode .modal {
        background: #f5f5f5;
        color: #333;
    }
</style>

<button class="theme-toggle" id="themeToggle">☀️</button>

<script>
    // اختيار العناصر
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    
    // التحقق من التفضيل المحفوظ
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme === 'light') {
        body.classList.add('light-mode');
        body.classList.remove('dark-mode');
        themeToggle.textContent = '🌙';
    } else {
        body.classList.add('dark-mode');
        themeToggle.textContent = '☀️';
    }
    
    // حدث النقر على الزر
    themeToggle.addEventListener('click', () => {
        if (body.classList.contains('dark-mode')) {
            // التحويل إلى الوضع النهاري
            body.classList.add('light-mode');
            body.classList.remove('dark-mode');
            themeToggle.textContent = '🌙';
            localStorage.setItem('theme', 'light');
        } else {
            // التحويل إلى الوضع الليلي
            body.classList.add('dark-mode');
            body.classList.remove('light-mode');
            themeToggle.textContent = '☀️';
            localStorage.setItem('theme', 'dark');
        }
    });
</script>








































            
            
            
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>أداة التحكم في التكبير/التصغير</title>
  <style>
    /* تنسيقات أداة التكبير/التصغير */
    .zoom-controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      background: rgba(40, 40, 40, 0.9);
      padding: 12px;
      border-radius: 24px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .zoom-btn {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: #007bff;
      color: white;
      border: none;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    
    .zoom-btn:hover {
      background: #0056b3;
      transform: scale(1.05);
    }
    
    .zoom-value {
      color: white;
      font-family: Arial, sans-serif;
      font-size: 14px;
      font-weight: bold;
      min-width: 40px;
      text-align: center;
    }
    
    /* للهواتف */
    @media (max-width: 768px) {
      .zoom-controls-container {
        bottom: 15px;
        left: 15px;
      }
      
      
    }
  </style>
</head>
<body>



<script>
  // إعدادات التكبير
  const zoomSettings = {
    current: 1, // هذه القيمة سيتم تغييرها عند التحميل إذا لم توجد قيمة محفوظة
    min: 0.3, // غيرت الحد الأدنى ليتناسب مع القيمة الافتراضية
    max: 2,
    step: 0.1
  };

  // عناصر التحكم
  const elements = {
    zoomIn: document.getElementById('zoom-in'),
    zoomOut: document.getElementById('zoom-out'),
    zoomReset: document.getElementById('zoom-reset'),
    zoomValue: document.getElementById('zoom-value'),
    html: document.documentElement
  };

  // تطبيق مستوى التكبير الحالي
  function applyZoom() {
    elements.html.style.fontSize = `${zoomSettings.current * 100}%`;
    elements.zoomValue.textContent = `${Math.round(zoomSettings.current * 100)}%`;
    
    // حفظ الإعدادات
    localStorage.setItem('pageZoomLevel', zoomSettings.current);
  }

  // تكبير النص
  elements.zoomIn.addEventListener('click', () => {
    if (zoomSettings.current < zoomSettings.max) {
      zoomSettings.current += zoomSettings.step;
      applyZoom();
    }
  });

  // تصغير النص
  elements.zoomOut.addEventListener('click', () => {
    if (zoomSettings.current > zoomSettings.min) {
      zoomSettings.current -= zoomSettings.step;
      applyZoom();
    }
  });

  // إعادة التعيين
  elements.zoomReset.addEventListener('click', () => {
    zoomSettings.current = 1;
    applyZoom();
  });

  window.addEventListener('DOMContentLoaded', () => {
    const savedZoom = localStorage.getItem('pageZoomLevel');
    if (savedZoom) {
      zoomSettings.current = parseFloat(savedZoom);
    } else {
      // القيمة الافتراضية عند أول فتح (30%)
      zoomSettings.current = 0.1;
    }
    applyZoom();
  });

  // اختصارات لوحة المفاتيح
  document.addEventListener('keydown', (e) => {
    if (e.ctrlKey && e.key === '0') {
      e.preventDefault();
      elements.zoomReset.click();
    }
  });
</script>

</body>
</html>






































































































































































