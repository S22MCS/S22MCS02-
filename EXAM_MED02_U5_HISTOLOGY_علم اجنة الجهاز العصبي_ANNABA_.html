<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<br>
<br>

   
  <title>    اختبار   عِلْمُ أَجِنَّةِ الجِهَازِ العَصَبِيّ    - علم الأنسجة - كلية عنابة </title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 
 
  <link rel="stylesheet" href="styles.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
    /* أنماط عامة */
:root {
  --primary-color: #3498db;
  --secondary-color: #2980b9;
  --success-color: #2ecc71;
  --danger-color: #e74c3c;
  --warning-color: #f39c12;
  --light-color: #ecf0f1;
  --dark-color: #2c3e50;
  --text-color: #333;
  --white: #fff;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Tajawal', sans-serif;
  background-color: #f5f7fa;
  color: var(--text-color);
  line-height: 1.6;
  direction: rtl;
}

/* تصميم الهيدر */
header {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: var(--white);
  padding: 1.5rem;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border-bottom: 4px solid var(--secondary-color);
  position: relative;
  overflow: hidden;
}

header h1 {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  position: relative;
  z-index: 1;
}

header::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('https://via.placeholder.com/1920x1080') center/cover;
  opacity: 0.1;
  z-index: 0;
}

/* شريط الوقت */
.timer-container {
  background-color: var(--dark-color);
  color: var(--white);
  padding: 0.8rem 0;
  text-align: center;
  font-size: 1.78rem;
  font-weight: bold;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 1000;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  display: flex;
  justify-content: center;
  align-items: center;
}

.timer-container i {
  margin-left: 10px;
}

/* الحاوية الرئيسية */
.container {
  max-width: 800px;
  margin: 5rem auto 2rem;
  padding: 1.5rem;
  background-color: var(--white);
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  position: relative;
}

/* شريط التقدم */
.progress-indicator {
  width: 100%;
  height: 6px;
  background-color: #e0e0e0;
  border-radius: 3px;
  margin-bottom: 1rem;
  overflow: hidden;
  position: relative;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border-radius: 3px;
  transition: width 0.5s ease;
}

.progress-text {
  text-align: center;
  font-size: 0.9rem;
  color: var(--dark-color);
  margin-top: 0.5rem;
}

/* إعدادات البداية */
.start-screen {
  text-align: center;
  padding: 2rem;
}

.start-screen img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.start-screen img:hover {
  transform: scale(1.02);
}

/* اختيار المدة وعدد الأسئلة */
.quiz-settings {
  background-color: var(--light-color);
  padding: 1.5rem;
  border-radius: 10px;
  margin: 1rem 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.setting-group {
  margin-bottom: 1.5rem;
}

.setting-group label {
  display: block;
  margin-bottom: 0.8rem;
  font-weight: bold;
  font-size: 1.1rem;
  color: var(--dark-color);
}

.setting-group input, .setting-group select {
  width: 100%;
  padding: 0.8rem;
  border: 2px solid #ddd;
  border-radius: 8px;
  font-size: 1rem;
  text-align: center;
  margin-bottom: 1rem;
  transition: border-color 0.3s ease;
  font-family: 'Tajawal', sans-serif;
}

.setting-group input:focus, .setting-group select:focus {
  border-color: var(--primary-color);
  outline: none;
}

/* حاوية الأسئلة */
.question-container {
  margin-bottom: 1.5rem;
  display: none;
}

/* إطار الصورة */
.question-image {
  width: 100%;
  max-height: 300px;
  overflow: hidden;
  border-radius: 10px;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  position: relative;
}

.question-image img {
  width: 100%;
  height: auto;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.question-image:hover img {
  transform: scale(1.05);
}

/* نص السؤال */
.question-text {
  background-color: var(--light-color);
  padding: 1.5rem;
  border-radius: 10px;
  margin-bottom: 1.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.5;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

/* خيارات الإجابة */
.options {
  list-style: none;
  margin: 0;
  padding: 0;
}

.options li {
  padding: 1rem 1.5rem;
  background-color: var(--white);
  margin: 0.5rem 0;
  cursor: pointer;
  border-radius: 8px;
  border: 2px solid #ddd;
  transition: all 0.3s ease;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  position: relative;
  user-select: none;
}

.options li:hover {
  background-color: #f8f9fa;
  border-color: var(--primary-color);
  transform: translateX(-5px);
}

.options li.selected {
  background-color: var(--primary-color);
  color: var(--white);
  border-color: var(--primary-color);
}

.options li.correct {
  background-color: var(--success-color);
  color: var(--white);
  border-color: var(--success-color);
}

.options li.incorrect {
  background-color: var(--danger-color);
  color: var(--white);
  border-color: var(--danger-color);
}

.options li.touched {
  transform: scale(0.98);
  opacity: 0.9;
}

/* علامة الإجابة الصحيحة */
.correct-mark {
  position: absolute;
  left: 10px;
  color: var(--white);
  font-weight: bold;
}

/* أزرار التحكم */
.btn {
  display: inline-block;

  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: var(--white);
  padding: 0.8rem 1.8rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  margin: 0.5rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  text-decoration: none;
}

.btn:hover {
  background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

.btn:active {
  transform: translateY(1px);
  box-shadow: none;
}

.btn-secondary {
  background: linear-gradient(135deg, #6c757d, #5a6268);
}

.btn-success {
  background: linear-gradient(135deg, var(--success-color), #27ae60);
}

.btn-danger {
  background: linear-gradient(135deg, var(--danger-color), #c0392b);
}

.btn-warning {
  background: linear-gradient(135deg, var(--warning-color), #e67e22);
}

.btn-info {
  background: linear-gradient(135deg, #17a2b8, #138496);
}

/* قسم النتائج */
.result-section {
  display: none;
  text-align: center;
  padding: 2rem;
}

.result-section h2 {
  font-size: 2rem;
  color: var(--primary-color);
  margin-bottom: 1.5rem;
}

.score-display {
  font-size: 2.5rem;
  font-weight: bold;
  color: var(--dark-color);
  margin: 1.5rem 0;
}

.progress-container {
  width: 100%;
  height: 30px;
  background-color: #e0e0e0;
  border-radius: 15px;
  margin: 1.5rem 0;
  overflow: hidden;
}

.time-stats {
  display: flex;
  justify-content: space-around;
  margin: 1.5rem 0;
  flex-wrap: wrap;
}

.stat-box {
  background-color: var(--light-color);
  padding: 1rem;
  border-radius: 8px;
  min-width: 150px;
  margin: 0.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.stat-box h3 {
  color: var(--dark-color);
  margin-bottom: 0.5rem;
}

.stat-box p {
  font-size: 1.2rem;
  font-weight: bold;
}

/* الرسوم البيانية */
.chart-container {
  width: 100%;
  max-width: 600px;
  margin: 2rem auto;
}

/* مراجعة الأسئلة */
.question-review {
  background-color: var(--white);
  border-radius: 8px;
  padding: 1.5rem;
  margin: 1rem 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  text-align: right;
  border-left: 4px solid #ddd;
}

.question-review.correct {
  border-left-color: var(--success-color);
}

.question-review.incorrect {
  border-left-color: var(--danger-color);
}

.question-review h3 {
  margin-bottom: 0.8rem;
  color: var(--dark-color);
}

.question-review p {
  margin-bottom: 0.8rem;
}

.question-review .user-answer {
  font-weight: bold;
}

.question-review .correct-answer {
  font-weight: bold;
  color: var(--success-color);
}

.question-review .explanation {
  background-color: var(--light-color);
  padding: 1rem;
  border-radius: 8px;
  margin-top: 1rem;
}

/* النافذة المنبثقة للشرح */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.modal.active {
  opacity: 1;
  visibility: visible;
}

.modal-content {
  background-color: var(--white);
  border-radius: 12px;
  width: 90%;
  max-width: 600px;
  max-height: 80vh;
  overflow-y: auto;
  padding: 2rem;
  position: relative;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}


.close-btn {
  position: fixed;
  top: 1rem; /* مسافة من الأعلى */
  left: 50%; /* المنتصف أفقياً */
  transform: translateX(-50%); /* توسيط دقيق */
  background-color: var(--danger-color);
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 3.2rem;
  height: 3.2rem;
  font-size: 1.6rem;
  cursor: pointer;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  z-index: 9999;
}

.close-btn:hover {
  transform: translateX(-50%) translateY(-3px) scale(1.05);
  box-shadow: 0 10px 18px rgba(0, 0, 0, 0.3);
}

/* تحسينات للشاشات الصغيرة */
@media (max-width: 480px) {
  .close-btn {
    width: 2.8rem;
    height: 2.8rem;
    font-size: 1.4rem;
    top: 0.8rem;
  }
}









/* زر المعلومات العائم */
.info-btn {
  position: fixed;
  bottom: 9rem;
  right: 2rem;
  background-color: var(--primary-color);
  color: var(--white);
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  transition: all 0.3s ease;
}

.info-btn:hover {
  background-color: var(--secondary-color);
  transform: scale(1.1);
}

.info-btn i {
  font-size: 1.5rem;
}

/* لوحة المعلومات الجانبية */
.info-panel {
  position: fixed;
  top: 0;
  right: -350px;
  width: 350px;
  height: 100%;
  background-color: var(--white);
  box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
  z-index: 1500;
  transition: right 0.3s ease;
  padding: 1.5rem;
  overflow-y: auto;
}

.info-panel.active {
  right: 0;
}

.info-panel h3 {
  color: var(--primary-color);
  margin-bottom: 1rem;
  border-bottom: 2px solid var(--primary-color);
  padding-bottom: 0.5rem;
}

.info-panel p {
  margin-bottom: 1rem;
}

.info-panel ul {
  margin-right: 1.5rem;
  margin-bottom: 1.5rem;
}

.info-panel li {
  margin-bottom: 0.5rem;
}

.close-panel {
  position: absolute;
  top: 1rem;
  left: 1rem;
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  color: var(--danger-color);
}

/* زر العودة للأعلى */
.back-to-top {
  position: fixed;
  bottom: 20rem;
  left: 2rem;
  background-color: var(--primary-color);
  color: var(--white);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
  z-index: 1000;
}

.back-to-top.visible {
  opacity: 1;
  visibility: visible;
}

.back-to-top:hover {
  background-color: var(--secondary-color);
  transform: translateY(-3px);
}

/* الجداول */
table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
}

th, td {
  padding: 0.8rem;
  text-align: right;
  border-bottom: 1px solid #ddd;
}

th {
  background-color: var(--primary-color);
  color: white;
}

tr:nth-child(even) {
  background-color: #f2f2f2;
}

tr:hover {
  background-color: #e9e9e9;
}

/* التكيف مع الشاشات الصغيرة */
@media (max-width: 768px) {
  header h1 {
    font-size: 1.5rem;
  }
  
  .container {
    margin: 4rem auto 1rem;
    padding: 1rem;
  }
  
  .question-text {
    font-size: 1.1rem;
    padding: 1rem;
  }
  
  .options li {
    padding: 0.8rem 1rem;
    font-size: 1rem;
  }
  
  .btn {
    padding: 0.7rem 1.5rem;
    font-size: 0.9rem;
  }
  
  .result-section h2 {
    font-size: 1.8rem;
  }
  
  .score-display {
    font-size: 2rem;
  }
  
  .info-panel {
    width: 300px;
    right: -300px;
  }
  
  .info-btn {
    width: 50px;
    height: 50px;
    bottom: 1.5rem;
    right: 1.5rem;
  }
  
  th, td {
    padding: 0.6rem;
    font-size: 0.9rem;
  }
}

@media (max-width: 480px) {
  header h1 {
    font-size: 1.3rem;
  }
  
  .timer-container {
    font-size: 1.2rem;
  }
  
  .question-text {
    font-size: 1rem;
  }
  
  .options li {
    padding: 0.7rem;
    font-size: 0.9rem;
  }
  
  .btn {
    width: 100%;
    margin: 0.3rem 0;
  }
  
  .time-stats {
    flex-direction: column;
  }
  
  .info-panel {
    width: 85%;
    right: -85%;
  }
  
  .info-btn {
    width: 45px;
    height: 45px;
    bottom: 12rem;
    right: 1rem;
  }
  
  .back-to-top {
    width: 45px;
    height: 45px;
    bottom: 14rem;
    left: 1rem;
  }
  
  .question-image {
    max-height: 200px;
  }
  
  th, td {
    padding: 0.5rem;
    font-size: 0.8rem;
  }
  
  .hormones-table {
    overflow-x: auto;
    display: block;
  }
}




/* نافذة الشروحات الطويلة */
.long-explanation-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.long-explanation-modal.active {
  opacity: 1;
  visibility: visible;
}

.long-explanation-content {
  background-color: var(--white);
  border-radius: 12px;
  width: 90%;
  max-width: 800px;
  max-height: 80vh;
  overflow-y: auto;
  padding: 2rem;
  position: relative;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

.long-explanation-content h3 {
  color: var(--primary-color);
  margin-bottom: 1rem;
}

.long-explanation-content p {
  margin-bottom: 1rem;
  line-height: 1.8;
}

.long-explanation-btn {
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  margin: 0.5rem;
  font-size: 0.9rem;
}

.long-explanation-btn:hover {
  background: linear-gradient(135deg, #8e44ad, #9b59b6);
}
</style>





<body>
  <!-- شريط الوقت -->
  <div class="timer-container">
    <i class="fas fa-clock"> </i>
    <span id="timer">00:00</span>
 

  </div>
  

  
  <!-- الهيدر -->
  <header>





    <h1>    اختبار   عِلْمُ أَجِنَّةِ الجِهَازِ العَصَبِيّ    - علم الأنسجة - كلية عنابة 
</h1>
  </header>
  

<div class="boton-continaire">
 <button class="_x1" onclick="_f1()" style="position: relative; left: 8px; top: 0px;">⚠️</button>
   <button class="boton-icon theme" id="theme-toggle">
    <i class="fas fa-moon"></i>
  </button>
  <button class="boton-action lesson" id="eldarsBtn" aria-label="فتح ملخص الدرس">
    <i class="fas fa-book"></i>
    <span>فتح ملخص الدرس</span>
  </button>
  <button class="boton-icon mosque" onclick="togglePopup('istighfarPopup')">🕌</button>
  <button class="boton-icon kaaba" onclick="togglePopup('prayerPopup')">🕋</button>
  <button class="boton-icon settings" onclick="togglePopup('settingsPopup')">⚙️</button>
</div>
  <style>
.boton-continaire {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  padding: 10px;
  justify-content: center;
  align-items: center;
  background: #f5f5f5; /* خلفية فاتحة */
  border-radius: 0px;
  margin: 0px;
}

/* تصميم أساسي للأزرار */
.boton-icon, .boton-action {
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  font-size: 20px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

.boton-action {
  border-radius: 25px;
  width: auto;
  padding: 0 20px;
  gap: 10px;
}

/* ألوان الأزرار */
.boton-icon.warning { background: #FFEB3B; color: #000; } /* أصفر تحذير */
.boton-icon.theme { background: #333333; color: #FFF; } /* داكن */
.boton-action.lesson { background: #0004EC; color: #FFF; } /* أزرق */
.boton-icon.mosque { background: #2196F3; color: #FFF; } /* أزرق فاتح */
.boton-icon.kaaba { background: #4CAF50; color: #FFF; } /* أخضر */
.boton-icon.settings { background: #FF9800; color: #FFF; } /* برتقالي */

/* تأثيرات عند الضغط والتحويم */
.boton-icon:hover, .boton-action:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.boton-icon:active, .boton-action:active {
  transform: scale(0.95);
}

/* تصميم متجاوب للجوال */
@media (max-width: 768px) {
  .boton-continaire {
    gap: 10px;
    padding: 15px;
  }
  
  .boton-icon {
    width: 45px;
    height: 45px;
    font-size: 18px;
  }
  
  .boton-action {
    font-size: 14px;
    padding: 0 15px;
  }
}
  </style>

 <style>
  .lesson-summary-btn {
    position: static;
    padding: 10px 20px;
    background: linear-gradient(135deg, #0004ec, #0000b9) !important;
    color: white;
    font-size: 16px;
    border-radius: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 5px 15px rgba(0, 4, 236, 0.3), 
                inset 0 2px 4px rgba(255, 255, 255, 0.3);
    transition: all 0.2s ease;
    z-index: 1000;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.lesson-summary-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 7px 20px rgba(0, 4, 236, 0.4);
}

.lesson-summary-btn i {
    font-size: 18px;
}

@media (max-width: 480px) {
    .lesson-summary-btn {
        padding: 8px 15px;
        font-size: 14px;
    }
    
    .lesson-summary-btn i {
        font-size: 16px;
    }
}
 </style>

  <!-- الحاوية الرئيسية -->
  <div class="container">
    <!-- شاشة البداية -->
    <div class="start-screen" id="start-screen">
  
      <h2>مرحباً بك في اختبار   أداة علم </h2>
      <p>هذا الاختبار مصمم لقياس معرفتك  حول  </p>
      
      <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 5vh; padding: 12px; text-align: center; background: #f4f4f4; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); margin: 8px;">
        <h1 style="font-size: clamp(1.1rem, 2.5vw, 1.4rem); color: #2e3b4e; margin-bottom: 10px; font-weight: 600;">
   اختبار   عِلْمُ أَجِنَّةِ الجِهَازِ العَصَبِيّ    - علم الأنسجة - كلية عنابة 
        </h1>
           <h2 style="font-size: clamp(0.85rem, 2vw, 1.1rem); color: #445566; margin: 4px 0; font-weight: 500;">
          🔻 THE  EMBRYOLOGY OF THE NERVOUS SYSTEM  TEST – HISTOLOGY – FACULTY OF ANNABA 🔻
        </h2>
        <h2 style="font-size: clamp(0.85rem, 2vw, 1.1rem); color: #445566; margin: 4px 0; font-weight: 500;">
          🔻 TEST DE L EMBRYOLOGIE DU SYSTÈME NERVEUX  – HISTOLOGY – FACULTÉ D’ANNABA 🔻
        </h2>
     
      </div>
      
      




    


      <!-- اختيار إعدادات الاختبار -->
      <div class="quiz-settings">
        <div class="setting-group">
          <label for="custom-duration">اختر مدة الاختبار (بالدقائق):</label>
          <input type="number" id="custom-duration" min="1" max="60" value="10">
        </div>
        
        <div class="setting-group">
          <label for="question-count">عدد الأسئلة:</label>
          <select id="question-count">
            <option value="5">5 أسئلة</option>
            <option value="10">10 أسئلة</option>
            <option value="15">15 أسئلة</option>
            <option value="20">20 أسئلة</option>
            <option value="all">جميع الأسئلة</option> <!-- الخيار الجديد -->

          </select>
        </div>
        



        
    <!-- زر المعلومات العائم -->
    <div class="info-btn" id="info-btn">
      <i class="fas fa-info"></i>
    </div>
    

        
      <style>
   
        /* تصميم خاص فقط بعنصر الإعداد */
        .quiz-setting {
          max-width: 280px;
          margin: 30px auto;
        }
    
        .quiz-setting .setting-group {
          display: flex;
          align-items: center;
          background-color: #ffffff;
          border: 1px solid #ddd;
          padding: 10px 14px;
          border-radius: 12px;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
          transition: all 0.3s ease;
          cursor: pointer;
        }
    
        .quiz-setting .setting-group:hover {
          background-color: #f0f8ff;
        }
    
        .quiz-setting input[type="checkbox"] {
          appearance: none;
          width: 18px;
          height: 18px;
          border: 2px solid #999;
          border-radius: 4px;
          margin-left: 10px;
          position: relative;
          transition: all 0.2s ease;
        }
    
        .quiz-setting input[type="checkbox"]:checked {
          border-color: #28a745;
          background-color: #28a745;
        }
    
        .quiz-setting input[type="checkbox"]:checked::after {
          content: "✓";
          position: absolute;
          top: -2px;
          left: 3px;
          font-size: 14px;
          color: #fff;
        }
    
        .quiz-setting label {
          display: flex;
          align-items: center;
          color: #333;
          font-size: 15px;
        }
    
        .quiz-setting label i {
          margin-left: 6px;
          color: #007bff;
          font-size: 16px;
        }




/* نافذة الشروحات الطويلة */
.long-explanation-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.long-explanation-modal.active {
  opacity: 1;
  visibility: visible;
}

.long-explanation-content {
  background-color: var(--white);
  border-radius: 12px;
  width: 90%;
  max-width: 800px;
  max-height: 80vh;
  overflow-y: auto;
  padding: 2rem;
  position: relative;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

.long-explanation-content h3 {
  color: var(--primary-color);
  margin-bottom: 1rem;
}

.long-explanation-content p {
  margin-bottom: 1rem;
  line-height: 1.8;
}

.long-explanation-btn {
  background: linear-gradient(135deg, #9b59b6, #8e44ad);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  margin: 0.5rem;
  font-size: 0.9rem;
}

.long-explanation-btn:hover {
  background: linear-gradient(135deg, #8e44ad, #9b59b6);
}
</style>




    
      <div class="quiz-setting">
        <div class="setting-group">
          <input type="checkbox" id="shuffle-questions" checked>
          <label for="shuffle-questions">
            <i class="fas fa-random"></i>
            

            <div style="padding: 0.5rem; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9; max-width: 300px; font-size: 0.875rem;">
              <h4 style="color: #2c3e50; margin-bottom: 0.5rem; font-size: 1rem;">
                <strong>🔀 خلط الأسئلة</strong>
              </h4>
              <p style="color: #555; line-height: 1.5; margin: 0;">
                عند عدم  تفعيل هذه الميزة، تُعرض الأسئلة من الأحدث إلى الأقدم لضمان تنويع وتوزيع عادل بين السنوات.
              </p>
            </div>
            


          </label>
        </div>
      </div>
    
        <div style="text-align: center;">
          <button class="btn" id="start-btn">بدء الاختبار</button>
          <button class="btn btn-secondary" id="quick-test-btn">اختبار سريع (5 أسئلة - 5 دقائق)</button>
        </div>
      </div>
      
      <div class="tips">
        <h3>نصائح قبل البدء:</h3>
        <ul style="text-align: right; margin-right: 1.5rem;">
          <li>اقرأ كل سؤال بعناية قبل الإجابة</li>
          <li>يمكنك تغيير إجابتك قبل الضغط على زر الإرسال</li>
          <li>سيتم احتساب الوقت المستغرق لكل سؤال</li>
          <li>اضغط على زر المعلومات (<i class="fas fa-info"></i>) للحصول على مساعدة</li>


        </ul>
      </div>
    </div>
    
    <!-- شريط التقدم -->
    <div class="progress-indicator" id="progress-indicator" style="display: none;">
      <div class="progress-bar" id="question-progress"></div>
      <div class="progress-text" id="progress-text">السؤال 1 من 10</div>
    </div>
    
    <!-- حاوية الأسئلة -->
    <div id="question-container" class="question-container">
      <!-- سيتم تعبئتها ديناميكياً -->
    </div>
    
    <!-- قسم النتائج -->
    <div id="result-section" class="result-section">
      <h2>نتيجة الاختبار</h2>
      <div class="score-display" id="score-display"></div>
      
      <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      
      <div class="chart-container">
        <canvas id="results-chart"></canvas>
      </div>
      
      <div class="time-stats">
        <div class="stat-box">
          <h3>الوقت المستغرق</h3>
          <p id="total-time"></p>
        </div>
        <div class="stat-box">
          <h3>متوسط الوقت لكل سؤال</h3>
          <p id="average-time"></p>
        </div>
        <div class="stat-box">
          <h3>أسرع إجابة</h3>
          <p id="fastest-time"></p>
        </div>
        <div class="stat-box">
          <h3>أبطأ إجابة</h3>
          <p id="slowest-time"></p>
        </div>
      </div>
      
      <h3>مراجعة الأسئلة:</h3>
      <div id="results-container"></div>
      
      <div class="actions">
        <button class="btn btn-success" onclick="restartQuiz()">إعادة الاختبار</button>
        <button class="btn btn-secondary" onclick="window.location.href='index.html';">العودة للرئيسية</button>

        
      
    
        <button class="btn" style="background: #9b59b6;" onclick="showAllExplanations()">
          <i class="fas fa-book"></i> عرض جميع الشروحات
        </button>




        
    
        


          <button class="btn" style="background: #0004ec;" 
          
          id="eldarsBtn" aria-label="فتح ملخص الدرس">
                <i class="fas fa-book"></i>
                <span>فتح ملخص الدرس</span>
            </button>
      </div>
    </div>
  </div>
  



  <!-- النافذة المنبثقة للشرح -->
  <div id="explanation-modal" class="modal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeExplanation()">×</button>
      <h3 id="modal-title">الشرح  المختصر </h3>
      <div id="explanation-text"></div>
    </div>
  </div>
  










  <!-- نافذة الشروحات الطويلة -->
<div id="long-explanation-modal" class="long-explanation-modal">
  <div class="long-explanation-content">
    <button class="close-btn" onclick="closeLongExplanation()">×</button>
    <h3 id="long-explanation-title">الشروحات  </h3>
    <div id="long-explanation-text"></div>
  </div>
</div>




  <!-- زر العودة للأعلى -->
  <div class="back-to-top" id="back-to-top">↑</div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script>
</body>
</html>


















<script>






// بيانات الأسئلة الكاملة
const allQuestions = [

//QES0-01

  {
   text: `
<style>.badge{display:inline-block;padding:6px 12px;margin:5px 6px;border-radius:20px;font-size:0.9rem;font-weight:bold;text-align:center;white-space:nowrap;box-shadow:0 4px 8px rgba(0,0,0,0.1);transition:transform 0.3s,box-shadow 0.3s;cursor:pointer}.badge:hover{transform:scale(1.05);box-shadow:0 6px 12px rgba(0,0,0,0.15)}.green{color:#28A745;background-color:#e0f7e9}.red{color:#FF4D4D;background-color:#f7e0e0}.blue{color:#007BFF;background-color:#E6F0FF}.yellow{color:#FFC107;background-color:#FFFBE6}.black{color:#fff;background-color:#000}.badge-container{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;align-items:center;margin-top:20px;padding:10px}.question-text{text-align:center;margin-top:25px;font-family:'Arial',sans-serif;font-size:20px;font-weight:bold;color:#000;padding:0 10px}@media(max-width:600px){.badge{font-size:0.85rem;padding:5px 10px}.question-text{font-size:18px}}</style><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

<div class="badge-container">
  <span class="badge green"><i class="fas fa-book"></i>  اختيار مفرد 
    N°37 U5 2024</span>
  <span class="badge red"><i class="fas fa-map-marker-alt"></i> عنابة  </span>
  <span class="badge blue">الشرح المختصر <i class="fas fa-check-circle"></i></span>
  <span class="badge yellow">الشروحات <i class="fas fa-bolt"></i></span>
  <span class="badge black">ملخص الدرس <i class="fas fa-caret-down" style="color: red;"></i></span>
</div>

<div class="question-text">
Une des propositions suivantes ne correspond pas à la neurulation:
 
 </div>
`,


    options: [
      "   Débute vers la fin de la quatrième semaine de développement embryonnaire",
      " Sous l'influence du mésoblaste axial, l'ectoblaste se différencie pour donner la plaque neurale",
      " La plaque neurale est à l'origine du tube neural",
      " La partie céphalique du tube neurale est à l'origine de l'encéphale",
      "  La partie sacré et coccygienne de la moelle épinière se forme à partir de l'éminence mésoblastique"
    ],
    correct: [2],
    explanation:  `
    


<div style="font-family: Arial; font-size: 14px; line-height: 1.6;">
  <h2>✅ الإجابة الصحيحة:</h2>
  <p><strong>A. Débute vers la fin de la quatrième semaine de développement embryonnaire<br>
  A. Begins towards the end of the fourth week of embryonic development<br>
  A. تبدأ في نهاية الأسبوع الرابع من تطور الجنين</strong></p>
</div>                                                                                    


<style>
  .quiz-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 25px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f7fa;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  }

  .question-header {
    color: #2c3e50;
    font-size: 1.4em;
    margin-bottom: 25px;
    padding-bottom: 12px;
    border-bottom: 2px solid #eaecef;
    font-weight: 600;
  }

  .option-block {
    border: 1px solid #e0e3eb;
    border-radius: 14px;
    padding: 18px 20px;
    margin-bottom: 22px;
    background-color: #ffffff;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .option-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: #c7d0e4;
  }

  .option-block strong {
    font-size: 1.15em;
    color: #5e35b1;
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
  }

  .correct {
    color: #2e7d32;
    font-weight: 600;
    background-color: #e8f5e9;
    border-left: 4px solid #2e7d32;
    padding-left: 12px;
  }

  .incorrect {
    color: #c62828;
    font-weight: 600;
    background-color: #ffebee;
    border-left: 4px solid #c62828;
    padding-left: 12px;
  }

  .explanation {
    margin-top: 12px;
    padding: 12px;
    background-color: #f0f4f8;
    border-radius: 8px;
    font-size: 0.95em;
    color: #455a64;
  }

  p {
    margin: 10px 0;
    line-height: 1.7;
    color: #37474f;
  }

  .proposal {
    font-weight: 600;
    color: #263238;
    margin-bottom: 8px;
    font-size: 1.05em;
  }

  .translation {
    font-style: italic;
    color: #607d8b;
    margin-top: 4px;
    font-size: 0.95em;
  }

  .feedback-icon {
    margin-right: 8px;
    font-size: 1.2em;
    vertical-align: middle;
  }
</style>

                                                                          
<h3>🩺 التفسير الطبي لكل خيار:</h3>

<div class="option-block">
  <p class="proposal">A. Débute vers la fin de la quatrième semaine de développement embryonnaire<br>
  A. Begins towards the end of the fourth week of embryonic development<br>
  A. تبدأ في نهاية الأسبوع الرابع من تطور الجنين</p>
  <p class="incorrect">❌ خطأ – التَنَعُّم العصبي (Neurulation) يبدأ في بداية الأسبوع الثالث من التطور الجنيني، وليس في نهايته.</p>
  <p class="incorrect">❌ Incorrect – Neurulation begins early in the **third week**, not at the end of the **fourth week**.</p>
  <p class="incorrect">❌ Incorrect – La neurulation commence **au début de la troisième semaine** du développement embryonnaire, pas à la fin de la quatrième.</p>
</div>

<div class="option-block">
  <p class="proposal">B. Sous l'influence du mésoblaste axial, l'ectoblaste se différencie pour donner la plaque neurale<br>
  B. Under the influence of axial mesoderm, the ectoderm differentiates to form the neural plate<br>
  B. تحت تأثير الميزوبلاست المحوري، يتحول الأديم الظاهر إلى الصفيحة العصبية</p>
  <p class="correct">✅ صحيح – الحبل الظهري (notochord) ضمن الميزوبلاست المحوري يُفرز إشارات تحفز الأديم الظاهر ليتحول إلى صفيحة عصبية.</p>
  <p class="correct">✅ Correct – The notochord (axial mesoderm) induces the overlying ectoderm to differentiate into the neural plate.</p>
  <p class="correct">✅ Correct – Le mésoblaste axial (notochorde) induit la différenciation de l’ectoblaste en plaque neurale.</p>
</div>

<div class="option-block">
  <p class="proposal">C. La plaque neurale est à l'origine du tube neural<br>
  C. The neural plate gives rise to the neural tube<br>
  C. الصفيحة العصبية تُشكّل الأنبوب العصبي</p>
  <p class="correct">✅ صحيح – الصفيحة العصبية تلتف وتندمج لتعطي الأنبوب العصبي، والذي يُشكل الجهاز العصبي المركزي.</p>
  <p class="correct">✅ Correct – The neural plate folds and fuses to form the neural tube, the precursor of the central nervous system.</p>
  <p class="correct">✅ Correct – La plaque neurale se replie et fusionne pour former le tube neural, origine du système nerveux central.</p>
</div>

<div class="option-block">
  <p class="proposal">D. La partie céphalique du tube neurale est à l'origine de l'encéphale<br>
  D. The cephalic part of the neural tube gives rise to the brain<br>
  D. الجزء الأمامي (الرأسي) من الأنبوب العصبي يُشكل الدماغ</p>
  <p class="correct">✅ صحيح – المنطقة الأمامية من الأنبوب العصبي تتضخم وتتمايز لتشكل الدماغ (المخ والمخيخ وجذع الدماغ).</p>
  <p class="correct">✅ Correct – The cephalic region of the neural tube enlarges and differentiates into the brain structures.</p>
  <p class="correct">✅ Correct – L’extrémité céphalique du tube neural donne naissance à l’encéphale.</p>
</div>

<div class="option-block">
  <p class="proposal">E. La partie sacrée et coccygienne de la moelle épinière se forme à partir de l'éminence mésoblastique<br>
  E. The sacral and coccygeal part of the spinal cord forms from the caudal eminence (mesoblastic eminence)<br>
  E. الجزء العجزي والعصعصي من النخاع الشوكي يتشكل من البروز الميزوبلاستي</p>
  <p class="correct">✅ صحيح – في المناطق الذيلية، لا يستمر الأنبوب العصبي المباشر، بل يتكون من تكاثر خلايا في بروز ميزوبلاستي يُسمى "النتوء الذّيلي".</p>
  <p class="correct">✅ Correct – The sacral and coccygeal segments of the spinal cord are derived from the secondary neurulation occurring in the caudal eminence.</p>
  <p class="correct">✅ Correct – Les segments sacrés et coccygiens de la moelle se forment par neurulation secondaire à partir de l’éminence caudale mésoblastique.</p>
</div>







  
`,

   
    detailedExplanation: `
    

<div class="lesson-summary" style="text-align: center; padding: 20px; margin-bottom: 20px;">
    <div id="animated-box" style="
        display: inline-block;
        padding: 15px 25px;
        background-color: #4CAF50;
        color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        font-size: 1.2em;
        font-weight: bold;
        animation: pulse 2s infinite;
    ">
        <span>🔻 شروحات مفصلة قريبا 🔻</span>
    </div>
</div>

<!-- نضيف الـ keyframes بشكل مستقل -->
<style>
@keyframes pulse {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}
</style>

    `,
    
    timeSpent: 0,
    type: "single"
  },










//QES0-02

  
  {
   text: `
<style>.badge{display:inline-block;padding:6px 12px;margin:5px 6px;border-radius:20px;font-size:0.9rem;font-weight:bold;text-align:center;white-space:nowrap;box-shadow:0 4px 8px rgba(0,0,0,0.1);transition:transform 0.3s,box-shadow 0.3s;cursor:pointer}.badge:hover{transform:scale(1.05);box-shadow:0 6px 12px rgba(0,0,0,0.15)}.green{color:#28A745;background-color:#e0f7e9}.red{color:#FF4D4D;background-color:#f7e0e0}.blue{color:#007BFF;background-color:#E6F0FF}.yellow{color:#FFC107;background-color:#FFFBE6}.black{color:#fff;background-color:#000}.badge-container{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;align-items:center;margin-top:20px;padding:10px}.question-text{text-align:center;margin-top:25px;font-family:'Arial',sans-serif;font-size:20px;font-weight:bold;color:#000;padding:0 10px}@media(max-width:600px){.badge{font-size:0.85rem;padding:5px 10px}.question-text{font-size:18px}}</style><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

<div class="badge-container">
  <span class="badge green"><i class="fas fa-book"></i> اختيار مفرد N°49 U5 2023</span>
  <span class="badge red"><i class="fas fa-map-marker-alt"></i>  عنابة </span>
  <span class="badge blue">الشرح المختصر <i class="fas fa-check-circle"></i></span>
  <span class="badge yellow">الشروحات <i class="fas fa-bolt"></i></span>
  <span class="badge black">ملخص الدرس <i class="fas fa-caret-down" style="color: red;"></i></span>
</div>

<div class="question-text">

 A propos de l'embryologie du système nerveux, cochez la bonne réponse:
  </div>
`,





    options: [
      "   Le développement du système nerveux débute vers la fin de la 4me semaine",
      " L'épiblaste se différencie en neuroectoblaste sous l'influence du mésoblaste para-axial",
      "  La partie céphalique du tube neural se différencie en trois vésicules d'avant en arrière prosencéphale, mésencéphale, rhombencéphale",
      " Le neuropore postérieur du tube neural se ferme au 25 jour de développement embryonnaire",
      " La non fermeture du neuropore antérieur sera à l'origine d'une malformation congénitale appelée: spina bifida"
    ],
    correct: [2],
    explanation:  `
<div style="font-family: Arial; font-size: 14px; line-height: 1.6;">
  <h2>✅ الإجابة الصحيحة:</h2>
  <p><strong>C. La partie céphalique du tube neural se différencie en trois vésicules d'avant en arrière : prosencéphale, mésencéphale, rhombencéphale<br>
  C. The cephalic part of the neural tube differentiates into three vesicles: prosencephalon, mesencephalon, rhombencephalon<br>
  C. الجزء الأمامي من الأنبوب العصبي يتمايز إلى ثلاث حويصلات: الدماغ الأمامي، الدماغ الأوسط، والدماغ الخلفي</strong></p>
</div>           

<style>
  .quiz-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 25px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f7fa;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  }

  .question-header {
    color: #2c3e50;
    font-size: 1.4em;
    margin-bottom: 25px;
    padding-bottom: 12px;
    border-bottom: 2px solid #eaecef;
    font-weight: 600;
  }

  .option-block {
    border: 1px solid #e0e3eb;
    border-radius: 14px;
    padding: 18px 20px;
    margin-bottom: 22px;
    background-color: #ffffff;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .option-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: #c7d0e4;
  }

  .option-block strong {
    font-size: 1.15em;
    color: #5e35b1;
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
  }

  .correct {
    color: #2e7d32;
    font-weight: 600;
    background-color: #e8f5e9;
    border-left: 4px solid #2e7d32;
    padding-left: 12px;
  }

  .incorrect {
    color: #c62828;
    font-weight: 600;
    background-color: #ffebee;
    border-left: 4px solid #c62828;
    padding-left: 12px;
  }

  .explanation {
    margin-top: 12px;
    padding: 12px;
    background-color: #f0f4f8;
    border-radius: 8px;
    font-size: 0.95em;
    color: #455a64;
  }

  p {
    margin: 10px 0;
    line-height: 1.7;
    color: #37474f;
  }

  .proposal {
    font-weight: 600;
    color: #263238;
    margin-bottom: 8px;
    font-size: 1.05em;
  }

  .translation {
    font-style: italic;
    color: #607d8b;
    margin-top: 4px;
    font-size: 0.95em;
  }

  .feedback-icon {
    margin-right: 8px;
    font-size: 1.2em;
    vertical-align: middle;
  }
</style>
                                                                        
<h3>🧠 التفسير الطبي لكل خيار:</h3>

<div class="option-block">
  <p class="proposal">A. Le développement du système nerveux débute vers la fin de la 4me semaine<br>
  A. Nervous system development begins at the end of the 4th week<br>
  A. يبدأ تطور الجهاز العصبي في نهاية الأسبوع الرابع</p>
  <p class="incorrect">❌ خطأ – يبدأ تطور الجهاز العصبي في **الأسبوع الثالث**، مع تشكل الصفيحة العصبية.</p>
  <p class="incorrect">❌ Incorrect – Nervous system development **begins in the third week**, not at the end of the fourth.</p>
  <p class="incorrect">❌ Faux – Le développement du système nerveux commence **au cours de la 3ᵉ semaine**, avec l’apparition de la plaque neurale.</p>
</div>

<div class="option-block">
  <p class="proposal">B. L'épiblaste se différencie en neuroectoblaste sous l'influence du mésoblaste para-axial<br>
  B. The epiblast differentiates into neuroectoblast under the influence of paraxial mesoderm<br>
  B. يتمايز الإبيبلاست إلى الأديم الظاهر العصبي تحت تأثير الميزوبلاست المجاور للمحور</p>
  <p class="incorrect">❌ خطأ – التأثير المحفز الرئيسي يأتي من **الميزوبلاست المحوري** (الحبل الظهري)، وليس الميزوبلاست المجاور للمحور.</p>
  <p class="incorrect">❌ Incorrect – The **axial mesoderm** (notochord), not the paraxial mesoderm, induces the neuroectoderm from the epiblast.</p>
  <p class="incorrect">❌ Faux – C’est le **mésoblaste axial** (chorde), et non para-axial, qui induit la différenciation de l’épiblaste en neuroectoblaste.</p>
</div>

<div class="option-block">
  <p class="proposal">C. La partie céphalique du tube neural se différencie en trois vésicules d'avant en arrière : prosencéphale, mésencéphale, rhombencéphale<br>
  C. The cephalic part of the neural tube differentiates into three vesicles: prosencephalon, mesencephalon, rhombencephalon<br>
  C. الجزء الأمامي من الأنبوب العصبي يتمايز إلى ثلاث حويصلات: الدماغ الأمامي، الدماغ الأوسط، والدماغ الخلفي</p>
  <p class="correct">✅ صحيح – هذا هو التسلسل الطبيعي لتطور الدماغ الأمامي (Prosencéphale)، الأوسط (Mésencéphale) والخلفي (Rhombencéphale).</p>
  <p class="correct">✅ Correct – These are the **three primary brain vesicles** that form from the anterior neural tube.</p>
  <p class="correct">✅ Correct – Ce sont les **trois vésicules cérébrales primaires** issues de la partie antérieure du tube neural.</p>
</div>

<div class="option-block">
  <p class="proposal">D. Le neuropore postérieur du tube neural se ferme au 25 jour de développement embryonnaire<br>
  D. The posterior neuropore closes on day 25 of embryonic development<br>
  D. يُغلق الثقب العصبي الخلفي في اليوم 25 من التطور الجنيني</p>
  <p class="incorrect">❌ خطأ – يغلق الثقب العصبي **الأمامي** في اليوم 25، أما الخلفي فيغلق في **اليوم 27 تقريباً**.</p>
  <p class="incorrect">❌ Incorrect – The **anterior** neuropore closes on day 25; the **posterior** closes around **day 27**.</p>
  <p class="incorrect">❌ Faux – Le **neuropore antérieur** se ferme vers le jour 25, alors que le **neuropore postérieur** se ferme vers le **jour 27**.</p>
</div>

<div class="option-block">
  <p class="proposal">E. La non fermeture du neuropore antérieur sera à l'origine d'une malformation congénitale appelée: spina bifida<br>
  E. Failure of closure of the anterior neuropore leads to a congenital malformation called: spina bifida<br>
  E. عدم انغلاق الثقب العصبي الأمامي يؤدي إلى تشوه خلقي يُسمى: السنسنة المشقوقة</p>
  <p class="incorrect">❌ خطأ – عدم انغلاق **الثقب العصبي الخلفي** هو الذي يؤدي إلى السنسنة المشقوقة، أما عدم انغلاق الأمامي يؤدي إلى **انعدام الدماغ (anencephaly)**.</p>
  <p class="incorrect">❌ Incorrect – Failure of the **posterior** neuropore leads to **spina bifida**; anterior closure failure causes **anencephaly**.</p>
  <p class="incorrect">❌ Faux – L’échec de fermeture du **neuropore postérieur** cause le **spina bifida** ; celui du **neuropore antérieur** cause l’**anécephalie**.</p>
</div>




`,

   
    detailedExplanation: `
    

<div class="lesson-summary" style="text-align: center; padding: 20px; margin-bottom: 20px;">
    <div id="animated-box" style="
        display: inline-block;
        padding: 15px 25px;
        background-color: #4CAF50;
        color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        font-size: 1.2em;
        font-weight: bold;
        animation: pulse 2s infinite;
    ">
        <span>🔻 شروحات مفصلة قريبا 🔻</span>
    </div>
</div>

<!-- نضيف الـ keyframes بشكل مستقل -->
<style>
@keyframes pulse {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}
</style>













    `,
    
    timeSpent: 0,
    type: "single"
  },

  

//QES0-03

  {
   text: `
<style>.badge{display:inline-block;padding:6px 12px;margin:5px 6px;border-radius:20px;font-size:0.9rem;font-weight:bold;text-align:center;white-space:nowrap;box-shadow:0 4px 8px rgba(0,0,0,0.1);transition:transform 0.3s,box-shadow 0.3s;cursor:pointer}.badge:hover{transform:scale(1.05);box-shadow:0 6px 12px rgba(0,0,0,0.15)}.green{color:#28A745;background-color:#e0f7e9}.red{color:#FF4D4D;background-color:#f7e0e0}.blue{color:#007BFF;background-color:#E6F0FF}.yellow{color:#FFC107;background-color:#FFFBE6}.black{color:#fff;background-color:#000}.badge-container{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;align-items:center;margin-top:20px;padding:10px}.question-text{text-align:center;margin-top:25px;font-family:'Arial',sans-serif;font-size:20px;font-weight:bold;color:#000;padding:0 10px}@media(max-width:600px){.badge{font-size:0.85rem;padding:5px 10px}.question-text{font-size:18px}}</style><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

<div class="badge-container">
  <span class="badge green"><i class="fas fa-book"></i> اختيار مفرد N°50 U5 2023</span>
  <span class="badge red"><i class="fas fa-map-marker-alt"></i> عنابة </span>
  <span class="badge blue">الشرح المختصر <i class="fas fa-check-circle"></i></span>
  <span class="badge yellow">الشروحات <i class="fas fa-bolt"></i></span>
  <span class="badge black">ملخص الدرس <i class="fas fa-caret-down" style="color: red;"></i></span>
</div>

<div class="question-text">
Le tissu nerveux est spécialisé dans la perception et l'intégration des informations grâce aux propriétés structurales et fonctionnelles de ces cellules, parmi lesquelles:

 </div>
`,






    options: [
      " Les corps de Nissl sont dispersés dans l'ensemble du péricaryon et des neurites.",
      "Les neurones communiquent entre eux par des complexes de Jonctions serrées",
      " Les neurofibrilles interviennent dans le transport des métabolites vers les extrémités des prolongements cellulaires",
      "  Les dendrites sont des expansions cellulaires toujours myélinisées",
      " Dans le tissu nerveux central, les cellules de Schwann formentla galne de myéline"
    ],
        correct: [2],
    explanation:  `
<div style="font-family: Arial; font-size: 14px; line-height: 1.6;">
  <h2>✅ الإجابة الصحيحة:</h2>
  <p><strong>C. Les neurofibrilles interviennent dans le transport des métabolites vers les extrémités des prolongements cellulaires<br>
  C. Neurofibrils are involved in transporting metabolites toward the ends of cellular processes<br>
  C. تشارك الألياف العصبية (النيوروفِبريلات) في نقل المستقلبات نحو أطراف امتدادات الخلية العصبية</strong></p>
</div>
<style>
  .quiz-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 25px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f7fa;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  }

  .question-header {
    color: #2c3e50;
    font-size: 1.4em;
    margin-bottom: 25px;
    padding-bottom: 12px;
    border-bottom: 2px solid #eaecef;
    font-weight: 600;
  }

  .option-block {
    border: 1px solid #e0e3eb;
    border-radius: 14px;
    padding: 18px 20px;
    margin-bottom: 22px;
    background-color: #ffffff;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .option-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: #c7d0e4;
  }

  .option-block strong {
    font-size: 1.15em;
    color: #5e35b1;
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
  }

  .correct {
    color: #2e7d32;
    font-weight: 600;
    background-color: #e8f5e9;
    border-left: 4px solid #2e7d32;
    padding-left: 12px;
  }

  .incorrect {
    color: #c62828;
    font-weight: 600;
    background-color: #ffebee;
    border-left: 4px solid #c62828;
    padding-left: 12px;
  }

  .explanation {
    margin-top: 12px;
    padding: 12px;
    background-color: #f0f4f8;
    border-radius: 8px;
    font-size: 0.95em;
    color: #455a64;
  }

  p {
    margin: 10px 0;
    line-height: 1.7;
    color: #37474f;
  }

  .proposal {
    font-weight: 600;
    color: #263238;
    margin-bottom: 8px;
    font-size: 1.05em;
  }

  .translation {
    font-style: italic;
    color: #607d8b;
    margin-top: 4px;
    font-size: 0.95em;
  }

  .feedback-icon {
    margin-right: 8px;
    font-size: 1.2em;
    vertical-align: middle;
  }
</style>

<h3>🧠 التفسير الطبي لكل خيار:</h3>

<div class="option-block">
  <p class="proposal">A. Les corps de Nissl sont dispersés dans l'ensemble du péricaryon et des neurites<br>
  A. Nissl bodies are scattered throughout the perikaryon and neurites<br>
  A. أجسام نيسل منتشرة في جسم الخلية العصبية وجميع الامتدادات (الزوائد)</p>
  <p class="incorrect">❌ خطأ – أجسام نيسل موجودة فقط في **جسم الخلية (péricaryon)** والديندريتات، ولا توجد في **المحور العصبي (axon)**.</p>
  <p class="incorrect">❌ Incorrect – Nissl bodies are confined to the **perikaryon** and **dendrites**, not found in the **axon**.</p>
  <p class="incorrect">❌ Faux – Les corps de Nissl se trouvent uniquement dans le **péricaryon** et les **dendrites**, jamais dans l’**axone**.</p>
</div>

<div class="option-block">
  <p class="proposal">B. Les neurones communiquent entre eux par des complexes de Jonctions serrées<br>
  B. Neurons communicate via tight junction complexes<br>
  B. تتواصل الخلايا العصبية فيما بينها بواسطة وصلات محكمة (Tight junctions)</p>
  <p class="incorrect">❌ خطأ – التواصل بين الخلايا العصبية يتم عبر **المشابك العصبية (synapses)** وليس عبر الوصلات المحكمة.</p>
  <p class="incorrect">❌ Incorrect – Neurons communicate through **synapses**, not **tight junctions**.</p>
  <p class="incorrect">❌ Faux – Les neurones communiquent via des **synapses**, pas par des **jonctions serrées**.</p>
</div>

<div class="option-block">
  <p class="proposal">C. Les neurofibrilles interviennent dans le transport des métabolites vers les extrémités des prolongements cellulaires<br>
  C. Neurofibrils are involved in transporting metabolites toward the ends of cellular processes<br>
  C. تشارك الألياف العصبية في نقل المستقلبات نحو أطراف الزوائد العصبية</p>
  <p class="correct">✅ صحيح – تشكل النيوروفِبريلات جزءاً من الهيكل الخلوي وتلعب دوراً في النقل المحوري (axoplasmic transport).</p>
  <p class="correct">✅ Correct – Neurofibrils, as part of the cytoskeleton, help support **axonal transport** of metabolites and organelles.</p>
  <p class="correct">✅ Correct – Les neurofibrilles participent au **transport axoplasmique** en soutenant le déplacement des substances le long des prolongements.</p>
</div>

<div class="option-block">
  <p class="proposal">D. Les dendrites sont des expansions cellulaires toujours myélinisées<br>
  D. Dendrites are always myelinated cellular extensions<br>
  D. الزوائد الشجيرية (الديندريتات) مغطاة دائماً بالميالين</p>
  <p class="incorrect">❌ خطأ – غالبية الديندريتات **غير مغطاة بالميالين**، على عكس المحاور العصبية (axons).</p>
  <p class="incorrect">❌ Incorrect – Dendrites are **typically unmyelinated**, unlike many axons which are myelinated.</p>
  <p class="incorrect">❌ Faux – Les dendrites sont **généralement amyéliniques**, contrairement aux axones.</p>
</div>

<div class="option-block">
  <p class="proposal">E. Dans le tissu nerveux central, les cellules de Schwann forment la gaine de myéline<br>
  E. In the central nervous system, Schwann cells form the myelin sheath<br>
  E. في الجهاز العصبي المركزي، تشكل خلايا شوان الغلاف المياليني</p>
  <p class="incorrect">❌ خطأ – خلايا شوان توجد فقط في **الجهاز العصبي المحيطي**، أما في الجهاز العصبي المركزي فالغلاف المياليني تشكله **الخلايا قليلة التغصن (oligodendrocytes)**.</p>
  <p class="incorrect">❌ Incorrect – In the **CNS**, myelin is produced by **oligodendrocytes**, not Schwann cells which are found in the **PNS**.</p>
  <p class="incorrect">❌ Faux – Dans le **SNC**, ce sont les **oligodendrocytes** qui forment la myéline, et non les cellules de Schwann (présentes dans le SNP).</p>
</div>








`,

    detailedExplanation: `





<div class="lesson-summary" style="text-align: center; padding: 20px; margin-bottom: 20px;">
    <div id="animated-box" style="
        display: inline-block;
        padding: 15px 25px;
        background-color: #4CAF50;
        color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        font-size: 1.2em;
        font-weight: bold;
        animation: pulse 2s infinite;
    ">
        <span>🔻 شروحات مفصلة قريبا 🔻</span>
    </div>
</div>

<!-- نضيف الـ keyframes بشكل مستقل -->
<style>
@keyframes pulse {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}
</style>

    `,
    
    
    timeSpent: 0,
   type: "single"
  },

  


//QES0-04


  {
   text: `
<style>.badge{display:inline-block;padding:6px 12px;margin:5px 6px;border-radius:20px;font-size:0.9rem;font-weight:bold;text-align:center;white-space:nowrap;box-shadow:0 4px 8px rgba(0,0,0,0.1);transition:transform 0.3s,box-shadow 0.3s;cursor:pointer}.badge:hover{transform:scale(1.05);box-shadow:0 6px 12px rgba(0,0,0,0.15)}.green{color:#28A745;background-color:#e0f7e9}.red{color:#FF4D4D;background-color:#f7e0e0}.blue{color:#007BFF;background-color:#E6F0FF}.yellow{color:#FFC107;background-color:#FFFBE6}.black{color:#fff;background-color:#000}.badge-container{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;align-items:center;margin-top:20px;padding:10px}.question-text{text-align:center;margin-top:25px;font-family:'Arial',sans-serif;font-size:20px;font-weight:bold;color:#000;padding:0 10px}@media(max-width:600px){.badge{font-size:0.85rem;padding:5px 10px}.question-text{font-size:18px}}</style><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

<div class="badge-container">
  <span class="badge green"><i class="fas fa-book"></i> اختيار مفرد N°23 U5 2022</span>
  <span class="badge red"><i class="fas fa-map-marker-alt"></i> عنابة </span>
  <span class="badge blue">الشرح المختصر <i class="fas fa-check-circle"></i></span>
  <span class="badge yellow">الشروحات <i class="fas fa-bolt"></i></span>
  <span class="badge black">ملخص الدرس <i class="fas fa-caret-down" style="color: red;"></i></span>
</div>

<div class="question-text">
 A propos du développement ent embryonnaire du système nerveux, indiquez la réponse fausse:

 </div>
`,






    options: [
      " Le système nerveux se développe à partir de la troisième semaine de la vie embryonnaire.",
      " La différenciation de l'épiblaste en neuroectoblaste se fait sous l'effet inducteur du mésoblaste axdal sous-jacent.",
      "  Les oligodendrocytes dérivent des spongioblastes primaires du neuroépíthélium.",
         " Les cellules de Schwann dérivent des crêtes neurales.",
      "  La spina bifida est une malformation congénitale due au non fermeture du neuropore postérieur du tube neural."
    ],




    correct: [2],
    explanation:  `





<div style="font-family: Arial; font-size: 14px; line-height: 1.6;">
  <h2>✅ الإجابة الصحيحة (الخاطئة كما هو مطلوب في السؤال):</h2>
  <p><strong>C. Les oligodendrocytes dérivent des spongioblastes primaires du neuroépithélium<br>
  C. Oligodendrocytes derive from primary spongioblasts of the neuroepithelium<br>
  C. الخلايا قليلة التغصن تنشأ من الإسفنجيات الأولية للظهارة العصبية</strong></p>
</div>


<style>
  .quiz-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 25px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f7fa;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  }

  .question-header {
    color: #2c3e50;
    font-size: 1.4em;
    margin-bottom: 25px;
    padding-bottom: 12px;
    border-bottom: 2px solid #eaecef;
    font-weight: 600;
  }

  .option-block {
    border: 1px solid #e0e3eb;
    border-radius: 14px;
    padding: 18px 20px;
    margin-bottom: 22px;
    background-color: #ffffff;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .option-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: #c7d0e4;
  }

  .option-block strong {
    font-size: 1.15em;
    color: #5e35b1;
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
  }

  .correct {
    color: #2e7d32;
    font-weight: 600;
    background-color: #e8f5e9;
    border-left: 4px solid #2e7d32;
    padding-left: 12px;
  }

  .incorrect {
    color: #c62828;
    font-weight: 600;
    background-color: #ffebee;
    border-left: 4px solid #c62828;
    padding-left: 12px;
  }

  .explanation {
    margin-top: 12px;
    padding: 12px;
    background-color: #f0f4f8;
    border-radius: 8px;
    font-size: 0.95em;
    color: #455a64;
  }

  p {
    margin: 10px 0;
    line-height: 1.7;
    color: #37474f;
  }

  .proposal {
    font-weight: 600;
    color: #263238;
    margin-bottom: 8px;
    font-size: 1.05em;
  }

  .translation {
    font-style: italic;
    color: #607d8b;
    margin-top: 4px;
    font-size: 0.95em;
  }

  .feedback-icon {
    margin-right: 8px;
    font-size: 1.2em;
    vertical-align: middle;
  }
</style>

                                                                         

<h3>🧠 التفسير الطبي لكل خيار:</h3>

<div class="option-block">
  <p class="proposal">A. Le système nerveux se développe à partir de la troisième semaine de la vie embryonnaire<br>
  A. The nervous system develops starting in the third week of embryonic life<br>
  A. يبدأ تطور الجهاز العصبي من الأسبوع الثالث للحياة الجنينية</p>
  <p class="correct">✅ صحيح – يبدأ تكون الجهاز العصبي في الأسبوع الثالث من الحمل، بظهور اللوحة العصبية.</p>
  <p class="correct">✅ Correct – The neural plate begins forming in the third week of development.</p>
  <p class="correct">✅ Correct – Le système nerveux commence à se développer dès la troisième semaine.</p>
</div>

<div class="option-block">
  <p class="proposal">B. La différenciation de l'épiblaste en neuroectoblaste se fait sous l'effet inducteur du mésoblaste axial sous-jacent<br>
  B. Epiblast differentiates into neuroectoderm under the inductive effect of the underlying axial mesoderm<br>
  B. يتحول الإبي بلاست إلى الأديم الظاهر العصبي بتأثير الحاث للميسوديرم المحوري تحته</p>
  <p class="correct">✅ صحيح – النخاع المستطيل (الميسوديرم المحوري) يحفز تشكل اللوحة العصبية من الأديم الظاهر.</p>
  <p class="correct">✅ Correct – The notochord (axial mesoderm) induces the epiblast to become neuroectoderm.</p>
  <p class="correct">✅ Correct – Le mésoblaste axial (chorde) induit la différenciation de l’épiblaste en neuroectoblaste.</p>
</div>

<div class="option-block">
  <p class="proposal">C. Les oligodendrocytes dérivent des spongioblastes primaires du neuroépithélium<br>
  C. Oligodendrocytes derive from primary spongioblasts of the neuroepithelium<br>
  C. تنشأ الخلايا قليلة التغصن من الإسفنجيات الأولية في الظهارة العصبية</p>
  <p class="incorrect">❌ خطأ – الخلايا قليلة التغصن (oligodendrocytes) تنشأ من **الخلايا السلفية العصبية (neural progenitor cells)** في **الأنبوب العصبي** ولكن ليس من الإسفنجيات الأولية، كما أن بعضها يأتي من **الصفيحة القاعدية**.</p>
  <p class="incorrect">❌ Incorrect – Oligodendrocytes develop from **neuroepithelial progenitor cells**, especially in the **ventral neural tube**, not strictly from primary spongioblasts.</p>
  <p class="incorrect">❌ Faux – Les oligodendrocytes proviennent des **progéniteurs neuroépithéliaux** du tube neural, pas directement des spongioblastes primaires.</p>
</div>

<div class="option-block">
  <p class="proposal">D. Les cellules de Schwann dérivent des crêtes neurales<br>
  D. Schwann cells derive from the neural crest<br>
  D. خلايا شوان تنشأ من القمة العصبية</p>
  <p class="correct">✅ صحيح – خلايا شوان مثل معظم خلايا الجهاز العصبي المحيطي مشتقة من خلايا القمة العصبية.</p>
  <p class="correct">✅ Correct – Schwann cells arise from **neural crest cells**, as do many PNS components.</p>
  <p class="correct">✅ Correct – Les cellules de Schwann dérivent effectivement des **crêtes neurales**.</p>
</div>

<div class="option-block">
  <p class="proposal">E. La spina bifida est une malformation congénitale due au non fermeture du neuropore postérieur du tube neural<br>
  E. Spina bifida is a congenital malformation due to the failure of closure of the posterior neuropore<br>
  E. السبينابيفيدا هو تشوه خلقي بسبب عدم انغلاق الثقبة العصبية الخلفية</p>
  <p class="correct">✅ صحيح – السبينابيفيدا تحدث عندما لا يُغلق الطرف الخلفي للأنبوب العصبي كما ينبغي.</p>
  <p class="correct">✅ Correct – Spina bifida results from **failure of closure of the caudal (posterior) neuropore**.</p>
  <p class="correct">✅ Correct – La spina bifida est causée par **la non fermeture du neuropore postérieur**.</p>
</div>





`,

    detailedExplanation: `

<div class="lesson-summary" style="text-align: center; padding: 20px; margin-bottom: 20px;">
    <div id="animated-box" style="
        display: inline-block;
        padding: 15px 25px;
        background-color: #4CAF50;
        color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        font-size: 1.2em;
        font-weight: bold;
        animation: pulse 2s infinite;
    ">
        <span>🔻 شروحات مفصلة قريبا 🔻</span>
    </div>
</div>

<!-- نضيف الـ keyframes بشكل مستقل -->
<style>
@keyframes pulse {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}
</style>


    `,
    
    
    timeSpent: 0,
   type: "single"
  },










  
  {
    text: "مارايك في المقاومة  هل هي واجبة ؟",
    options: [
     " نعم في حالة توفر الامور",
     " نعم ونوفر لها الاسباب",
     " كلا الحياة مهما كانت   افضل ",
     " كلا الحياة مهما كانت   افضل ",
     " ليست خيار جميل "
    ],
    correct: [1],
    explanation:  " قريبا ",

    timeSpent: 0,
    type: "single"
  },







  
  
  {
    text: " ماهو اخر الكتب السماوية الذي انزل على خاتم الرسل والانبياء محمد صلى الله عليه وسلم  ؟",
    options: [
     "الزابور",
     " التوراة ",
     "  صحف ابراهيم  ",
     " الانجيل ",
     " القران الكريم  "
    ],
    correct: [4],
    explanation:  " قريبا ",

    timeSpent: 0,
    type: "single"
  },




  
  {
    text: "في أي عام هجري ولد النبي محمد صلى الله عليه وسلم؟",
    options: [
     "عام 570",
    "عام 510",
     "عام 590",
     "عام 600",
  
    ],
    correct: [1],
    explanation:  " النبي الامين المصطفى الرسول  محمد صلى الله عليه وسلم وُلد في عام 570 ميلادي. ",

    timeSpent: 0,
    type: "single"
  },

  {
    text: "ما هو اسم أطول سورة في القرآن؟",
    options: [
      "سورة البقرة",
      "سورة آل عمران ",
      "سورة النحل",
      "سورة البقرة"
    ],
    correct: [0],
    explanation: "الميلاتونين هو الهرمون المسؤول عن تنظيم دورة النوم والاستيقاظ، حيث يفرز من الغدة الصنوبرية في الدماغ استجابة للظلام.",
    image: "images/melatonin.jpg",
    timeSpent: 0,
    type: "single"
  },






  {
    text: "الصلاة ؟",
    options: [
      "واجب على كل مسلم قادر بالغ دون موانع شرعية كالحيض او الجنابة علما ان على الرجل المسارعة بالاغتسال ولا يعذر المسلم نفسه  بارتكابه الذنوب وكثرث انتكاسته خيفة ان يكو منافقا وفكرة النفاق هنا من عمل الشياطين سواء الجن او الانس فلا تهلك نفسك",
      "يمكن تاجيلها وجمعها عادي المهم قضاءها ولو لم يوجد مانع شرعي صحيح",
      "لا يجب على مرتكبي الذنوب او المدخنين او مرتكبي الفاحشة هاداهم الله وغفر الله لهم ان يصلو فان صلو كانو من اهل نفاق",
      "الصلاة تخص الراشدين والمستقرين ماديا ونفسيا    ولا يلام المراهقين عليها"
    ],
    correct: [0],
    explanation: `
    <div style="font-family: 'Arial', sans-serif; background-color: #ffffff; border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); max-width: 500px; padding: 24px; line-height: 1.8; text-align: right; direction: rtl; margin: auto;">
  <h1 style="color: #2c3e50; font-size: 24px; margin-bottom: 16px; text-align: center;">الصَّلاة</h1>
  <p style="margin: 8px 0; font-size: 18px; color: #333;"><strong>لُغةً:</strong> الدُّعاءُ</p>
  <p style="margin: 8px 0; font-size: 18px; color: #333;"><strong>اصطلاحًا:</strong> التعبُّدُ للهِ تعالى بأقوالٍ وأفعالٍ مخصوصةٍ، مُفتَتَحةٍ بالتَّكبيرِ، مُختَتَمةٍ بالتَّسليمِ.</p>
</div>



<div class="reference" style="font-family: Arial, sans-serif; margin-top: 20px;">
    <p><strong>المصدر:</strong> <a href="https://dorar.net/feqhia/672/%D8%A7%D9%84%D9%85%D8%A8%D8%AD%D8%AB-%D8%A7%D9%84%D8%A3%D9%88%D9%84-%D8%AA%D8%B9%D8%B1%D9%8A%D9%81-%D8%A7%D9%84%D8%B5%D9%84%D8%A7%D8%A9" target="_blank">
        الدرر السنية - المبحث الأول: تعريف الصلاة
    </a></p>
</div>

<p><strong>السؤال:</strong><br>
ما الحكم في رجل يذنب في الخلوات ويتوب، ويعود للذنب، ويتوب مرارا، ويحفظ أجزاءً من القرآن الكريم، بل ويصلي بالناس في بعض الأوقات، فهل يترك إمامة الناس حتى يقلع عن هذا الذنب القبيح، علماً بأنه قد يكون هو الأولى بالإمامة في بعض الأوقات؛ لحفظه، أو لقراءته؟</p>

<p><strong>الجواب:</strong><br>
الحمد لله، والصلاة والسلام على رسول الله، وبعد:</p>

<p><strong>أولاً:</strong></p>

<p>إذا كان مثل هذا الشخص أهلاً للإمامة، ويغلب على ظنه أنه أكثرهم قرآناً وأتقنهم له، وأعلمهم بأحكام الصلاة وما ينوبها من الحوادث؛ فالأفضل أن يتقدم للإمامة.</p>

<blockquote>
<p>عن أبي مسعود الأنصاري، قال: قال رسول الله ﷺ: <em>"يؤم القوم أقرؤهم لكتاب الله، فإن كانوا في القراءة سواء، فأعلمهم بالسنة، فإن كانوا في السنة سواء، فأقدمهم هجرة..."</em> رواه مسلم (673).</p>

<p>وعن أبي سعيد الخدري، قال: قال رسول الله ﷺ: <em>"إذا كانوا ثلاثة فليؤمهم أحدهم، وأحقهم بالإمامة أقرؤهم"</em> رواه مسلم (672).</p>
</blockquote>

<p>قال الخطابي رحمه الله تعالى:</p>

<blockquote>
<p>"وهذا هو الصحيح المستقيم في الترتيب؛ وذلك أنه جعل صلى الله عليه وسلم ملاك أمر الإمامة القراءة، وجعلها مقدمة على سائر الخصال المذكورة معها... ثم تلا القراءة بالسنة؛ وهي الفقه، ومعرفة أحكام الصلاة، وما سنّه رسول الله صلى الله عليه وسلم فيها وبيّنه من أمرها، فإن الإمام إذا كان جاهلاً بأحكام الصلاة، وبما يعرض فيها من سهو، ويقع من زيادة ونقصان: أفسدها، أو أخرجها؛ فكان العالم بها، والفقيه فيها: مقدماً على من لم يجمع علمها، ولم يعرف أحكامها.</p>

<p>ومعرفة السنة وإن كانت مؤخرة في الذكر، وكانت القراءة مبدوءاً بذكرها؛ فإن الفقيه العالم بالسنة، إذا كان يقرأ من القرآن ما يجوز به الصلاة: أحق بالإمامة من الماهر بالقراءة، إذا كان متخلفاً عن درجته في علم الفقه ومعرفة السنة..."</p>
</blockquote>

<p>انتهى من <em>معالم السنن</em> (1 / 166 - 167).</p>

<p>وراجع لمزيد الفائدة جواب السؤال رقم: (1875).</p>
<div class="islamic-fatwa">
    <div class="fatwa-content">
        <p class="arabic-text">وما عند هذا الشخص من ذنوب ، يعاودها ؛ ليس الطريق فيها أن يدع الإمامة ؛ فإن "مشكلته" ليست مع "الإمامة" ، بل مع "الذنوب" ، والواجب عليه أن يدع "الذنوب" ، ويتوب إلى علام الغيوب منها ، وليس أن يدع الإمامة ، التي هي من أعمال الخير والبر .</p>

        <div class="warning-note">
            <p class="arabic-text">ومن حيل الشيطان ، وكيده الخفي ، لصد الناس عن فعل الخيرات : أن يذكره بذنب ، هو حقه ألا ينساه ، وحقه ألا يعود إليه ، بل يندم عليه ، ويتوب إلى الله منه .</p>
            
            <p class="arabic-text">لكن حيلة الشيطان : أن يصده به عن فعل الخيرات ، كما فعل بهذا الشخص ، فيقول له : لا يليق بمن يصلي بالناس إماما ، أن يفعل كذا ، وكذا ، وقبيح منه أن يكون على هذه الحال ، وشنيع بالإمام : أن يكون هكذا !!</p>
            
            <p class="arabic-text">وهذا كله حق ؛ لكن أراد به الباطل : أن يصده عن الصلاة بالناس ، ودعوتهم للخير ، وأمرهم بالمعروف ، ونهيهم عن المنكر ، بل ربما صده بذلك عن الجماعات ، وعن كثير من أبواب الخير، ونوافل الطاعات !!</p>
        </div>

        <div class="important-note">
            <p class="arabic-text">والواجب على العبد أن ينصح لنفسه ، ومتى ما انتبه إلى هذه الشناعة ، أن يدع الذنب الذي يلم به ، ويعتاده ، ويتوب إلى الله رب العالمين ، الرحمن الرحيم من تلك القبائح ؛ ثم لا يدع شيئا من الخير عمله لله ، وإن احتال له الشيطان بما احتال به ، وإن ذكره بذنبه ، وإن عيره به ، وقبحه له ؛ فلا يجمع بين فعل الذنب ، أن يترك بابا من الخير ؛ فإن الحسنات يذهبن السيئات ، والقبائح ، والذنوب : لا تحبط أعمال الخير ، بعامة ؛ فليحذر العبد من هذا الكيد الخفي .</p>
        </div>

        <div class="quran-verse">
            <p>وأما قول الله تعالى : <span class="verse">أَتَأْمُرُونَ النَّاسَ بِالْبِرِّ وَتَنْسَوْنَ أَنْفُسَكُمْ وَأَنْتُمْ تَتْلُونَ الْكِتَابَ أَفَلَا تَعْقِلُونَ</span> البقرة/44 ، فالمراد به ما قدمناه : أنه قبيح بمن يأمر الناس بالخير ، ويرشدهم إليه : ألا يكون أول من يسارع إليه ، ويسبقهم إلى فعله .</p>
        </div>

        <div class="scholar-quote">
            <p class="quote-title">قال الإمام ابن كثير رحمه الله :</p>
            <blockquote>
                <p>" يقول تعالى: كيف يليق بكم -يا معشر أهل الكتاب، وأنتم تأمرون الناس بالبر، وهو جماع الخير-أن تنسوا أنفسكم، فلا تأتمروا بما تأمرون الناس به، وأنتم مع ذلك تتلون الكتاب، وتعلمون ما فيه على من قصر في أوامر الله؟ أفلا تعقلون ما أنتم صانعون بأنفسكم؛ فتنتبهوا من رقدتكم، وتتبصروا من عمايتكم. وهذا كما قال عبد الرزاق عن معمر، عن قتادة في قوله تعالى: أتأمرون الناس بالبر وتنسون أنفسكم قال: كان بنو إسرائيل يأمرون الناس بطاعة الله وبتقواه، وبالبر، ويخالفون، فعيرهم الله، عز وجل. وكذلك قال السدي.</p>
                
                <p>وقال ابن جريج: أتأمرون الناس بالبر أهل الكتاب والمنافقون كانوا يأمرون الناس بالصوم والصلاة، ويدعون العمل بما يأمرون به الناس، فعيرهم الله بذلك، فمن أمر بخير فليكن أشد الناس فيه مسارعة..." .</p>
            </blockquote>
            
            <p class="arabic-text">ثم قال :</p>
            <blockquote>
                <p>" والغرض : أن الله تعالى ذمهم على هذا الصنيع ، ونبههم على خطئهم في حق أنفسهم، حيث كانوا يأمرون بالخير ولا يفعلونه .</p>
                
                <p>وليس المراد ذمهم على أمرهم بالبر، مع تركهم له ، بل على تركهم له، فإن الأمر بالمعروف معروف ، وهو واجب على العالم، ولكن الواجب والأولى بالعالم : أن يفعله ، مع أمرهم به، ولا يتخلف عنهم، كما قال شعيب، عليه السلام: وما أريد أن أخالفكم إلى ما أنهاكم عنه إن أريد إلا الإصلاح ما استطعت وما توفيقي إلا بالله عليه توكلت وإليه أنيب [هود: 88] .</p>
                
                <p>فكل من الأمر بالمعروف وفعله : واجب، لا يسقط أحدهما بترك الآخر، على أصح قولي العلماء من السلف والخلف.</p>
                
                <p>وذهب بعضهم إلى أن مرتكب المعاصي لا ينهى غيره عنها ؟</p>
                <p>وهذا ضعيف . وأضعف منه : تمسكهم بهذه الآية؛ فإنه لا حجة لهم فيها.</p>
                
                <p>والصحيح : أن العالم يأمر بالمعروف، وإن لم يفعله، وينهى عن المنكر، وإن ارتكبه .</p>
                
                <p>قال مالك ، عن ربيعة: سمعت سعيد بن جبير يقول له: لو كان المرء لا يأمر بالمعروف ولا ينهى عن المنكر، حتى لا يكون فيه شيء ؛ ما أمر أحد بمعروف ، ولا نهى عن منكر.</p>
                
                <p>وقال مالك ، وصدق : من ذا الذي ليس فيه شيء؟</p>
                
                <p>قلت : ولكنه -والحالة هذه-مذموم على ترك الطاعة ، وفعله المعصية، لعلمه بها ، ومخالفته على بصيرة، فإنه ليس من يعلم ، كمن لا يعلم؛ ولهذا جاءت الأحاديث في الوعيد على ذلك ... " انتهى من "تفسير ابن كثير" (1/246-247) .</p>
            </blockquote>
        </div>

        <div class="conclusion">
            <p class="arabic-text">فالعقل ، والحكمة ، والشرع في حق هذا الشخص : أن يتوب من ذنبه هذا ، بل من ذنوبه كلها ، وأن يجاهد نفسه على ذلك ، وينهى نفسه عن هواها ، ويغلق عنها أبواب الشر والعصيان ، ويعظم مقام ربه ؛ ثم لا يتأخر عن مقام الإمامة ، متى كان أولى الناس بها ، بحسب أمر الشر ؛ لا سيما إن كان إن تركها ، لم يقم بحقها من كان قارئا ، حسن الصلاة ، مؤهلا لإمامة الناس ، كما هو الواقع في كثير من الأحيان .</p>
            
            <p class="arabic-text">وينظر حول ذنوب الخلوات والتوبة منها : جواب السؤال رقم : (134211) .</p>
            
            <p class="arabic-text">والله أعلم .</p>
        </div>
    </div>
</div>

<style>
    .islamic-fatwa {
        font-family: 'Traditional Arabic', 'Arial', sans-serif;
        line-height: 1.8;
        color: #333;
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        background-color: #f9f5e9;
        border: 1px solid #e1d8c0;
        border-radius: 5px;
    }
    
    .arabic-text {
        font-size: 1.1em;
        text-align: right;
        margin-bottom: 15px;
    }
    
    .warning-note {
        background-color: #fff3f3;
        padding: 15px;
        border-right: 4px solid #ff6b6b;
        margin: 15px 0;
        border-radius: 0 5px 5px 0;
    }
    
    .important-note {
        background-color: #f0f7ff;
        padding: 15px;
        border-right: 4px solid #4dabf7;
        margin: 15px 0;
        border-radius: 0 5px 5px 0;
    }
    
    .quran-verse {
        font-size: 1.2em;
        color: #1864ab;
        padding: 10px;
        margin: 15px 0;
        text-align: center;
        background-color: #f3f9ff;
        border-radius: 5px;
    }
    
    .verse {
        font-weight: bold;
        color: #0b5394;
    }
    
    .scholar-quote {
        margin: 20px 0;
    }
    
    .quote-title {
        font-weight: bold;
        color: #5f3dc4;
    }
    
    blockquote {
        background-color: #f8f9fa;
        padding: 15px;
        border-left: 4px solid #5f3dc4;
        margin: 10px 0;
        border-radius: 5px 0 0 5px;
    }
    
    .conclusion {
        margin-top: 25px;
        padding-top: 15px;
        border-top: 1px dashed #ccc;
    }
</style>


<div class="reference" style="font-family: Arial, sans-serif; margin-top: 20px;">
    <p><strong>المصدر:</strong> <a href="https://m.islamqa.info/ar/answers/287746/%D9%8A%D8%B0%D9%86%D8%A8-%D9%81%D9%8A-%D8%A7%D9%84%D8%AE%D9%84%D9%88%D8%A7%D8%AA-%D8%8C-%D9%88%D9%8A%D8%B5%D9%84%D9%8A-%D8%A8%D8%A7%D9%84%D9%86%D8%A7%D8%B3-%D8%A7%D9%85%D8%A7%D9%85%D8%A7-!?traffic_source=main_islamqa" target="_blank">
        الإسلام سؤال وجواب - يذنب في الخلوات، ويصلي بالناس إمامًا
    </a></p>
</div>















<div class="fatwa-container">
    <div class="question-section">
        <h2 class="question-title">السؤال</h2>
        <p class="question-text">سؤالي هو: هل إذا كان الإنسان المسلم يعلم أن هذا الشيء الذي يفعله حرام أو مكروه كسماع الأغاني وما شابه ومع ذلك يفعله يعتبر نوعا من النفاق. أو ببساطة شديدة إذا كان المسلم يعلم أن شيئاً ما حرام ويفعله مع علمه بأنه حرام. فهل يعتبر هذا من النفاق؟</p>
    </div>

    <div class="answer-section">
        <h2 class="answer-title">الإجابــة</h2>
        
        <div class="answer-content">
            <p class="opening">الحمد لله، والصلاة والسلام على رسول الله، وعلى آله وصحبه، أما بعد:</p>
            
            <div class="main-answer">
                <p>فإن وقوع المسلم في المعصية أو المخالفة الشرعية لا يلزم منه بالضرورة أن يكون منافقا.</p>
                <p>فالمعاصي تقع من المؤمن والمنافق والبر والفاجر، فالمؤمن مع إيمانه بالله واليوم الآخر.. ومع معرفته بأن معصية الله تؤدي إلى سخطه وعقوبته.. يقع منه الذنب، وتبدر منه المعصية على حين غفلة وفي ساعة ضعف وشهوة..، وكل ابن آدم خطاء، وخير الخطائين التوابون، وهذا هو الفرق بين المؤمن والمنافق، فالمؤمن يخاف من الذنب ويتوب منه.</p>
                
                <div class="hadith-box">
                    <p class="hadith-text">والمنافق لا يبالي بذنبه ولا يهتم به كما قال ابن مسعود رضي الله عنه: المؤمن يرى ذنوبه كأنه قاعد تحت جبل يخاف أن يقع عليه، وإن المنافق يرى ذنوبه كذباب مر بأنفه فقال به هكذا. أي هشه وأزاحه بيده. رواه البخاري.</p>
                </div>
            </div>
            
            <div class="references">
                <p class="ref-title">وللمزيد من الفائدة انظر الفتاوى التالية أرقامها:</p>
                <p class="ref-numbers">128824، 54604،20440.</p>
            </div>
        </div>
    </div>
</div>

<style>
    .fatwa-container {
        font-family: 'Traditional Arabic', 'Arial', sans-serif;
        max-width: 800px;
        margin: 20px auto;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
        overflow: hidden;
    }
    
    .question-section {
        padding: 20px;
        background-color: #f8f9fa;
        border-bottom: 1px solid #eee;
    }
    
    .question-title {
        color: #2c3e50;
        font-size: 1.4em;
        margin-bottom: 10px;
        text-align: right;
    }
    
    .question-text {
        font-size: 1.1em;
        line-height: 1.7;
        color: #333;
        text-align: right;
    }
    
    .answer-section {
        padding: 20px;
    }
    
    .answer-title {
        color: #27ae60;
        font-size: 1.4em;
        margin-bottom: 15px;
        text-align: right;
    }
    
    .answer-content {
        line-height: 1.8;
    }
    
    .opening {
        color: #7f8c8d;
        font-style: italic;
        text-align: right;
        margin-bottom: 20px;
    }
    
    .main-answer {
        text-align: right;
        font-size: 1.1em;
        margin-bottom: 20px;
    }
    
    .hadith-box {
        background-color: #f5f9fc;
        padding: 15px;
        border-right: 4px solid #3498db;
        margin: 15px 0;
        border-radius: 0 5px 5px 0;
    }
    
    .hadith-text {
        font-weight: bold;
        color: #2980b9;
    }
    
    .references {
        margin-top: 25px;
        padding-top: 15px;
        border-top: 1px dashed #ddd;
        text-align: right;
    }
    
    .ref-title {
        color: #7f8c8d;
        font-size: 0.9em;
    }
    
    .ref-numbers {
        color: #e74c3c;
        font-weight: bold;
    }
</style>

<div class="reference" style="font-family: Arial, sans-serif; margin-top: 20px;">
    <p><strong>المصدر:</strong> <a href="https://www.islamweb.net/ar/fatwa/139009/%D8%A7%D9%84%D9%85%D8%B3%D9%84%D9%85-%D8%A7%D9%84%D8%B0%D9%8A-%D9%8A%D9%82%D8%AA%D8%B1%D9%81-%D8%A7%D9%84%D9%85%D8%B9%D8%A7%D8%B5%D9%8A-%D9%87%D9%84-%D9%8A%D8%B5%D9%8A%D8%B1-%D9%85%D9%86%D8%A7%D9%81%D9%82%D8%A7" target="_blank">
        إسلام ويب - المسلم الذي يقترف المعاصي هل يصير منافقًا؟
    </a></p>
</div>


    `,
    timeSpent: 0,
    type: "single"
  },




  {
    text: "فصل العمل وطلب العلم على دين الاسلام",
    options: [
      "لا يمكن فشرع الله يطبق ولو اذنبت فذنبك حاضر عليك اقرار به والاستغفار له لا ان تنفي ذنبك",
      "يمكن في بعض الحالات فلا يجب التطرق الى دين الاسلام اثناء العمل او طلب العلم",
      "قليلا يمكن فصله",
      "نسسبا الامر معقد لكن ربما في بعض احيان وحالات يمكن تجاهله خوفا من فقدان وظيفة او مال وان فعل الامر وكانت الحالة  ليس بالامر الكبير لا يجب التوبة"
    ],
    correct: [0],
    explanation:  `
    
    
    
    
    <div class="islamic-fatwa">
    <div class="fatwa-header">
        <h2>السؤال:</h2>
        <p>يقول: نسمع بعض الكلمات تتردد من بعض المسؤولين، يقول: إن العمل عمل، ولا دخل للدِّين في العمل؟</p>
    </div>

    <div class="fatwa-content">
        <h2 class="answer-title">الجواب:</h2>
        
        <div class="answer-text">
            <p>هذا كلامٌ باطلٌ، كيف ما له دخل في العمل؟! الدِّين هو كل شيءٍ، له دخلٌ في كل شيء: في أعمال الناس، وفي بيوتهم، وفي رئاستهم، وفي إمارتهم، وفي كل شيء، فالدِّين هو أصل كل شيءٍ، ويجب أن تكون الأعمال كلها على منهاج الدين، فيجب أن يُسْلِم العبدُ وجهَه لله في جميع الأمور:</p>
            
            <div class="quran-verse">
                <p>يَا أَيُّهَا الَّذِينَ آمَنُوا ادْخُلُوا فِي السِّلْمِ كَافَّةً [البقرة:208]</p>
            </div>
            
            <p>يعني: في الإسلام جميعه، يجب الدخول في الإسلام جميعًا، وأن يتقيَّد بالإسلام في كل شيءٍ، ولا يجوز التَّملص في أي عملٍ، ولا في أي قولٍ، يجب أن تُوزن الأقوال والأعمال من الرؤساء والمرؤوسين، والرجال والنّساء، والجن والإنس؛ يجب أن تُوزن بميزان الشرع، فما وافقه أُخذ به، وما خالفه رُدَّ على قائله.</p>
            
            <div class="important-note">
                <p>والذي يقول: "ما للدين دخلٌ بالأعمال" يُستتاب، فإن تاب وإلا قُتل كافرًا -نسأل الله العافية.</p>
            </div>
        </div>
        
        <div class="fatwa-footer">
            <h3>مسائل فقهية متفرقة</h3>
            <div class="reference">
                <p><strong>المصدر:</strong> <a href="https://binbaz.org.sa/fatwas/30113/%D9%85%D8%A7-%D8%AD%D9%83%D9%85-%D9%82%D9%88%D9%84-%D9%84%D8%A7-%D8%AF%D8%AE%D9%84-%D9%84%D9%84%D8%AF%D9%8A%D9%86-%D9%81%D9%8A-%D8%A7%D9%84%D8%B9%D9%85%D9%84" target="_blank">
                    الموقع الرسمي لسماحة الشيخ ابن باز - ما حكم قول "لا دخل للدين في العمل"؟
                </a></p>
            </div>
        </div>
    </div>
</div>

<style>
    .islamic-fatwa {
        font-family: 'Traditional Arabic', 'Arial', sans-serif;
        max-width: 800px;
        margin: 20px auto;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
        overflow: hidden;
        direction: rtl;
    }
    
    .fatwa-header {
        padding: 20px;
        background-color: #f8f9fa;
        border-bottom: 1px solid #eee;
    }
    
    .fatwa-header h2 {
        color: #2c3e50;
        font-size: 1.4em;
        margin-bottom: 10px;
    }
    
    .fatwa-header p {
        font-size: 1.1em;
        line-height: 1.7;
        color: #333;
    }
    
    .fatwa-content {
        padding: 20px;
    }
    
    .answer-title {
        color: #27ae60;
        font-size: 1.4em;
        margin-bottom: 15px;
    }
    
    .answer-text {
        font-size: 1.1em;
        line-height: 1.8;
        color: #333;
        margin-bottom: 20px;
    }
    
    .quran-verse {
        font-size: 1.2em;
        color: #1864ab;
        padding: 10px;
        margin: 15px 0;
        text-align: center;
        background-color: #f3f9ff;
        border-radius: 5px;
        font-weight: bold;
    }
    
    .important-note {
        background-color: #fff3f3;
        padding: 15px;
        border-right: 4px solid #e74c3c;
        margin: 15px 0;
        border-radius: 0 5px 5px 0;
        font-weight: bold;
    }
    
    .fatwa-footer {
        margin-top: 30px;
        padding-top: 15px;
        border-top: 1px dashed #ddd;
    }
    
    .fatwa-footer h3 {
        color: #7f8c8d;
        font-size: 1.1em;
        margin-bottom: 10px;
    }
    
    .reference {
        font-size: 0.9em;
        color: #555;
    }
    
    .reference a {
        color: #3498db;
        text-decoration: none;
    }
    
    .reference a:hover {
        text-decoration: underline;
    }
</style>


    `,
    timeSpent: 0,
    type: "single"
  },










  {
    text: "الدعوة الى الله و نشر السنة و النصح والارشاد   ",
    options: [
      "الدعوة والنصح واجب على كل مسلم بالغ قادر بما  استطاع تبريرا ذمته امام الله    فلا يعذر المنتكس بل عليه السعي تعويضا  لما فاته من حسنات  وتكفيرا  لما عليه  من سيئات   ",
       "تختص الصالحين  وعلى  مرتكبي الذنوب  تركها  ولو وضعوا بوقف لهم علم به  عليهم ترك محاولة النصح   ",
      "     تختص فقط بشيوخ  والائمة وولاة الامور  واصحاب الجاه والمال   ",
      "ما كان شان العوام يوما  شان رواد المساجد ",
      "نتوبة"
    ],
    correct: [0],
    explanation:  `
    
    
    

  ما حكم الدعوة إلى الله؟

الإجابــة
الحمد لله، والصلاة والسلام على رسول الله، وعلى آله وصحبه، أما بعد:

فإن الدعوة إلى الله تعالى واجبة على عموم الأمة وجوباً كفائيًا وواجبة وجوباً عينيًا على كل فرد من المسلمين بحسب استطاعته وقدر علمه، قال النبي صلى الله عليه وسلم: بلغوا عني ولو آية. رواه البخاري، هذا هو القول الراجح أن الدعوة واجبة على كل فرد بحسبه.
وذلك لقول الله تعالى آمرًا هذه الأمة بالدعوة إليه سبحانه: وَلْتَكُنْ مِنْكُمْ أُمَّةٌ يَدْعُونَ إِلَى الْخَيْرِ وَيَأْمُرُونَ بِالْمَعْرُوفِ وَيَنْهَوْنَ عَنِ الْمُنْكَرِ وَأُولَئِكَ هُمُ الْمُفْلِحُونَ [آل عمران:104].
واختلف أهل التفسير في "منكم" هذه هل هي للتبعيض أم لبيان الجنس، ورجح الطبري والقرطبي وابن كثير أنها للتبعيض، قال القرطبي 4/165: ومن في قوله "منكم" للتبعيض ومعناه أن الآمرين يجب أن يكونوا علماء وليس كل الناس علماء، وقيل: لبيان الجنس، والمعنى: لتكونوا كلكم كذلك، قلت: القول الأول أصح، فإنه يدل على أن الأمر بالمعروف والنهي عن المنكر فرض على الكفاية. انتهى.
ويمكن الجمع بين القولين بأن انتصاب طائفة من المسلمين وتفرغهم للدعوة والأمر بالمعروف والنهي عن المنكر فرض كفاية على الأمة، وأن قيام كل فرد بالدعوة والأمر بالمعروف والنهي عن المنكر بحسب قدرته فرض عين، قال الله تعالى: وَمَا كَانَ الْمُؤْمِنُونَ لِيَنْفِرُوا كَافَّةً فَلَوْلا نَفَرَ مِنْ كُلِّ فِرْقَةٍ مِنْهُمْ طَائِفَةٌ لِيَتَفَقَّهُوا فِي الدِّينِ وَلِيُنْذِرُوا قَوْمَهُمْ إِذَا رَجَعُوا إِلَيْهِمْ لَعَلَّهُمْ يَحْذَرُونَ [التوبة:122].
قال الحافظ ابن كثير في تفسير الآية السابقة من سورة آل عمران 1/391: والمقصود من هذه الآية أن تكون فرقة من هذه الأمة متصدية لهذا الشأن وإن كان ذلك واجباً على كل فرد من الأمة بحسبه كما ثبت في صحيح مسلم عن أبي هريرة قال: قال رسول الله صلى الله عليه وسلم: من رأى منكم منكراً فليغيره بيده، فإن لم يستطع فبلسانه، فإن لم يستطع فبقلبه، وذلك أضعف الإيمان. وفي رواية: وليس وراء ذلك من الإيمان حبة خردل. انتهى.
والله أعلم.



<div class="reference" style="font-family: Arial, sans-serif; margin-top: 20px;">
    <p><strong>المصدر:</strong> <a href="https://www.islamweb.net/ar/fatwa/29987/%D8%A7%D9%84%D8%AF%D8%B9%D9%88%D8%A9-%D8%A5%D9%84%D9%89-%D8%A7%D9%84%D9%84%D9%87-%D9%88%D8%A7%D8%AC%D8%A8%D8%A9-%D8%B9%D9%84%D9%89-%D9%83%D9%84-%D9%81%D8%B1%D8%AF-%D8%A8%D8%AD%D8%B3%D8%A8%D9%87" target="_blank">
        إسلام ويب - الدعوة إلى الله واجبة على كل فرد بحسبه
    </a></p>
</div>

    `,
    timeSpent: 0,
    type: "single"
  },















  

  {
    text: "نصرة المسلمين     ",
    options: [
      "   وقد كان الواجب على من رأى الحادثة أن ينكر على الظالم، ويحجزه عن الظلم بحسب استطاعته، وينصر المظلوم   ,فالمسلم أخو المسلم، يجب عليه أن ينصره في الوقت الذي يحتاج فيه إلى مناصرته",
       "تخص اغنياء  واصحاب المال والجاه    ",
      "    لا يجب الحديث في مثل هذه الامور      ",
      " حسب النفسية فان عرفته من معارف وصحاب نصرته  وان لم يكن خذلته   ",
      "  لا يجب ان احشر نفسي في ما لا يعنيني  "
    ],
    correct: [0],
    explanation:  `
    
    <div class="fatwa-container">
    <div class="question-section">
        <h2 class="question-title">السؤال</h2>
        <p class="question-text">ما حكم كل من لا ينصر المسلمين المستضعفين في كل البلاد الإسلامية خاصة البلدان التي فيها كثير من الظلم والحروب، ونحن نرى كيف تنتهك حرماتهم وتستباح دماؤهم وأعراضهم ويّقتل أطفالهم ليل نهار أمام أعين العالم أجمع ولا أحد يحرك ساكناً مع أن قتل المؤمن عند الله جل وعلا أعظم من هدم الكعبة؟ فما بالنا لا ننتصر لإخواننا؟</p>
    </div>

    <div class="answer-section">
        <h2 class="answer-title">الإجابــة</h2>
        
        <div class="answer-content">
            <p class="opening">الحمد لله، والصلاة والسلام على رسول الله، وعلى آله وصحبه، أما بعد:</p>
            
            <div class="main-answer">
                <p>فالمسلم أخو المسلم، يجب عليه أن ينصره في الوقت الذي يحتاج فيه إلى مناصرته، لما في حديث الصحيحين:</p>
                
                <div class="hadith-box">
                    <p class="hadith-text">انصر أخاك ظالماً أو مظلوماً، فقال رجل: يا رسول الله أنصره إذا كان مظلوماً أفرأيت إن كان ظالماً كيف أنصره؟ قال: تحجزه أو تمنعه من الظلم فإن ذلك نصره.</p>
                </div>
                
                <p>وفي الصحيحين عن النبي صلى الله عليه وسلم أنه قال:</p>
                
                <div class="hadith-box">
                    <p class="hadith-text">المسلم أخو المسلم، لا يظلمه ولا يسلمه، ومن كان في حاجة أخيه كان الله في حاجته، ومن فرج عن مسلم كربة فرج الله عنه كربة من كربات يوم القيامة، ومن ستر مسلماً ستره الله يوم القيامة.</p>
                </div>
                
                <p>وقال رسول الله صلى الله عليه وسلم:</p>
                
                <div class="hadith-box">
                    <p class="hadith-text">ترى المؤمنين في تراحمهم وتوادهم وتعاطفهم كمثل الجسد إذا اشتكى عضواً تداعى له سائر الجسد بالسهر والحمى. متفق عليه.</p>
                </div>
                
                <p>وروى الإمام أحمد وأبو داود عن جابر بن عبد الله وأبي طلحة بن سهل الأنصاري أنهما قالا: قال رسول الله صلى الله عليه وسلم:</p>
                
                <div class="hadith-box">
                    <p class="hadith-text">ما من امرئ يخذل امرءا مسلما في موضع تنتهك فيه حرمته وينتقص فيه من عرضه إلا خذله الله في موطن يحب فيه نصرته، وما من امرئ ينصر مسلما في موضع ينتقص فيه من عرضه وينتهك من حرمته إلا نصره الله في موطن يحب نصرته.</p>
                </div>
                
                <div class="scholar-quote">
                    <p class="quote-title">قال صاحب عون المعبود:</p>
                    <p class="quote-text">والمعنى ليس أحد يترك نصرة مسلم مع وجود القدرة عليه بالقول أو الفعل عند حضور غيبته أو إهانته أو ضربه أو قتله إلا خذله الله. انتهى.</p>
                </div>
                
                <div class="scholar-quote">
                    <p class="quote-title">وقال شيخ الإسلام ابن تيمية:</p>
                    <p class="quote-text">نصر آحاد المسلمين واجب بقوله صلى الله عليه وسلم: انصر أخاك ظالماً أو مظلوماً ـ وبقوله: المسلم أخو المسلم لا يسلمه ولا يظلمه. انتهى</p>
                </div>
                
                <p>وقد سبق أن ذكرنا بعض طرق نصرة المسلمين المستضعفين, بحسب طاقات وقدرات المسلمين في الفتويين رقم: <span class="fatwa-number">47694</span>، ورقم: <span class="fatwa-number">102373</span>، وما أحيل عليه فيهما.</p>
                
                <p class="closing">والله أعلم.</p>
            </div>
        </div>
    </div>

    <div class="reference-section">
        <p><strong>المصدر:</strong> <a href="https://www.islamweb.net/ar/fatwa/165927/%D9%88%D8%AC%D9%88%D8%A8-%D8%A7%D9%84%D8%A7%D9%86%D8%AA%D8%B5%D8%A7%D8%B1-%D9%84%D9%84%D9%85%D8%B8%D9%84%D9%88%D9%85%D9%8A%D9%86-%D9%88%D8%B3%D8%A8%D9%84-%D9%86%D8%B5%D8%B1%D8%AA%D9%87%D9%85" target="_blank">
            إسلام ويب - وجوب الانتصار للمظلومين وسبل نصرتهم
        </a></p>
    </div>
</div>

<style>
    .fatwa-container {
        font-family: 'Traditional Arabic', 'Arial', sans-serif;
        max-width: 800px;
        margin: 20px auto;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
        overflow: hidden;
        direction: rtl;
    }
    
    .question-section {
        padding: 20px;
        background-color: #f8f9fa;
        border-bottom: 1px solid #eee;
    }
    
    .question-title {
        color: #2c3e50;
        font-size: 1.4em;
        margin-bottom: 10px;
    }
    
    .question-text {
        font-size: 1.1em;
        line-height: 1.7;
        color: #333;
    }
    
    .answer-section {
        padding: 20px;
    }
    
    .answer-title {
        color: #27ae60;
        font-size: 1.4em;
        margin-bottom: 15px;
    }
    
    .answer-content {
        line-height: 1.8;
    }
    
    .opening {
        color: #7f8c8d;
        font-style: italic;
        margin-bottom: 20px;
    }
    
    .main-answer {
        font-size: 1.1em;
    }
    
    .hadith-box {
        background-color: #f5f9fc;
        padding: 15px;
        border-right: 4px solid #3498db;
        margin: 15px 0;
        border-radius: 0 5px 5px 0;
    }
    
    .hadith-text {
        font-weight: bold;
        color: #2980b9;
    }
    
    .scholar-quote {
        margin: 20px 0;
        padding: 10px;
        background-color: #f8f9fa;
        border-right: 3px solid #8e44ad;
    }
    
    .quote-title {
        font-weight: bold;
        color: #5f3dc4;
    }
    
    .quote-text {
        color: #333;
    }
    
    .fatwa-number {
        color: #e74c3c;
        font-weight: bold;
    }
    
    .closing {
        font-weight: bold;
        text-align: center;
        margin-top: 20px;
        color: #7f8c8d;
    }
    
    .reference-section {
        padding: 15px;
        background-color: #f8f9fa;
        border-top: 1px solid #eee;
        font-size: 0.9em;
    }
    
    .reference-section a {
        color: #3498db;
        text-decoration: none;
    }
    
    .reference-section a:hover {
        text-decoration: underline;
    }
</style>







لسؤال
ما واجبى نحو حال المسلمين المعذبين الآن؟

الإجابــة

الحمد لله، والصلاة والسلام على رسول الله، وعلى آله وصحبه، أما بعد:

فإن من واجب الأخت اتجاه إخوانها المضطهدين عدة أمور من أهمها:

1-أن تكثر الدعاء لهم في أوقات الإجابة كآخر الليل وساعة الجمعة، وبين الأذان والإقامة، وعند الإفطار والانتهاء من صلاة الفرض، ففي الحديث دعوة المرء المسلم لأخيه بظهر الغيب مستجابة عند رأسه ملك موكل به كلما دعا لأخيه بخير قال الملك الموكل به: آمين ولك بمثل. رواه مسلم.

ويتعين الإكثار من الدعاء وعدم الملل منه لما في الحديث: يستجاب لأحدكم ما لم يعجل يقول: دعوت فلم يستجب لي. رواه البخاري ومسلم.

2-نصرهم بما تيسر من مال أو غيره، ففي حديث الصحيحين: انصر أخاك ظالماً أو مظلوماً، وفي الحديث: ما من امرئ يخذل امرءا مسلماً في موطن ينتقص فيه من عرضه، وينتهك فيه من حرمته إلا خذله الله في موطن يحب فيه نصرته، وما من أحد ينصر مسلماً في موطن ينتقص فيه من حرمته إلا نصره الله في موطن يحب فيه نصرته. رواه أحمد وأبو داود والضياء في المختارة. وحسنه الألباني في الجامع.

3-التعاطف معهم لما في الحديث: ترى المؤمنين في تراحمهم وتوادهم وتعاطفهم كمثل الجسد إذا اشتكى عضو تداعى له سائر جسده بالسهر والحمى. رواه البخاري.

4-بذل الطاقة في تفريج كربتهم وإعانتهم، ففي الحديث: المسلم أخو المسلم لا يظلمه ولا يسلمه، ومن كان في حاجة أخيه كان الله في حاجته، ومن فرج عن مسلم كربة فرج الله بها عنه كربة من كربات يوم القيامة، ومن ستر مسلماً ستره الله يوم القيامة. رواه البخاري ومسلم.

5-كفالة يتاماهم وأراملهم، ففي الحديث: كافل اليتيم له أو لغيره أنا وهو كهاتين في الجنة. رواه مسلم.

وفي الحديث: الساعي على الأرملة والمسكين كالمجاهد في سبيل الله. رواه مسلم.

6-بذل الوسع والطاقة في توبة واستقامة المتعاطفين معهم من المسلمين على الطاعات حتى تستجاب دعواتهم لهم، وحتى تتوقف أبواب البلاء المفتوحة بسبب معاصي بني آدم، قال تعالى: ظَهَرَ الْفَسَادُ فِي الْبَرِّ وَالْبَحْرِ بِمَا كَسَبَتْ أَيْدِي النَّاسِ(الروم: من الآية41)، وقال تعالى: وَاتَّقُوا فِتْنَةً لا تُصِيبَنَّ الَّذِينَ ظَلَمُوا مِنْكُمْ خَاصَّةً(لأنفال: من الآية25).

7-حرص المرأة المسلمة على تنشئة رجال صالحين يهدون بالحق وبه يعملون وإليه يرشدون، وفي سبيله يحيون ويموتون، كما ربت صفية الزبير، وأسماء بنت أبي بكر عبد الله ابن الزبير، والخنساء أبناءها، وأمهات مالك والشافعي وأحمد وربيعة أبناءهن، فإن وراء كل عظيم امرأة.

والله أعلم.



<div class="reference" style="font-family: Arial, sans-serif; margin-top: 20px;">
    <p><strong>المصدر:</strong> <a href="https://www.islamweb.net/ar/fatwa/47694/%D9%88%D8%A7%D8%AC%D8%A8-%D8%A7%D9%84%D9%85%D8%B3%D9%84%D9%85%D8%A9-%D8%AA%D8%AC%D8%A7%D9%87-%D8%A5%D8%AE%D9%88%D8%A7%D9%86%D9%87%D8%A7-%D8%A7%D9%84%D9%85%D8%B6%D8%B7%D9%87%D8%AF%D9%8A%D9%86" target="_blank">
        إسلام ويب - واجب المسلمة تجاه إخوانها المضطهدين
    </a></p>
</div>


    `,
    timeSpent: 0,
    type: "single"
  },
  {
    text: "انت الان على مستوى",
    options: [
      "أداة علم",
      "S22MCS",
      "أداة",
      "علم"
    ],
    correct: [0,1],
    explanation: "قريبا",
    image: "adatealm/S22MCS BLUE.jpg",
    timeSpent: 0,
    type: "multi"
  }







  // يمكن إضافة المزيد من الأسئلة هنا...
];

// متغيرات التطبيق
let currentQuestionIndex = 0;
let selectedAnswers = [];
let timer;
let timeLeft;
let totalTime = 0;
let quizDuration = 0;
let questionStartTime;
let timePerQuestion = [];
let questions = [];
let quizStarted = false;

// عناصر DOM
const startScreen = document.getElementById("start-screen");
const startBtn = document.getElementById("start-btn");
const quickTestBtn = document.getElementById("quick-test-btn");
const questionContainer = document.getElementById("question-container");
const resultSection = document.getElementById("result-section");
const resultsContainer = document.getElementById("results-container");
const scoreDisplay = document.getElementById("score-display");
const progressBar = document.getElementById("progress-bar");
const questionProgress = document.getElementById("question-progress");
const progressIndicator = document.getElementById("progress-indicator");
const timerElement = document.getElementById("timer");
const totalTimeElement = document.getElementById("total-time");
const averageTimeElement = document.getElementById("average-time");
const fastestTimeElement = document.getElementById("fastest-time");
const slowestTimeElement = document.getElementById("slowest-time");
const backToTopBtn = document.getElementById("back-to-top");
const suggestBtn = document.getElementById("suggest-btn");
const showLessonBtn = document.getElementById("show-lesson-btn");
const infoBtn = document.getElementById("info-btn");
const closePanelBtn = document.getElementById("close-panel");
const infoPanel = document.getElementById("info-panel");

// أحداث
document.addEventListener('DOMContentLoaded', function() {
  startBtn.addEventListener("click", startQuiz);
  quickTestBtn.addEventListener("click", startQuickTest);
  infoBtn.addEventListener("click", toggleInfoPanel);
  closePanelBtn.addEventListener("click", closeInfoPanel);
  showLessonBtn.addEventListener("click", showLessonModal);
  
  // جعل الدوال متاحة عالمياً للاستدعاء من HTML
  window.selectOption = selectOption;
  window.submitAnswer = submitAnswer;
  window.showExplanation = showExplanation;
  window.nextQuestion = nextQuestion;
  window.restartQuiz = restartQuiz;
  window.closeExplanation = closeExplanation;
  window.closeLessonModal = closeLessonModal;
  window.showLessonModal = showLessonModal;
  window.toggleInfoPanel = toggleInfoPanel;
  window.closeInfoPanel = closeInfoPanel;
  window.scrollToTop = scrollToTop;
  
  // التمرير للأعلى
  window.addEventListener('scroll', function() {
    if (window.pageYOffset > 300) {
      backToTopBtn.classList.add('visible');
    } else {
      backToTopBtn.classList.remove('visible');
    }
  });

  backToTopBtn.addEventListener('click', function() {
    scrollToTop();
  });
  
  // إغلاق لوحة المعلومات بالضغط على ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && infoPanel.classList.contains('active')) {
      closeInfoPanel();
    }
  });
  
  // تحميل الصور مسبقاً
  preloadImages();
});

// بدء الاختبار الرئيسي
function startQuiz() {
  const durationInput = parseInt(document.getElementById("custom-duration").value) || 10;
  const questionCount = document.getElementById("question-count").value;
  const shuffleQuestions = document.getElementById("shuffle-questions").checked;
  
  // تحقق من وجود عدد كافي من الأسئلة
  if (questionCount !== "all" && allQuestions.length < parseInt(questionCount)) {
    Swal.fire({
      title: 'خطأ',
      text: `لا يوجد سوى ${allQuestions.length} أسئلة متاحة`,
      icon: 'error'
    });
    return;
  }
  
  quizDuration = durationInput * 60;
  selectedAnswers = [];
  timePerQuestion = [];
  totalTime = 0;
  currentQuestionIndex = 0;
  quizStarted = true;
  
  // اختيار الأسئلة حسب العدد المطلوب
  if (questionCount === "all") {
    questions = [...allQuestions];
    
    // عرض التنبيهات فقط عند اختيار "جميع الأسئلة"
    Swal.fire({
      title: 'تنبيه',
      text: `ستحصل على جميع الأسئلة (${allQuestions.length} سؤالاً)`,
      icon: 'info',
      confirmButtonText: 'حسناً'
    }).then(() => {
      if (shuffleQuestions) {
        questions = shuffleArray(questions);
        Swal.fire("سيتم عرض الأسئلة بترتيب عشوائي");
      }
      startTest();
    });
  } else {
    questions = getRandomQuestions(parseInt(questionCount), shuffleQuestions);
    startTest();
  }
}

// بدء اختبار سريع
function startQuickTest() {
  quizDuration = 5 * 60; // 5 دقائق
  selectedAnswers = [];
  timePerQuestion = [];
  totalTime = 0;
  currentQuestionIndex = 0;
  
  // اختيار 5 أسئلة عشوائية
  questions = getRandomQuestions(5, true);
  startTest();
}

// بدء الاختبار الفعلي
function startTest() {
  startScreen.style.display = "none";
  questionContainer.style.display = "block";
  resultSection.style.display = "none";
  progressIndicator.style.display = "block";
  
  loadQuestion();
  startTimer();
  scrollToTop();
}

function getRandomQuestions(count, shuffle = true) {
  // نسخ جميع الأسئلة
  const shuffled = [...allQuestions];
  
  // خلط الأسئلة إذا طلبنا ذلك
  if (shuffle) {
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
  }
  
  // إرجاع العدد المطلوب من الأسئلة
  return shuffled.slice(0, count);
}

// خلط المصفوفة
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}








// تحميل السؤال
function loadQuestion() {
  if (!questions[currentQuestionIndex]) {
    finishQuiz();
    return;
  }

  const question = questions[currentQuestionIndex];
  questionStartTime = new Date().getTime();
  
  // تحديث شريط التقدم
  const progressPercent = (currentQuestionIndex / questions.length) * 100;
  questionProgress.style.width = `${progressPercent}%`;
  document.getElementById("progress-text").textContent = `السؤال ${currentQuestionIndex + 1} من ${questions.length}`;
  




  // إعداد خيارات الإجابة

  const optionsHTML = question.options.map((option, index) => {
    const isSelected = Array.isArray(selectedAnswers[currentQuestionIndex]) ? 
      selectedAnswers[currentQuestionIndex].includes(index) : 
      selectedAnswers[currentQuestionIndex] === index;
      
    return `
      <li onclick="selectOption(${index})" id="option-${index}" 
          class="option ${isSelected ? 'selected' : ''}" 
          aria-pressed="${isSelected}"
          tabindex="0"
          role="button">
        ${option}
        ${question.correct.includes(index) ? '<span class="correct-mark" style="display: none;"><i class="fas fa-check"></i></span>' : ''}
      </li>
    `;
}).join('');
 

questionContainer.innerHTML = `
  ${question.image ? `
  <div class="question-image">
    <img src="${question.image}" alt="صورة السؤال" loading="lazy">
  </div>` : ''}
  <div class="question-text">
    <p>${question.text}</p>
  </div>
  <ul class="options">
    ${optionsHTML}
  </ul>
  <div style="text-align: center; margin-top: 1.5rem;">
    <button class="btn" onclick="submitAnswer()" id="submit-btn">إرسال الإجابة</button>
    <button class="btn btn-secondary" onclick="showExplanation()" id="explain-btn" style="display: none;">
      <i class="fas fa-lightbulb"></i> شرح الإجابة
    </button>
  </div>
`;

  
  // إضافة إمكانية الاختيار بالضغط على Enter
  document.querySelectorAll('.options li').forEach(option => {
    option.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const index = parseInt(option.id.split('-')[1]);
        selectOption(index);
      }
    });
  });
}





function selectOption(optionIndex) {
  if (!quizStarted) return;

  const question = questions[currentQuestionIndex];
  const optionElement = document.getElementById(`option-${optionIndex}`);
  
  // تأثير اللمس
  optionElement.classList.add("touched");
  setTimeout(() => {
    optionElement.classList.remove("touched");
  }, 200);
  
  if (question.type === "multi") {
    // تبديل التحديد للأسئلة متعددة الإجابات
    optionElement.classList.toggle("selected");
    optionElement.setAttribute("aria-pressed", optionElement.classList.contains("selected"));
    
    // تحديث الإجابات المختارة
    if (!selectedAnswers[currentQuestionIndex]) {
      selectedAnswers[currentQuestionIndex] = [];
    }
    
    const index = selectedAnswers[currentQuestionIndex].indexOf(optionIndex);
    if (index === -1) {
      selectedAnswers[currentQuestionIndex].push(optionIndex);
    } else {
      selectedAnswers[currentQuestionIndex].splice(index, 1);
    }
  } else {
    // الأسئلة المفردة
    const options = document.querySelectorAll(".options li");
    options.forEach((opt, idx) => {
      opt.classList.remove("selected");
      opt.setAttribute("aria-pressed", "false");
    });
    
    optionElement.classList.add("selected");
    optionElement.setAttribute("aria-pressed", "true");
    selectedAnswers[currentQuestionIndex] = optionIndex;
  }
}


// عرض جميع الشروحات
function showAllExplanations() {
  let allExplanations = '<div style="text-align: center; margin-bottom: 1.5rem;">';
  
  questions.forEach((question, index) => {
    allExplanations += `
      <div style="background: white; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3 style="color: var(--primary-color);">السؤال ${index + 1}: ${question.text}</h3>
        <p><strong>الإجابة الصحيحة:</strong> ${question.correct.map(i => question.options[i]).join("، ")}</p>
        <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
          <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">شرح مفصل:</h4>
          ${question.explanation}
          ${question.detailedExplanation || '<p>هذا السؤال يتعلق بمفهوم الهرمونات وكيفية عملها في الجسم.</p>'}
        </div>
        <p><strong>الوقت المستغرق:</strong> ${formatTime(question.timeSpent)}</p>
      </div>
    `;
  });
  
  allExplanations += '</div>';
  
  document.getElementById("long-explanation-title").textContent = "جميع الشروحات المفصلة";
  document.getElementById("long-explanation-text").innerHTML = allExplanations;
  document.getElementById("long-explanation-modal").classList.add("active");
}

window.showAllExplanations = showAllExplanations;

// عرض الشرح الطويل
function showLongExplanation(questionIndex) {
  const question = questions[questionIndex];
  
  document.getElementById("long-explanation-title").textContent = "شرح مفصل للسؤال " + (questionIndex + 1);
  document.getElementById("long-explanation-text").innerHTML = `
    <p><strong>السؤال:</strong> ${question.text}</p>
    <p><strong>الإجابة الصحيحة:</strong> ${question.correct.map(i => question.options[i]).join("، ")}</p>
    <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
      <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">شرح مفصل:</h4>
      ${question.explanation}
      ${question.detailedExplanation || '<p>هذا السؤال يتعلق بمفهوم الهرمونات وكيفية عملها في الجسم.</p>'}
    </div>
    <p><strong>الوقت المستغرق:</strong> ${formatTime(question.timeSpent)}</p>
  `;
  
  document.getElementById("long-explanation-modal").classList.add("active");
}

// إغلاق الشرح الطويل
function closeLongExplanation() {
  document.getElementById("long-explanation-modal").classList.remove("active");
}

// جعل الدوال متاحة عالمياً
window.showLongExplanation = showLongExplanation;
window.closeLongExplanation = closeLongExplanation;

// إرسال الإجابة


function submitAnswer() {
  const question = questions[currentQuestionIndex];
  const endTime = new Date().getTime();
  const timeSpent = Math.floor((endTime - questionStartTime) / 1000);
  
  question.timeSpent = timeSpent;
  timePerQuestion.push(timeSpent);
  totalTime += timeSpent;
  
  const options = document.querySelectorAll(".options li");
  
  if (question.type === "multi") {
    const isCorrect = arraysEqual(selectedAnswers[currentQuestionIndex], question.correct);
    
    options.forEach((option, index) => {
      if (question.correct.includes(index)) {
        option.classList.add("correct");
      } else if (selectedAnswers[currentQuestionIndex] && 
                selectedAnswers[currentQuestionIndex].includes(index)) {
        option.classList.add("incorrect");
      }
    });
  } else {
    options.forEach((option, index) => {
      if (question.correct.includes(index)) {
        option.classList.add("correct");
      } else if (selectedAnswers[currentQuestionIndex] === index) {
        option.classList.add("incorrect");
      }
    });
  }
  
  // تعطيل جميع الخيارات بعد الإجابة
  options.forEach(option => {
    option.style.pointerEvents = "none";
    option.setAttribute("tabindex", "-1");
  });
  
  document.getElementById("submit-btn").style.display = "none";
  document.getElementById("explain-btn").style.display = "inline-block";
}


// التقدم إلى السؤال التالي
function nextQuestion() {
  currentQuestionIndex++;
  
  if (currentQuestionIndex < questions.length) {
    loadQuestion();
  } else {
    finishQuiz();
  }
}

// إنهاء الاختبار
function finishQuiz() {
  clearInterval(timer);
  questionContainer.style.display = "none";
  resultSection.style.display = "block";
  progressIndicator.style.display = "none";
  
  displayResults();
  scrollToTop();
}

// عرض النتائج
function displayResults() {
  let correctAnswersCount = 0;
  resultsContainer.innerHTML = "";
  
  questions.forEach((question, index) => {
    let isCorrect;
    
    if (question.type === "multi") {
      isCorrect = arraysEqual(selectedAnswers[index], question.correct);
    } else {
      isCorrect = selectedAnswers[index] === question.correct[0];
    }
    
    if (isCorrect) correctAnswersCount++;
    
    const reviewClass = isCorrect ? "correct" : "incorrect";
    const reviewText = isCorrect ? "إجابة صحيحة" : "إجابة خاطئة";
    
    // إعداد عرض الإجابات للمستخدم
    let userAnswerText;
    if (question.type === "multi" && selectedAnswers[index] && selectedAnswers[index].length > 0) {
      userAnswerText = selectedAnswers[index].map(i => question.options[i]).join("، ");
    } else if (selectedAnswers[index] !== undefined) {
      userAnswerText = question.options[selectedAnswers[index]];
    } else {
      userAnswerText = "لم يتم الإجابة";
    }
    
    // إعداد الإجابات الصحيحة
    let correctAnswerText = question.correct.map(i => question.options[i]).join("، ");
    resultsContainer.innerHTML += `
      <div class="question-review ${reviewClass}">
        <h3>السؤال ${index + 1}: ${question.text}</h3>
        <p class="user-answer">إجابتك: ${userAnswerText}</p>
        ${!isCorrect ? `<p class="correct-answer">الإجابة الصحيحة: ${correctAnswerText}</p>` : ''}
        <div class="explanation">
          <p><strong>الشرح:</strong> ${question.explanation}</p>
          <p><strong>الوقت المستغرق:</strong> ${formatTime(question.timeSpent)}</p>
          <button class="long-explanation-btn" onclick="showLongExplanation(${index})">
            <i class="fas fa-book-open"></i> عرض شرح مفصل
          </button>
          <button class="btn" style="background: #0004ec; z-index: 100022;" 
            id="eldarsBtn" aria-label="فتح ملخص الدرس">
            <i class="fas fa-book"></i>
            <span>فتح ملخص الدرس</span>
          </button>
        </div>
      </div>
    `;
  });
  
  // حساب النسبة المئوية
  const percentage = Math.round((correctAnswersCount / questions.length) * 100);
  
  // عرض النتيجة
  scoreDisplay.textContent = `${correctAnswersCount} / ${questions.length} (${percentage}%)`;
  progressBar.style.width = `${percentage}%`;
  
  // عرض إحصائيات الوقت
  totalTimeElement.textContent = formatTime(totalTime);
  
  const averageTime = Math.round(totalTime / questions.length);
  averageTimeElement.textContent = formatTime(averageTime);
  
  const fastestTime = Math.min(...timePerQuestion);
  fastestTimeElement.textContent = formatTime(fastestTime);
  
  const slowestTime = Math.max(...timePerQuestion);
  slowestTimeElement.textContent = formatTime(slowestTime);
  
  // عرض الرسم البياني
  renderResultsChart(correctAnswersCount, questions.length - correctAnswersCount);
}

// عرض الإجابة الصحيحة
function showCorrectAnswer() {
  const question = questions[currentQuestionIndex];
  const options = document.querySelectorAll(".options li");
  
  options.forEach((option, index) => {
    if (question.correct.includes(index)) {
      option.classList.add("correct");
      const correctMark = option.querySelector(".correct-mark");
      if (correctMark) correctMark.style.display = "block";
    } else if ((Array.isArray(selectedAnswers[currentQuestionIndex]) && 
               selectedAnswers[currentQuestionIndex].includes(index)) || 
               selectedAnswers[currentQuestionIndex] === index) {
      option.classList.add("incorrect");
    }
  });
}

// عرض نتائج الأسئلة متعددة الإجابات
function showMultiAnswerResult(isCorrect, correctAnswers) {
  const options = document.querySelectorAll(".options li");
  
  options.forEach((option, index) => {
    if (correctAnswers.includes(index)) {
      option.classList.add("correct");
      const correctMark = option.querySelector(".correct-mark");
      if (correctMark) correctMark.style.display = "block";
    }
    
    if (selectedAnswers[currentQuestionIndex] && 
        selectedAnswers[currentQuestionIndex].includes(index) && 
        !correctAnswers.includes(index)) {
      option.classList.add("incorrect");
    }
  });
}

// دالة مساعدة لمقارنة المصفوفات
function arraysEqual(a, b) {
  if (!a || !b) return false;
  if (a.length !== b.length) return false;
  
  const sortedA = [...a].sort();
  const sortedB = [...b].sort();
  
  return sortedA.every((val, index) => val === sortedB[index]);
}

// عرض شرح السؤال
function showExplanation() {
  const question = questions[currentQuestionIndex];
  
  document.getElementById("modal-title").textContent = "شرح السؤال";
  document.getElementById("explanation-text").innerHTML = `
    <p><strong>السؤال:</strong> ${question.text}</p>
    <p><strong>الإجابة الصحيحة:</strong> ${question.correct.map(i => question.options[i]).join("، ")}</p>
    <p><strong>الشرح:</strong> ${question.explanation}</p>
    <p><strong>الوقت المستغرق:</strong> ${formatTime(question.timeSpent)}</p>
  `;
  
  document.getElementById("explanation-modal").classList.add("active");
}

// إغلاق نافذة الشرح
function closeExplanation() {
  document.getElementById("explanation-modal").classList.remove("active");
  nextQuestion();
}

// عرض نافذة الدرس التعليمي
function showLessonModal() {
  document.getElementById("lesson-modal").classList.add("active");
}

// إغلاق نافذة الدرس التعليمي
function closeLessonModal() {
  document.getElementById("lesson-modal").classList.remove("active");
}

// عرض/إخفاء لوحة المعلومات
function toggleInfoPanel() {
  infoPanel.classList.toggle("active");
}

// إغلاق لوحة المعلومات
function closeInfoPanel() {
  infoPanel.classList.remove("active");
}

// عرض الرسم البياني للنتائج
function renderResultsChart(correct, incorrect) {
  const ctx = document.getElementById('results-chart').getContext('2d');
  
  // إذا كان هناك رسم بياني موجود، قم بتدميره أولاً
  if (window.resultsChart) {
    window.resultsChart.destroy();
  }
  
  window.resultsChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['الإجابات الصحيحة', 'الإجابات الخاطئة'],
      datasets: [{
        data: [correct, incorrect],
        backgroundColor: [
          'rgba(46, 204, 113, 0.8)',
          'rgba(231, 76, 60, 0.8)'
        ],
        borderColor: [
          'rgba(46, 204, 113, 1)',
          'rgba(231, 76, 60, 1)'
        ],
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'bottom',
          rtl: true,
          labels: {
            usePointStyle: true,
            padding: 20,
            font: {
              family: 'Tajawal',
              size: 14
            }
          }
        }
      },
      cutout: '70%'
    }
  });
}

// بدء المؤقت
function startTimer() {
  timeLeft = quizDuration;
  updateTimerDisplay();
  
  timer = setInterval(function() {
    if (timeLeft <= 0) {
      clearInterval(timer);
      finishQuiz();
      
      // تنبيه بانتهاء الوقت
      Swal.fire({
        title: 'انتهى الوقت!',
        text: 'لقد انتهى الوقت المخصص للاختبار',
        icon: 'warning',
        confirmButtonText: 'حسناً'
      });
    } else {
      timeLeft--;
      updateTimerDisplay();
      
      // تنبيه عند اقتراب انتهاء الوقت
      if (timeLeft === 60) {
        Swal.fire({
          title: 'تنبيه!',
          text: 'تبقى دقيقة واحدة فقط لإنهاء الاختبار',
          icon: 'warning',
          confirmButtonText: 'حسناً'
        });
      }
    }
  }, 1000);
}

// تحديث عرض المؤقت
function updateTimerDisplay() {
  timerElement.textContent = formatTime(timeLeft);
  
  // تغيير لون المؤقت عند اقتراب النهاية
  if (timeLeft <= 60) {
    timerElement.style.color = '#ff6b6b';
  } else {
    timerElement.style.color = 'white';
  }
}

// تنسيق الوقت
function formatTime(seconds) {
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

// إعادة الاختبار
function restartQuiz() {
  Swal.fire({
    title: 'هل تريد إعادة الاختبار؟',
    text: "سيتم حذف جميع النتائج الحالية",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'نعم، أعد الاختبار',
    cancelButtonText: 'إلغاء'
  }).then((result) => {
    if (result.isConfirmed) {
      startQuiz();
    }
  });
}

// اقتراح تحسينات
suggestBtn.addEventListener('click', function() {
  Swal.fire({
    title: 'اقترح تحسينات للاختبار',
    input: 'textarea',
    inputPlaceholder: 'أدخل اقتراحاتك هنا...',
    showCancelButton: true,
    confirmButtonText: 'إرسال',
    cancelButtonText: 'إلغاء',
    inputValidator: (value) => {
      if (!value) {
        return 'يجب إدخال اقتراح!';
      }
    }
  }).then((result) => {
    if (result.isConfirmed) {
      Swal.fire(
        'شكراً لك!',
        'تم استلام اقتراحك بنجاح وسيتم دراسته.',
        'success'
      );
    }
  });
});

// التمرير للأعلى
function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

// تحميل الصور مسبقاً
function preloadImages() {
  const images = [];
  allQuestions.forEach(question => {
    if (question.image) {
      const img = new Image();
      img.src = question.image;
      images.push(img);
    }
  });
}

// الانتقال إلى الأعلى عند تحميل الصفحة
window.addEventListener('load', function() {
  scrollToTop();
  preloadImages();
  
  // إضافة إمكانية إغلاق لوحة المعلومات بالضغط على ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && infoPanel.classList.contains('active')) {
      closeInfoPanel();
    }
  });
});
</script>














<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام الأزرار داخل القائمة الجانبية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* ألوان رئيسية */
            --primary-color: #4CAF50;
            --eldars-color: #8e44ad;
            --search-color: #2980b9;
            --speech-color: #e91e63;
            --contact-color: #f48fb1;
            --flashcard-color: #d5a6e5;
            --warning-color: #e91e63;
            --success-color: #2ecc71;
            --light-bg: #f5f5f5;
            --white: #fff;
            --shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
            --transition: all 0.3s ease;
        }

        /* التنسيق العام */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--light-bg);
            transition: margin-right 0.3s ease;
        }
        
        /* لوحة المعلومات الجانبية */
        .info-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            max-width: 90%;
            height: 100vh;
            background-color: var(--white);
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            overflow-y: auto;
            z-index: 1000;
            transition: var(--transition);
        }
        
        .info-panel.show {
            right: 0;
        }
        
        .close-panel {
            position: absolute;
            left: 15px;
            top: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #555;
        }
        
        .info-panel h3 {
            color: #333;
            margin: 15px 0 10px;
            font-size: 18px;
        }
        
        .info-panel ul {
            list-style: none;
            padding-right: 15px;
        }
        
        .info-panel li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        /* نظام الأزرار داخل اللوحة */
        .button-system {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }
        
        .panel-btn {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-radius: 8px;
            background-color: #f8f8f8;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            transition: var(--transition);
            text-align: right;
            width: 100%;
        }
        
        .panel-btn:hover {
            background-color: #f0f0f0;
            transform: translateX(-5px);
        }
        
        .panel-btn i {
            margin-left: 10px;
            font-size: 20px;
            width: 25px;
            text-align: center;
        }
        
        /* تخصيص ألوان الأزرار */
        .eldars-btn { color: var(--eldars-color); border-right: 3px solid var(--eldars-color); }
        .search-btn { color: var(--search-color); border-right: 3px solid var(--search-color); }
        .speech-btn { color: var(--speech-color); border-right: 3px solid var(--speech-color); }
        .contact-btn { color: var(--contact-color); border-right: 3px solid var(--contact-color); }
        .flashcard-btn { color: var(--flashcard-color); border-right: 3px solid var(--flashcard-color); }
        
        /* زر فتح اللوحة الجانبية */
        .toggle-panel-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            font-size: 20px;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: var(--transition);
        }
        
        .toggle-panel-btn:hover {
            transform: scale(1.1);
        }
        
        /* نافذة البحث */
        .search-bubble {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
            background: var(--white);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            padding: 15px;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
            transform-origin: center;
            transition: var(--transition);
            z-index: 1001;
            display: none;
        }
        
        .search-bubble.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            display: block;
        }
        
        .search-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .search-results {
            max-height: 200px;
            overflow-y: auto;
        }
        
        /* نافذة التواصل */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--white);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            width: 90%;
            max-width: 400px;
        }
        
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .popup-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        
        /* نافذة الدرس */
        .eldars-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 1000px;
            height: 100vh;
            background: var(--white);
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            overflow: hidden;
        }
        
        .eldars-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: var(--eldars-color);
            color: var(--white);
        }
        
        .eldars-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .close-eldars {
            background: none;
            border: none;
            color: var(--white);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .eldars-content {
            height: calc(100% - 53px);
            overflow: hidden;
        }
        
        .eldars-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* نصائح للاختبار */
        .tips-section {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .tips-section li {
            margin-bottom: 5px;
        }
        
        .btn-primary {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn-primary:hover {
            background-color: #3e8e41;
        }
        
        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 768px) {
            .info-panel {
                width: 90%;
            }
            
            .panel-btn {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .panel-btn i {
                font-size: 18px;
            }
            
            .eldars-popup {
                height: 70vh;
            }
        }
    </style>
</head>
<body>
    <!-- زر فتح اللوحة الجانبية -->


    <button class="toggle-panel-btn" id="togglePanelBtn" aria-label="فتح/إغلاق لوحة المعلومات">
      <i class="fas fa-info-circle"></i>
  </button>
    
    <!-- لوحة المعلومات الجانبية -->
    <aside class="info-panel" id="infoPanel" aria-hidden="true">
      <button class="btn-primary" style="float: left;" onclick="closeInfoPanel()" id="closePanel" aria-label="إغلاق اللوحة">&times;</button>
        
        <h3 style="color: #b22222; background: linear-gradient(90deg, #fff5f5, #ffd6d6); border: 2px solid #b22222; padding: 12px 20px; border-radius: 10px; display: inline-flex; align-items: center; gap: 12px; font-weight: bold; box-shadow: 0 4px 8px rgba(178, 34, 34, 0.3); font-size: 1.3rem; user-select: none;"><span style="font-size: 1.6rem;">⚠️</span> زر التحذير يرجى عدم تفويته من طرف أي مسلم</h3>

        
        <!-- نظام الأزرار داخل اللوحة -->
        <div class="button-system">

<button 
  class="panel-btn eldars-btn" 
  aria-label="زر تحذير"
  onclick="_f1()"
  style="background: linear-gradient(135deg, #ff0000, #c00000); color: white; border-radius: 8px; border: none; padding: 10px 18px; font-size: 16px; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; cursor: pointer; box-shadow: 0 3px 6px rgba(255, 0, 0, 0.6); transition: background-color 0.3s ease, box-shadow 0.3s ease;"
>
  <i class="fas fa-exclamation-triangle"></i>
  <span>تحذير</span>
</button>



            <button class="panel-btn eldars-btn" id="eldarsBtn" aria-label="فتح ملخص الدرس">
                <i class="fas fa-book"></i>
                <span>فتح ملخص الدرس</span>
            </button>
            
            <button class="panel-btn search-btn" id="searchBtn" aria-label="البحث الذكي">
                <i class="fas fa-search"></i>
                <span>البحث الذكي</span>
            </button>
            
            <button class="panel-btn speech-btn" id="speechBtn" aria-label="تفعيل القلم الناطق">
                <i class="fas fa-microphone-alt"></i>
                <span>تفعيل القلم الناطق</span>
            </button>
            
            <button class="panel-btn contact-btn" id="contactBtn" aria-label="الدعم الفني">
                <i class="fas fa-headset"></i>
                <span>الدعم الفني</span>
            </button>
            
         <a href="#"    style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 20px; background-color: #4B0082; color: white; border: none; border-radius: 8px; text-decoration: none; font-size: 16px; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;"
 class="panel-btn flashcard-btn" aria-label="البطاقات التعليمية">
    <i class="far fa-copy"></i>
    <span>البطاقات التعليمية الخاص بالدرس </span>
</a>



<a href="FLASHCARD_PAGE_MED_02.html"
   aria-label="انتقل لموقع البطاقات التعليمية"
   style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 20px; background-color: #110a9c; color: white; border: none; border-radius: 8px; text-decoration: none; font-size: 16px; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;"
   onmouseover="this.style.backgroundColor='#36005c';"
   onmouseout="this.style.backgroundColor='#4B0082';">
  <i class="fas fa-clone" style="font-size: 18px;"></i>
  <span>انتقل لموقع البطاقات التعليمية</span>
</a>


        </div>
        
        <h3>
            <i class="fas fa-plus" style="color: var(--flashcard-color);"></i>
            وظائف الأزرار:
        </h3>
        <ul>



            <li><i class="fas fa-book" style="color: var(--eldars-color);"></i> أيقونة الدرس: تفتح ملخصًا مصغرًا للدرس.</li>
            <li><i class="fas fa-search" style="color: var(--search-color);"></i> أيقونة البحث الذكي: تفتح نافذة بحث بثلاث لغات (العربية، الفرنسية، الإنجليزية).</li>
            <li><i class="fas fa-microphone-alt" style="color: var(--speech-color);"></i> أيقونة الميكروفون: لتفعيل القلم الناطق، اضغط مرة أخرى لإيقافه.</li>
            <li><i class="fas fa-headset" style="color: var(--contact-color);"></i> أيقونة الدعم الفني: تعرض وسائل التواصل معنا.</li>
            <li><i class="far fa-copy" style="color: var(--flashcard-color);"></i> أيقونة البطاقات: تنقلك إلى الفلاش كارد (تتطلب دخول منطقة الدرس لتفعيلها).</li>
<li>
  <i class="far fa-copy" style="color: #110a9c;"></i>
  أيقونة البطاقات: تنقلك إلى موقع الفلاش كارد (تتطلب دخول منطقة الدرس لتفعيلها).
</li>


          </ul>
        
        <!-- نصائح للاختبار -->
        <div class="tips-section">
            <h3>
      
              <div style="background-color: #e8f5e9; padding: 15px; border-radius: 8px; font-family: Arial, sans-serif; font-size: 14px;">
                <h3>
                  <i class="fas fa-lightbulb" style="color: #f1c40f; margin-right: 5px;"></i>
                  نصائح للاختبار:
                </h3>
                <ul style="list-style: none; padding-left: 0;">
                  <li><i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i> توكل على الله وقل بسم الله.</li>
                  
                  <li><i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i> اقرأ الأسئلة بعناية وتمعّن قبل الإجابة.</li>
              
                  <li><i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i> ركّز على الفروقات الدقيقة بين الخيارات المتشابهة.</li>
              
                  <li><i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i> 
                    لا تلجأ للغش لكونه 
                    <span style="color: red; font-weight: bold;">حرامًا</span>، لأن علينا أن ننظر لمن عصينا لا لحجم المعصية.
                    <br><br>
                    واعلم أنّك إذا سمعت إجابة شيء من أسئلة الامتحان دون قصد، فلا حرج عليك في كتابة هذا الجواب، ولا يكون ذلك داخلاً في الغش المحرم.
                    <br><br>
                    وقد سئل الشيخ ابن عثيمين -رحمه الله- عن الطالب في قاعة الاختبار، يسمع بلا قصد منه إجابة سؤال ممن حوله من الطلبة لم يكن يعرفه، فهل يجوز له كتابته أم لا؟
                    <br>
                    فأجاب، بأن ذلك <span style="color: green; font-weight: bold;">جائز</span>، لأنه لم يتعمد الإثم والمخالفة.
                    <br>
                    <a href="https://www.islamweb.net/ar/fatwa/367432" target="_blank" style="color: #3498db;">المصدر - إسلام ويب</a>
                    <br><br>
                    ومن فتاوى ابن باز -رحمه الله-:
                    <br>
                    الغش في الامتحان <span style="color: red; font-weight: bold;">محرم</span> ومنكر كالغش في المعاملات، وقد يكون أعظم لأنه قد يحصل به على مناصب لا يستحقها.
                    <br><br>
                    قال ﷺ: <em>"من غشنا فليس منا"</em> (رواه مسلم).
                    <br>
                    وقال تعالى: 
                    <em>﴿يَا أَيُّهَا الَّذِينَ آمَنُوا لا تَخُونُوا اللَّهَ وَالرَّسُولَ وَتَخُونُوا أَمَانَاتِكُمْ وَأَنتُمْ تَعْلَمُونَ﴾</em> [الأنفال: 27]
                    <br>
                    <a href="https://binbaz.org.sa/fatwas/18288" target="_blank" style="color: #3498db;">المصدر - موقع ابن باز</a>
          
          
                    <h4 style="font-family: 'Tahoma', sans-serif; color: #333;">
                      <i class="fas fa-volume-up" style="color: #9b59b6; margin-right: 5px;"></i>
                      استمع إلى فتوى الشيخ ابن باز رحمه الله حول الغش:
                    </h4>
                    
                    <audio controls style="width: 100%; margin-top: 10px; border-radius: 8px;">
                      <source src="ghish_ibn_baz.mp3" type="audio/mpeg">
                      متصفحك لا يدعم تشغيل الملفات الصوتية.
                    </audio>
                    
                    
                    <br><br>
                    <a href="https://www.islamweb.net/ar/fatwa/345952" target="_blank" style="color: #3498db;">المزيد - إسلام ويب</a>
                   
                   
                    <div style="background-color: #fefbe9; border-left: 4px solid #f1c40f; padding: 15px; border-radius: 6px; font-family: 'Arial', sans-serif; font-size: 14px; margin-top: 20px;">
                      <i class="fas fa-quote-left" style="color: #f39c12; margin-right: 5px;"></i>
                      <strong>حديث عن الغش:</strong>
                      <br><br>
                      أنَّ رَسولَ اللهِ صَلَّى اللَّهُ عليه وسلَّمَ مَرَّ علَى صُبْرَةِ طَعامٍ فأدْخَلَ يَدَهُ فيها، فَنالَتْ أصابِعُهُ بَلَلًا فقالَ: ما هذا يا صاحِبَ الطَّعامِ؟ قالَ أصابَتْهُ السَّماءُ يا رَسولَ اللهِ، قالَ: أفَلا جَعَلْتَهُ فَوْقَ الطَّعامِ كَيْ يَراهُ النَّاسُ، مَن غَشَّ فليسَ مِنِّي.
                      <br><br>
                      الراوي : أبو هريرة | المحدث : مسلم | المصدر : صحيح مسلم<br>
                      الصفحة أو الرقم: 102 | خلاصة حكم المحدث : [صحيح]<br>
                      التخريج : من أفراد مسلم على البخاري
                      <br><br>
                      <a href="https://dorar.net/hadith/sharh/60453" target="_blank" style="color: #2980b9;">المصدر: dorar.net</a>
                    </div>
                    <br><br>
                    فالفشل أحيانًا بداية للتعلّم الحقيقي كما يمكنك البحث اكثر في الموضوع .  
                  </li>
                  <br>
                  <li><i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i> خذ نفسًا عميقًا قبل البدء، وابقَ هادئًا طوال الوقت.</li>
              
                  <li><i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i> إذا لم تعرف الإجابة، انتقل للسؤال التالي ثم عد لاحقًا.</li>
              
                  <li><i class="fas fa-check-circle" style="color: #2ecc71; margin-right: 5px;"></i> استعن بالله، وابذل جهدك، والباقي على الله.</li>
                </ul>
              </div>
              
              
              
          
        
        <div style="text-align: center; margin-top: 20px;">
            <button class="btn-primary" onclick="closeInfoPanel()">
                حسناً، فهمت
            </button>
        </div>
    </aside>
    
    <!-- نافذة البحث -->
    <div class="search-bubble" id="searchBubble" aria-hidden="true">
        <div class="popup-header">
            <h4 style="margin: 0;">البحث في الموقع</h4>
            <button class="popup-close" id="closeBubble" aria-label="إغلاق نافذة البحث">&times;</button>
        </div>
        <input type="text" class="search-input" id="searchInput" placeholder="اكتب كلمة البحث...">
        <div class="search-results" id="searchResults"></div>
    </div>
    
    <!-- نافذة التواصل -->
    <div class="popup" id="popupCONTACT" aria-hidden="true">
        <button class="popup-close" id="closeContactBtn" aria-label="إغلاق نافذة التواصل">&times;</button>
        <h3 style="text-align: center; margin-bottom: 15px;">📩 تواصل معنا</h3>
        <p style="text-align: center; margin-bottom: 20px;">في حالة توفر مشكلة أو لديك اقتراح سواء حول اختبار أو غيره تواصل معنا</p>
        
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="http://t.me/ADATEALM_bot" target="_blank" rel="noopener noreferrer" style="display: block; padding: 10px; background-color: #0088cc; color: white; text-align: center; border-radius: 5px; text-decoration: none;">
                <i class="fab fa-telegram"></i> بوت تيليغرام
            </a>
            
            <a href="https://t.me/adatealm" target="_blank" rel="noopener noreferrer" style="display: block; padding: 10px; background-color: #0088cc; color: white; text-align: center; border-radius: 5px; text-decoration: none;">
                <i class="fab fa-telegram"></i> تيليغرام
            </a>
            
            <a href="https://www.facebook.com/share/1BFTe2mWNL/" target="_blank" rel="noopener noreferrer" style="display: block; padding: 10px; background-color: #3b5998; color: white; text-align: center; border-radius: 5px; text-decoration: none;">
                <i class="fab fa-facebook"></i> فيسبوك
            </a>
            
            <a href="https://www.instagram.com/adat_ealm?igsh=djg1eXlwMTJvM2xw" target="_blank" rel="noopener noreferrer" style="display: block; padding: 10px; background-color: #e4405f; color: white; text-align: center; border-radius: 5px; text-decoration: none;">
                <i class="fab fa-instagram"></i> إنستغرام
            </a>
        </div>
    </div>
    
    <!-- نافذة الدرس -->
    <div class="eldars-popup" id="eldarsPopup" aria-hidden="true">
        <div class="eldars-header">
            <div class="eldars-title">ملخص الدرس</div>
            <button class="close-eldars" id="closeEldars" aria-label="إغلاق نافذة الدرس">×</button>
        </div>
        <div class="eldars-content">
            <iframe class="eldars-iframe" src="🔻EL MOLAKHS_MED02_U5_ANATOMIE_العمود الفقري.html" title="ملخص الدرس"></iframe>
        </div>
    </div>
 

    <script>
        // كائن التطبيق الرئيسي
        const app = {
            // حالة التطبيق
            state: {
                isPanelOpen: false,
                isSearchOpen: false,
                isContactOpen: false,
                isEldarsOpen: false,
                isSpeechActive: false
            },
            
            // تهيئة التطبيق
            init() {
                this.cacheElements();
                this.bindEvents();
            },
            
            // تخزين عناصر DOM
            cacheElements() {
                this.elements = {
                    togglePanelBtn: document.getElementById('togglePanelBtn'),
                    infoPanel: document.getElementById('infoPanel'),
                    closePanel: document.getElementById('closePanel'),
                    searchBtn: document.getElementById('searchBtn'),
                    speechBtn: document.getElementById('speechBtn'),
                    contactBtn: document.getElementById('contactBtn'),
                    flashcardBtn: document.getElementById('flashcardBtn'),
                    eldarsBtn: document.getElementById('eldarsBtn'),
                    searchBubble: document.getElementById('searchBubble'),
                    closeBubble: document.getElementById('closeBubble'),
                    popupCONTACT: document.getElementById('popupCONTACT'),
                    closeContactBtn: document.getElementById('closeContactBtn'),
                    eldarsPopup: document.getElementById('eldarsPopup'),
                    closeEldars: document.getElementById('closeEldars'),
                    searchInput: document.getElementById('searchInput'),
                    searchResults: document.getElementById('searchResults')
                };
            },
            
            // ربط الأحداث
            bindEvents() {
                // استخدام تفويض الأحداث للحد من عدد معالجات الأحداث
                document.body.addEventListener('click', (e) => {
                    const { target } = e;
                    
                    // فتح/إغلاق اللوحة الجانبية
                    if (target === this.elements.togglePanelBtn || target.closest('#togglePanelBtn')) {
                        this.togglePanel();
                    } else if (target === this.elements.closePanel || target.closest('#closePanel')) {
                        this.closePanel();
                    }
                    
                    // معالجة أزرار اللوحة الجانبية
                    else if (target === this.elements.searchBtn || target.closest('#searchBtn')) {
                        this.toggleSearch();
                    } else if (target === this.elements.speechBtn || target.closest('#speechBtn')) {
                        this.toggleSpeech();
                    } else if (target === this.elements.contactBtn || target.closest('#contactBtn')) {
                        this.toggleContact();
                    } else if (target === this.elements.flashcardBtn || target.closest('#flashcardBtn')) {
                        this.goToFlashCard();
                    } else if (target === this.elements.eldarsBtn || target.closest('#eldarsBtn')) {
                        this.toggleEldarsPopup();
                    }
                    
                    // إغلاق النوافذ المنبثقة
                    else if (target === this.elements.closeBubble || target.closest('#closeBubble')) {
                        this.closeSearch();
                    } else if (target === this.elements.closeContactBtn || target.closest('#closeContactBtn')) {
                        this.closeContact();
                    } else if (target === this.elements.closeEldars || target.closest('#closeEldars')) {
                        this.closeEldarsPopup();
                    }
                    
                    // إغلاق النوافذ عند النقر خارجها
                    else if (this.state.isSearchOpen && target === this.elements.searchBubble) {
                        this.closeSearch();
                    } else if (this.state.isContactOpen && target === this.elements.popupCONTACT) {
                        this.closeContact();
                    } else if (this.state.isEldarsOpen && target === this.elements.eldarsPopup) {
                        this.closeEldarsPopup();
                    }
                });
                
                // البحث عند الكتابة
                this.elements.searchInput.addEventListener('input', this.handleSearch.bind(this));
            },
            
            // وظائف التطبيق
            togglePanel() {
                this.state.isPanelOpen = !this.state.isPanelOpen;
                this.elements.infoPanel.classList.toggle('show', this.state.isPanelOpen);
                this.elements.infoPanel.setAttribute('aria-hidden', !this.state.isPanelOpen);
            },
            
            closePanel() {
                this.state.isPanelOpen = false;
                this.elements.infoPanel.classList.remove('show');
                this.elements.infoPanel.setAttribute('aria-hidden', true);
            },
            
            toggleSearch() {
                this.state.isSearchOpen = !this.state.isSearchOpen;
                
                if (this.state.isSearchOpen) {
                    this.elements.searchBubble.classList.add('show');
                    this.elements.searchBubble.setAttribute('aria-hidden', false);
                    this.elements.searchInput.focus();
                } else {
                    this.closeSearch();
                }
            },
            
            closeSearch() {
                this.state.isSearchOpen = false;
                this.elements.searchBubble.classList.remove('show');
                this.elements.searchBubble.setAttribute('aria-hidden', true);
            },
            
            toggleSpeech() {
                this.state.isSpeechActive = !this.state.isSpeechActive;
                alert(`تم ${this.state.isSpeechActive ? 'تفعيل' : 'إيقاف'} القلم الناطق`);
            },
            
            toggleContact() {
                this.state.isContactOpen = !this.state.isContactOpen;
                this.elements.popupCONTACT.style.display = this.state.isContactOpen ? 'block' : 'none';
                this.elements.popupCONTACT.setAttribute('aria-hidden', !this.state.isContactOpen);
            },
            
            closeContact() {
                this.state.isContactOpen = false;
                this.elements.popupCONTACT.style.display = 'none';
                this.elements.popupCONTACT.setAttribute('aria-hidden', true);
            },
            
            goToFlashCard() {
                document.getElementById('flashcard-section').scrollIntoView({ 
                    behavior: 'smooth' 
                });
                this.closePanel();
            },
            
            toggleEldarsPopup() {
                this.closePanel();
                this.state.isEldarsOpen = true;
                this.elements.eldarsPopup.style.display = 'block';
                this.elements.eldarsPopup.setAttribute('aria-hidden', false);
            },
            
            closeEldarsPopup() {
                this.state.isEldarsOpen = false;
                this.elements.eldarsPopup.style.display = 'none';
                this.elements.eldarsPopup.setAttribute('aria-hidden', true);
            },
            
            handleSearch() {
                const query = this.elements.searchInput.value.trim();
                
                if (query.length < 2) {
                    this.elements.searchResults.innerHTML = '';
                    return;
                }
                
                // هنا يمكنك إضافة منطق البحث الفعلي
                this.elements.searchResults.innerHTML = `
                    <div style="padding: 10px; text-align: center;">
                        نتائج البحث عن: "${query}"
                    </div>
                `;
            }
        };
        
        // بدء تشغيل التطبيق
        document.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>
</html>

































<style>
  /* أنماط الوضع الداكن */
  .dark-mode {
    --primary-color: #3498db;
    --secondary-color: #2980b9;
    --success-color: #2ecc71;
    --danger-color: #e74c3c;
    --warning-color: #f39c12;
    --light-color: #2c3e50;
    --dark-color: #000000;
    --text-color: #ecf0f1;
    --white: #2c3e50;
    background-color: #1e1e1e;
  }
  
  body {
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  .dark-mode body {
    background-color: #000; /* خلفية سوداء كاملة */
    color: var(--text-color);
  }
  
  .dark-mode .container,
  .dark-mode .question-text,
  .dark-mode .quiz-settings,
  .dark-mode .question-review,
  .dark-mode .modal-content,
  .dark-mode .long-explanation-content,
  .dark-mode .info-panel {
    background-color: #1e1e1e;
    color: var(--text-color);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
  }
  
  .dark-mode .options li,
  .dark-mode .stat-box,
  .dark-mode .explanation {
    background-color: #2a2a2a;
    color: var(--text-color);
    border-color: #3d566e;
  }
  
  .dark-mode .options li:hover {
    background-color: #3d566e;
  }
  
  .dark-mode .options li.selected {
    background-color: var(--primary-color);
    color: white;
  }
  
  .dark-mode .options li.correct {
    background-color: var(--success-color);
    color: white;
  }
  
  .dark-mode .options li.incorrect {
    background-color: var(--danger-color);
    color: white;
  }
  
  .dark-mode table th {
    background-color: var(--primary-color);
  }
  
  .dark-mode table tr:nth-child(even) {
    background-color: #3d566e;
  }
  
  .dark-mode table tr:hover {
    background-color: #4a6b8a;
  }
  
  /* زر التبديل */
  .theme-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
    font-size: 21px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3), 
                inset 0 2px 4px rgba(255, 255, 255, 0.3);
    transition: all 0.2s ease;
    z-index: 1000;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    margin: 0;
}

.theme-toggle:hover {
    transform: scale(1.1);
    box-shadow: 0 7px 20px rgba(52, 152, 219, 0.4);
}

@media (max-width: 480px) {
    .theme-toggle {
        bottom: 15px;
        right: 15px;
    }
}

  </style>
  
  <!-- زر التبديل بين الوضع الداكن والفاتح -->

  
  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const darkModeIcon = themeToggle.querySelector('i');
  
    if (localStorage.getItem('darkMode') === 'enabled') {
      document.body.classList.add('dark-mode');
      darkModeIcon.classList.replace('fa-moon', 'fa-sun');
    }
  
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const darkModeEnabled = document.body.classList.contains('dark-mode');
      
      darkModeIcon.classList.replace(
        darkModeEnabled ? 'fa-moon' : 'fa-sun',
        darkModeEnabled ? 'fa-sun' : 'fa-moon'
      );
      localStorage.setItem('darkMode', darkModeEnabled ? 'enabled' : 'disabled');
    });
  </script>
  
























<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>تنبيه طبي - INFATM</title>
    <style>
        /* تهيئة عامة */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
        }

        /* زر الخطر العائم - تصميم جديد */
       ._x1 {
    /* position: fixed; ✅ احذف أو علق هذه السطر */
    position: static; /* أو relative أو حسب السياق */

    /* احذف هذه أيضاً إن لم تعد ضرورية */
    top: 100px;
  
    left: 120px; /* اختياري لإضافة فراغ إضافي */

    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, #ff0000, #c00000);
    color: white;
    font-size: 21px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3), 
                inset 0 2px 4px rgba(255, 255, 255, 0.3);
    transition: all 0.2s ease;
    z-index: 1000;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    animation: _a1 2s infinite;
}


        @keyframes _a1 {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
        }

        ._x1:hover {
            transform: scale(1.1);
            background: linear-gradient(135deg, #ff3333, #d10000);
        }

        ._x1:active {
            transform: scale(0.95);
            animation: none;
        }

        /* طبقة التعتيم */
        ._x2 {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            display: none;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        /* نافذة المحتوى */
        ._x3 {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            display: flex;
            flex-direction: column;
            z-index: 10012;
            display: none;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            background: white;
        }

        ._x4 {
          background: linear-gradient(to right, #e74c3c, #c0392b);
          color: white;
          padding: 18px;
          text-align: center;
          position: relative;
          flex-shrink: 0;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      ._x4 h2 {
          font-size: 1.3rem;
          font-weight: 600;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      }

        ._x5 {
            flex-grow: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            background-color: #f5f5f5;
        }

        /* زر الإغلاق الجديد */
        ._x6 {
            position: absolute;
            top: 12px;
            left: 12px;
            background: white;
            color: #e74c3c;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.2s;
        }

        ._x6:hover {
            transform: rotate(90deg);
            background: #ffebee;
        }

        /* مؤشر التحميل */
        ._x7 {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 20px;
        }

        ._x8 {
            width: 45px;
            height: 45px;
            border: 5px solid rgba(231, 76, 60, 0.2);
            border-top: 5px solid #e74c3c;
            border-radius: 50%;
            animation: _a2 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes _a2 {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        ._x7 p {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        /* المحتوى المعروض */
        ._x9 {
            padding: 18px;
            line-height: 1.7;
            font-size: 1rem;
            color: #333;
        }

        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 480px) {
            ._x1 {
                width: 30px;
                height: 30px;
                font-size: 16px;
                bottom: 20px;
            }
            
            ._x4 {
                padding: 15px;
            }
            
            ._x4 h2 {
                font-size: 1.1rem;
            }
            
            ._x6 {
                width: 28px;
                height: 28px;
                font-size: 1rem;
            }
        }

        /* تحسينات لللمس على الهواتف */
        @media (hover: none) {
            ._x1:hover {
                transform: scale(1);
                background: linear-gradient(135deg, #ff0000, #c00000);
            }
            
            ._x6:hover {
                transform: rotate(0deg);
                background: white;
            }
        }
    </style>
</head>
<body>

<!-- زر الخطر العائم الجديد -->

<!-- طبقة التعتيم -->
<div class="_x2" id="_d1"></div>

<!-- نافذة المحتوى -->
<div class="_x3" id="_d2">
    <div class="_x4">
        <button class="_x6" onclick="_f1()">×</button>
        <h2 >⚠️  محتوى زر التنبيه  الخطر   ⚠️   </h2>
    </div>
    <div class="_x5" id="_d3">
        <div class="_x7">
            <div class="_x8"></div>
            <p>جاري تحميل المحتوى ...</p>
        </div>
    </div>
</div>

<script>
    // متغيرات التطبيق
    let _v1 = false;
    const _u1 = "https://s22mcs.github.io/S22MCS02-/MEDECINE_EXAM_NOTE.html";
    
    // عناصر DOM
    const _d2 = document.getElementById('_d2');
    const _d1 = document.getElementById('_d1');
    const _d3 = document.getElementById('_d3');
    const _b1 = document.querySelector('._x1');
    
    // تبديل عرض/إخفاء النافذة
    function _f1() {
        if (_d2.style.display === 'flex') {
            _f2();
        } else {
            _f3();
        }
    }
    
    function _f3() {
        // إيقاف تأثير النبض عند الفتح
        _b1.style.animation = 'none';
        
        _d1.style.display = 'block';
        _d2.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        if (!_v1) {
            _f4();
        }
    }
    
    function _f2() {
        // إعادة تشغيل تأثير النبض عند الإغلاق
        _b1.style.animation = '_a1 2s infinite';
        
        _d1.style.display = 'none';
        _d2.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    // تحميل المحتوى
    async function _f4() {
        try {
            // استخدام iframe كحل أساسي
            _f5();
            _v1 = true;
        } catch (error) {
            _f6(error);
        }
    }
    
    // عرض المحتوى باستخدام iframe
    function _f5() {
        _d3.innerHTML = `
            <iframe src="${_u1}" 
                    style="width:100%; height:100%; border:none;"
                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                    loading="lazy">
            </iframe>
        `;
    }
    
    // عرض رسالة الخطأ
    function _f6(_e1) {
        _d3.innerHTML = `
            <div class="_x7">
                <div style="color: #e74c3c; margin-bottom: 15px; font-size: 1.2rem;">⚠️ خطأ في تحميل المحتوى</div>
                <p style="margin-bottom: 20px; color: #555;">${_e1.message}</p>
                <button onclick="_f7()" 
                        style="padding: 10px 20px; 
                               background: linear-gradient(to right, #e74c3c, #c0392b); 
                               color: white; 
                               border: none; 
                               border-radius: 30px;
                               font-size: 1rem;
                               box-shadow: 0 3px 10px rgba(231, 76, 60, 0.3);
                               transition: all 0.2s;">
                    إعادة المحاولة
                </button>
            </div>
        `;
    }
    
    // إعادة تحميل المحتوى
    function _f7() {
        _d3.innerHTML = `
            <div class="_x7">
                <div class="_x8"></div>
                <p>جاري تحميل المحتوى الطبي...</p>
            </div>
        `;
        _f4();
    }
    
    // إغلاق النافذة عند النقر خارجها
    _d1.addEventListener('click', _f2);
    
    // منع إغلاق النافذة عند النقر داخلها
    _d2.addEventListener('click', (e) => {
        e.stopPropagation();
    });
    
    // تحسين الأداء للهواتف
    if ('connection' in navigator) {
        if (navigator.connection.saveData || navigator.connection.effectiveType.includes('2g')) {
            // تحسينات لشبكات الجيل الثاني
            _b1.style.animation = 'none';
        }
    }
    
    // إضافة اهتزاز عند النقر (للهواتف)
    function _f8() {
        if ('vibrate' in navigator) {
            navigator.vibrate(10);
        }
    }
    
    // إضافة الاهتزاز للأزرار
    document.querySelector('._x1').addEventListener('click', _f8);
    document.querySelector('._x6')?.addEventListener('click', _f8);
</script>

</body>
</html>



  












































































































































<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مواقيت الصلاة وأذكار الاستغفار</title>
    <style>
    
        
        /* زر الاستغفار */
        .istighfar-btn {
            background-color: var(--secondary-color);
        }
        
        /* زر الصلاة */
        .prayer-btn {
            background-color: var(--primary-color);
        }
        
        /* زر الإعدادات */
        .settings-btn {
            background-color: var(--accent-color);
        }
        
        /* النوافذ المنبثقة */
        .popup {
            position: fixed;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            display: none;
            animation: fadeIn 0.3s ease-in-out;
            max-width: 95%;
            width: 350px;
            padding: 20px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -45%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        
        .popup-header {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .popup-title {
            font-size: 1.3rem;
            color: var(--dark-color);
            font-weight: bold;
        }
        
        .popup-content {
            margin: 15px 0;
        }
        
        .popup-footer {
            text-align: center;
            margin-top: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-accent {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* تنسيق مواقيت الصلاة */
        .prayer-times-container {
            margin: 15px 0;
        }
        
        .city-selector {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .prayer-time {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background-color: #f5f5f5;
            border-radius: 8px;
        }
        
        .prayer-name {
            font-weight: bold;
        }
        
        .next-prayer {
            background-color: var(--primary-color);
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
        }
        
        /* تنسيق الاستغفار */
        .istighfar-text {
            text-align: center;
            font-size: 1.5rem;
            margin: 15px 0;
            padding: 15px;
            background-color: #e3f2fd;
            border-radius: 10px;
            color: #0d47a1;
            font-weight: bold;
        }
        
        .ayah {
            text-align: center;
            padding: 10px;
            background: #e8f5e9;
            color: #2e7d32;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Amiri', serif;
            font-size: 1.1rem;
        }
        
        .hadith {
            text-align: center;
            padding: 10px;
            background: #fff3e0;
            color: #e65100;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Amiri', serif;
            font-size: 1rem;
        }
        
        /* تنسيق الإعدادات */
        .settings-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        /* فقاعات الأذكار */
        .dhikr-bubble {
            position: fixed;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            padding: 15px;
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 250px;
            display: none;
        }
        
        .bubble-content {
            position: relative;
        }
        
        .close-bubble {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: #ff4444;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
        }
        
        /* للشاشات الصغيرة */
        @media (max-width: 480px) {
            .fixed-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .popup {
                width: 90%;
                padding: 15px;
            }
            
            .fixed-buttons-container {
                gap: 10px;
                padding: 8px;
            }
        }
    </style>
</head>
<body>

 


<!-- نافذة الاستغفار -->
<div id="istighfarPopup" class="popup">
    <div class="popup-header">
        <h2 class="popup-title">أذكار الاستغفار والتسبيح</h2>
    </div>
    <div class="popup-content">
        <div class="istighfar-text" id="istighfarText">استغفر الله العظيم</div>
        
        <div class="ayah">
            <p>﴿ وَمَن يَعْمَلْ سُوءًا أَوْ يَظْلِمْ نَفْسَهُ ثُمَّ يَسْتَغْفِرِ اللَّهَ يَجِدِ اللَّهَ غَفُورًا رَّحِيمًا ﴾</p>
            <p>[ النساء: 110 ]</p>
        </div>
        
        <div class="hadith">
            <p>عنِ ابْنِ عَبَّاسٍ رضِي اللَّه عنْهُما قَال: قالَ رَسولُ اللَّهِ ﷺ: منْ لَزِم الاسْتِغْفَار، جَعَلَ اللَّه لَهُ مِنْ كُلِّ ضِيقٍ مخْرجًا، ومنْ كُلِّ هَمٍّ فَرجًا، وَرَزَقَهُ مِنْ حيْثُ لاَ يَحْتَسِبُ</p>
            <p style="font-size: 0.8rem; margin-top: 5px;">رواه أبو داود</p>
        </div>
        
        <div id="counterContainer" style="text-align: center; margin: 15px 0;">
            <p>عدد التسبيحات: <span id="tasbeehCounter">0</span></p>
            <button class="btn btn-accent" onclick="incrementTasbeeh()">+1</button>
            <button class="btn btn-secondary" onclick="resetTasbeeh()">إعادة تعيين</button>
        </div>
    </div>
    <div class="popup-footer">
        <button class="btn btn-primary" onclick="changeDhikr()">تغيير الذكر</button>
        <button class="btn btn-secondary" onclick="togglePopup('istighfarPopup')">إغلاق</button>
    </div>
</div>

<!-- نافذة الصلاة -->
<div id="prayerPopup" class="popup">
    <div class="popup-header">
        <h2 class="popup-title">مواقيت الصلاة اليومية</h2>
        <h2 class="popup-title" style="color: red; text-shadow: 0 0 10px red;">تحذير هذه المواقيت غير دقيقة</h2>
    </div>
    <div class="popup-content">
        <select id="citySelector" class="city-selector" onchange="fetchPrayerTimes()">
            <option value="algiers">الجزائر العاصمة</option>
            <option value="oran">وهران</option>
            <option value="constantine">قسنطينة</option>
            <option value="annaba">عنابة</option>
            <option value="batna">باتنة</option>
            <option value="setif">سطيف</option>
            <option value="blida">البليدة</option>
            <option value="tlemcen">تلمسان</option>
            <option value="bejaia">بجاية</option>
            <option value="sidi_bel_abbes">سيدي بلعباس</option>
        </select>
        
        <div id="prayerDate" style="text-align: center; margin-bottom: 10px; font-weight: bold;"></div>
        
        <div id="nextPrayerTime" class="next-prayer"></div>
        
        <div class="prayer-times-container" id="prayerTimesContainer">
            <!-- سيتم ملؤها بواسطة الجافاسكريبت -->
        </div>
        
        <div class="ayah">
            <p>﴿ فَإِذَا قَضَيْتُمُ الصَّلَاةَ فَاذْكُرُوا اللَّهَ قِيَامًا وَقُعُودًا وَعَلَىٰ جُنُوبِكُمْ ۚ فَإِذَا اطْمَأْنَنتُمْ فَأَقِيمُوا الصَّلَاةَ ۚ إِنَّ الصَّلَاةَ كَانَتْ عَلَى الْمُؤْمِنِينَ كِتَابًا مَّوْقُوتًا ﴾</p>
            <p>[ النساء: 103 ]</p>
        </div>
    </div>
    <div class="popup-footer">
        <button class="btn btn-primary" onclick="togglePopup('prayerPopup')">إغلاق</button>
    </div>
</div>

<!-- نافذة الإعدادات -->
<div id="settingsPopup" class="popup">
    <div class="popup-header">
        <h2 class="popup-title">إعدادات التطبيق</h2>
    </div>
    <div class="popup-content">
        <div class="settings-form">
            <div class="form-group">
                <label for="autoOpenInterval">فترة الظهور التلقائي:</label>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="autoOpenMinutes" min="1" max="120" value="30" style="flex: 1;">
                    <span style="align-self: center;">دقائق</span>
                </div>
            </div>
            
            <div class="form-group">
                <label for="dhikrType">نوع الأذكار:</label>
                <select id="dhikrType">
                    <option value="istighfar">استغفار فقط</option>
                    <option value="tasbeeh">تسبيح فقط</option>
                    <option value="mixed" selected>مختلط (استغفار وتسبيح)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="notificationSound">صوت التنبيه:</label>
                <select id="notificationSound">
                    <option value="none">بدون صوت</option>
                    <option value="adhan">أذان</option>
                    <option value="bell" selected>جرس</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="showNotifications" checked> 
                    عرض التنبيهات
                </label>
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="enableBubbles" checked> 
                    تمكين فقاعات الأذكار
                </label>
            </div>
        </div>
    </div>
    
    <div class="popup-footer">
        <button class="btn btn-primary" onclick="saveSettings()">حفظ الإعدادات</button>
        <button class="btn btn-secondary" onclick="togglePopup('settingsPopup')">إلغاء</button>
    </div>
</div>

<script>
    // بيانات الأذكار
    const dhikrList = {
        istighfar: [
            "استغفر الله العظيم",
            "أستغفر الله الذي لا إله إلا هو الحي القيوم وأتوب إليه",
            "رب اغفر لي وتب علي إنك أنت التواب الرحيم",
            "اللهم أنت ربي لا إله إلا أنت، خلقتني وأنا عبدك، وأنا على عهدك ووعدك ما استطعت، أعوذ بك من شر ما صنعت، أبوء لك بنعمتك علي وأبوء بذنبي فاغفر لي فإنه لا يغفر الذنوب إلا أنت"
        ],
        tasbeeh: [
            "سبحان الله وبحمده",
            "سبحان الله العظيم",
            "لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير",
            "سبحان الله والحمد لله ولا إله إلا الله والله أكبر",
            "لا حول ولا قوة إلا بالله العلي العظيم"
        ],
        mixed: [
            "الحمد الله",
            "استغفر الله العظيم",
            "سبحان الله وبحمده",
            "أستغفر الله الذي لا إله إلا هو الحي القيوم وأتوب إليه",
            "سبحان الله العظيم",
            "رب اغفر لي وتب علي إنك أنت التواب الرحيم",
            "لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير"
        ]
    };

    // بيانات المدن
    const citiesMap = {
        algiers: "algeria/algiers",
        oran: "algeria/oran",
        constantine: "algeria/constantine",
        annaba: "algeria/annaba",
        batna: "algeria/batna",
        setif: "algeria/setif",
        blida: "algeria/blida",
        tlemcen: "algeria/tlemcen",
        bejaia: "algeria/bejaia",
        sidi_bel_abbes: "algeria/sidi-bel-abbes"
    };

    // متغيرات التطبيق
    let settings = {
        autoOpenMinutes: 30,
        dhikrType: "mixed",
        notificationSound: "bell",
        showNotifications: true,
        enableBubbles: true
    };

    let tasbeehCounter = 0;
    let prayerTimes = {};
    let activeNotifications = [];
    let autoDhikrInterval;

    // تهيئة التطبيق عند التحميل
    window.onload = function() {
        loadSettings();
        fetchPrayerTimes();
        setupAutoDhikr();
        
        // طلب إذن الإشعارات
        if (Notification.permission !== "granted" && Notification.permission !== "denied") {
            Notification.requestPermission();
        }
    };

    // تبديل النوافذ المنبثقة
    function togglePopup(popupId) {
        const popup = document.getElementById(popupId);
        if (popup.style.display === "block") {
            popup.style.display = "none";
        } else {
            // إغلاق جميع النوافذ الأخرى أولاً
            document.querySelectorAll('.popup').forEach(p => {
                if (p.id !== popupId) p.style.display = "none";
            });
            popup.style.display = "block";
        }
    }

    // تغيير الذكر المعروض
    function changeDhikr() {
        const dhikrType = settings.dhikrType;
        const dhikrArray = dhikrList[dhikrType];
        const randomIndex = Math.floor(Math.random() * dhikrArray.length);
        document.getElementById("istighfarText").textContent = dhikrArray[randomIndex];
    }

    // زيادة عداد التسبيح
    function incrementTasbeeh() {
        tasbeehCounter++;
        document.getElementById("tasbeehCounter").textContent = tasbeehCounter;
    }

    // إعادة تعيين عداد التسبيح
    function resetTasbeeh() {
        tasbeehCounter = 0;
        document.getElementById("tasbeehCounter").textContent = tasbeehCounter;
    }

    // جلب مواقيت الصلاة
    function fetchPrayerTimes() {
        const city = document.getElementById("citySelector").value;
        const cityPath = citiesMap[city];
        
        // هنا يجب استبدال هذا الجزء بطلب حقيقي لمواقيت الصلاة من API
        // هذا مجرد مثال للبيانات الوهمية
        const today = new Date();
        const fakePrayerTimes = {
            Fajr: "05:30",
            Sunrise: "06:45",
            Dhuhr: "12:45",
            Asr: "15:30",
            Maghrib: "18:20",
            Isha: "19:45"
        };
        
        prayerTimes = fakePrayerTimes;
        updatePrayerTimesDisplay();
        updateNextPrayerTime();
        
        // تحديث التاريخ المعروض
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById("prayerDate").textContent = today.toLocaleDateString('ar-AR', options);
    }

    // تحديث عرض مواقيت الصلاة
    function updatePrayerTimesDisplay() {
        const container = document.getElementById("prayerTimesContainer");
        container.innerHTML = "";
        
        for (const [prayer, time] of Object.entries(prayerTimes)) {
            const prayerTimeDiv = document.createElement("div");
            prayerTimeDiv.className = "prayer-time";
            
            const prayerNameSpan = document.createElement("span");
            prayerNameSpan.className = "prayer-name";
            prayerNameSpan.textContent = prayer;
            
            const prayerTimeSpan = document.createElement("span");
            prayerTimeSpan.className = "prayer-time";
            prayerTimeSpan.textContent = time;
            
            prayerTimeDiv.appendChild(prayerNameSpan);
            prayerTimeDiv.appendChild(prayerTimeSpan);
            container.appendChild(prayerTimeDiv);
        }
    }

    // تحديث وقت الصلاة التالي
    function updateNextPrayerTime() {
        const now = new Date();
        const currentHour = now.getHours();
        const currentMinute = now.getMinutes();
        
        let nextPrayer = "";
        let nextTime = "";
        
        // هذا مثال مبسط، في التطبيق الحقيقي يجب تحويل الأوقات إلى دقائق للمقارنة
        if (currentHour < 5 || (currentHour === 5 && currentMinute < 30)) {
            nextPrayer = "الفجر";
            nextTime = prayerTimes.Fajr;
        } else if (currentHour < 12 || (currentHour === 12 && currentMinute < 45)) {
            nextPrayer = "الظهر";
            nextTime = prayerTimes.Dhuhr;
        } else if (currentHour < 15 || (currentHour === 15 && currentMinute < 30)) {
            nextPrayer = "العصر";
            nextTime = prayerTimes.Asr;
        } else if (currentHour < 18 || (currentHour === 18 && currentMinute < 20)) {
            nextPrayer = "المغرب";
            nextTime = prayerTimes.Maghrib;
        } else {
            nextPrayer = "العشاء";
            nextTime = prayerTimes.Isha;
        }
        
        document.getElementById("nextPrayerTime").textContent = `الصلاة القادمة: ${nextPrayer} ${nextTime}`;
    }

    // إعداد الأذكار التلقائية
    function setupAutoDhikr() {
        // إلغاء أي فاصل زمني موجود
        if (autoDhikrInterval) {
            clearInterval(autoDhikrInterval);
        }
        
        // تحديد الفاصل الزمني من الإعدادات
        const intervalMinutes = settings.autoOpenMinutes || 30;
        
        // تعيين فاصل زمني جديد
        autoDhikrInterval = setInterval(() => {
            if (settings.enableBubbles) {
                showDhikrBubble();
            }
        }, intervalMinutes * 60000);
    }

    // عرض فقاعة الأذكار
    function showDhikrBubble() {
        // إغلاق أي فقاعات موجودة
        closeAllBubbles();
        
        const bubble = document.createElement("div");
        bubble.className = "dhikr-bubble";
        
        // اختيار ذكر عشوائي
        const dhikrType = settings.dhikrType;
        const dhikrArray = dhikrList[dhikrType];
        const randomIndex = Math.floor(Math.random() * dhikrArray.length);
        
        bubble.innerHTML = `
            <div class="bubble-content">
                <p>${dhikrArray[randomIndex]}</p>
                <button class="close-bubble" onclick="this.parentElement.parentElement.style.display='none'">✕</button>
            </div>
        `;
        
        document.body.appendChild(bubble);
        
        // وضع عشوائي على الشاشة
        const maxX = window.innerWidth - 250;
        const maxY = window.innerHeight - 150;
        bubble.style.left = `${Math.random() * maxX}px`;
        bubble.style.top = `${Math.random() * maxY}px`;
        bubble.style.display = 'block';
        
        // إضافة تأثير الظهور
        setTimeout(() => bubble.style.opacity = '1', 10);
        
        // تشغيل الصوت إذا كان مفعلًا
        if (settings.notificationSound !== 'none') {
            playNotificationSound();
        }
        
        // إرسال إشعار إذا كان مفعلًا
        if (settings.showNotifications && Notification.permission === "granted") {
            const notification = new Notification('تذكير بالأذكار', {
                body: dhikrArray[randomIndex],
                icon: 'icon.png'
            });
            activeNotifications.push(notification);
        }
    }

    // إغلاق جميع الفقاعات
    function closeAllBubbles() {
        const bubbles = document.querySelectorAll('.dhikr-bubble');
        bubbles.forEach(bubble => bubble.remove());
        
        // إغلاق جميع الإشعارات النشطة
        activeNotifications.forEach(notification => notification.close());
        activeNotifications = [];
    }

    // تشغيل صوت الإشعار
    function playNotificationSound() {
        const audio = new Audio();
        audio.src = settings.notificationSound === 'bell' ? 'bell.mp3' : 'adhan.mp3';
        audio.play().catch(e => console.log("لا يمكن تشغيل الصوت: ", e));
    }

    // حفظ الإعدادات
    function saveSettings() {
        settings = {
            autoOpenMinutes: parseInt(document.getElementById("autoOpenMinutes").value) || 30,
            dhikrType: document.getElementById("dhikrType").value,
            notificationSound: document.getElementById("notificationSound").value,
            showNotifications: document.getElementById("showNotifications").checked,
            enableBubbles: document.getElementById("enableBubbles").checked
        };
        
        localStorage.setItem("dhikrAppSettings", JSON.stringify(settings));
        
        // إعادة تهيئة الأذكار التلقائية
        setupAutoDhikr();
        
        togglePopup('settingsPopup');
        showDhikrBubble(); // عرض فقاعة تأكيد الحفظ
    }

    // تحميل الإعدادات
    function loadSettings() {
        const savedSettings = localStorage.getItem("dhikrAppSettings");
        if (savedSettings) {
            settings = JSON.parse(savedSettings);
            
            document.getElementById("autoOpenMinutes").value = settings.autoOpenMinutes || 30;
            document.getElementById("dhikrType").value = settings.dhikrType;
            document.getElementById("notificationSound").value = settings.notificationSound;
            document.getElementById("showNotifications").checked = settings.showNotifications !== false;
            document.getElementById("enableBubbles").checked = settings.enableBubbles !== false;
        }
    }
</script>
</body>
</html>














<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>تنبيه طبي - TAWASL</title>
    <style>
        /* تهيئة عامة */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
        }

        /* زر التواصل معنا - تصميم جديد */
        .tws-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4a6bff, #3a56e0);
            color: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 5px 15px rgba(74, 107, 255, 0.3), 
                        inset 0 2px 4px rgba(255, 255, 255, 0.3);
            transition: all 0.2s ease;
            z-index: 1000;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            animation: tws-pulse 2s infinite;
            overflow: hidden;
        }

        .tws-button img {
            width: 30px;
            height: 30px;
            object-fit: contain;
            margin-bottom: 2px;
        }

        .tws-button span {
            font-size: 10px;
            font-weight: bold;
        }

        @keyframes tws-pulse {
            0% { box-shadow: 0 0 0 0 rgba(74, 107, 255, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(74, 107, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(74, 107, 255, 0); }
        }

        .tws-button:hover {
            transform: scale(1.1);
            background: linear-gradient(135deg, #5a7bff, #4a66f0);
        }

        .tws-button:active {
            transform: scale(0.95);
            animation: none;
        }

        /* طبقة التعتيم */
        .tws-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            display: none;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        /* نافذة المحتوى */
        .tws-modal {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            display: flex;
            flex-direction: column;
            z-index: 1002;
            display: none;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            background: white;
        }

        .tws-header {
            background: linear-gradient(to right, #4a6bff, #3a56e0);
            color: white;
            padding: 15px;
            text-align: center;
            position: relative;
            flex-shrink: 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .tws-header h2 {
            font-size: 1.2rem;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            margin: 0;
            padding: 0 25px;
        }

        .tws-content {
            flex-grow: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            background-color: #f5f5f5;
        }

        /* زر الإغلاق الجديد */
        .tws-close-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            color: #4a6bff;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.2s;
        }

        .tws-close-btn:hover {
            transform: rotate(90deg);
            background: #f0f4ff;
        }

        /* مؤشر التحميل */
        .tws-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 20px;
        }

        .tws-spinner {
            width: 40px;
            height: 40px;
            border: 5px solid rgba(74, 107, 255, 0.2);
            border-top: 5px solid #4a6bff;
            border-radius: 50%;
            animation: tws-spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes tws-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tws-loader p {
            color: #7f8c8d;
            font-size: 1rem;
            margin-top: 10px;
        }

        /* المحتوى المعروض */
        .tws-message {
            padding: 15px;
            line-height: 1.6;
            font-size: 0.9rem;
            color: #333;
        }

        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 480px) {
            .tws-button {
                width: 50px;
                height: 50px;
                bottom: 15px;
                left: 15px;
            }
            
            .tws-button img {
                width: 25px;
                height: 25px;
            }
            
            .tws-button span {
                font-size: 8px;
            }
            
            .tws-header {
                padding: 12px;
            }
            
            .tws-header h2 {
                font-size: 1rem;
            }
            
            .tws-close-btn {
                width: 25px;
                height: 25px;
                font-size: 1rem;
                top: 8px;
                left: 8px;
            }
            
            .tws-modal {
                top: 5px;
                left: 5px;
                right: 5px;
                bottom: 5px;
                border-radius: 10px;
            }
            
            .tws-spinner {
                width: 35px;
                height: 35px;
            }
        }

        /* تحسينات لللمس على الهواتف */
        @media (hover: none) {
            .tws-button:hover {
                transform: scale(1);
                background: linear-gradient(135deg, #4a6bff, #3a56e0);
            }
            
            .tws-close-btn:hover {
                transform: rotate(0deg);
                background: white;
            }
        }
    </style>
</head>
<body>

<!-- زر التواصل معنا -->


<!-- طبقة التعتيم -->
<div class="tws-overlay" id="twsOverlay"></div>

<!-- نافذة المحتوى -->
<div class="tws-modal" id="twsModal">
    <div class="tws-header">
        <button class="tws-close-btn" onclick="twsCloseModal()">×</button>
        <h2>التواصل معنا   للمساعدة سواء لمشكلة  اخطا بذر  منا او  اشارة منك الينا او اقتراح </h2>
    </div>
    <div class="tws-content" id="twsContent">
        <div class="tws-loader">
            <div class="tws-spinner"></div>
            <p>جاري تحميل المحتوى ...</p>
        </div>
    </div>
</div>

<script>
    // متغيرات التطبيق
    let twsContentLoaded = false;
    const twsContentUrl = "https://s22mcs.github.io/S22MCS02-/TAWASLE_ADAT_EALM.html";
    
    // عناصر DOM
    const twsModal = document.getElementById('twsModal');
    const twsOverlay = document.getElementById('twsOverlay');
    const twsContent = document.getElementById('twsContent');
    const twsButton = document.querySelector('.tws-button');
    
    // تبديل عرض/إخفاء النافذة
    function twsOpenModal() {
        // إيقاف تأثير النبض عند الفتح
        twsButton.style.animation = 'none';
        
        twsOverlay.style.display = 'block';
        twsModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        if (!twsContentLoaded) {
            twsLoadContent();
        }
        
        // اهتزاز عند الفتح
        twsVibrate();
    }
    
    function twsCloseModal() {
        // إعادة تشغيل تأثير النبض عند الإغلاق
        twsButton.style.animation = 'tws-pulse 2s infinite';
        
        twsOverlay.style.display = 'none';
        twsModal.style.display = 'none';
        document.body.style.overflow = 'auto';
        
        // اهتزاز عند الإغلاق
        twsVibrate();
    }
    
    // تحميل المحتوى
    async function twsLoadContent() {
        try {
            // استخدام iframe كحل أساسي
            twsShowIframe();
            twsContentLoaded = true;
        } catch (error) {
            twsShowError(error);
        }
    }
    
    // عرض المحتوى باستخدام iframe
    function twsShowIframe() {
        twsContent.innerHTML = `
            <iframe src="${twsContentUrl}" 
                    style="width:100%; height:100%; border:none;"
                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                    loading="lazy">
            </iframe>
        `;
    }
    
    // عرض رسالة الخطأ
    function twsShowError(error) {
        twsContent.innerHTML = `
            <div class="tws-loader">
                <div style="color: #4a6bff; margin-bottom: 15px; font-size: 1rem;">⚠️ خطأ في تحميل المحتوى</div>
                <p style="margin-bottom: 20px; color: #555;">${error.message}</p>
                <button onclick="twsRetry()" 
                        style="padding: 8px 16px; 
                               background: linear-gradient(to right, #4a6bff, #3a56e0); 
                               color: white; 
                               border: none; 
                               border-radius: 30px;
                               font-size: 0.9rem;
                               box-shadow: 0 3px 10px rgba(74, 107, 255, 0.3);
                               transition: all 0.2s;">
                    إعادة المحاولة
                </button>
            </div>
        `;
    }
    
    // إعادة تحميل المحتوى
    function twsRetry() {
        twsContent.innerHTML = `
            <div class="tws-loader">
                <div class="tws-spinner"></div>
                <p>جاري تحميل المحتوى الطبي...</p>
            </div>
        `;
        twsLoadContent();
    }
    
    // إغلاق النافذة عند النقر خارجها
    twsOverlay.addEventListener('click', twsCloseModal);
    
    // منع إغلاق النافذة عند النقر داخلها
    twsModal.addEventListener('click', (e) => {
        e.stopPropagation();
    });
    
    // تحسين الأداء للهواتف
    if ('connection' in navigator) {
        if (navigator.connection.saveData || navigator.connection.effectiveType.includes('2g')) {
            // تحسينات لشبكات الجيل الثاني
            twsButton.style.animation = 'none';
        }
    }
    
    // إضافة اهتزاز عند النقر (للهواتف)
    function twsVibrate() {
        if ('vibrate' in navigator) {
            navigator.vibrate(10);
        }
    }
    
    // إضافة الاهتزاز للأزرار
    document.querySelector('.tws-button').addEventListener('click', twsVibrate);
    document.querySelector('.tws-close-btn')?.addEventListener('click', twsVibrate);
</script>

</body>
</html>






















